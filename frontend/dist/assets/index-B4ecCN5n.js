import{d as a,r as s,a as e,o as t,b as l,c as d,F as i,e as n,f as c,n as o,g as v,h as r,w as p,i as u,j as f,k as h,t as b,u as g,l as m,m as k,p as y,q as x,T as w,s as C,v as M,x as P,y as S,z as _,A as V,B as R,C as I,D as T,E as F,G as U,H as A,I as L,J as B,K as D,L as E,M as $,N,O as Y}from"./vendor-CJzl6wcp.js";import{_ as q}from"./pdf-CDn_A7Xt.js";!function(){const a=document.createElement("link").relList;if(!(a&&a.supports&&a.supports("modulepreload"))){for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const e of a)if("childList"===e.type)for(const a of e.addedNodes)"LINK"===a.tagName&&"modulepreload"===a.rel&&s(a)}).observe(document,{childList:!0,subtree:!0})}function s(a){if(a.ep)return;a.ep=!0;const s=function(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),"use-credentials"===a.crossOrigin?s.credentials="include":"anonymous"===a.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(a);fetch(a.href,s)}}();const H={class:"sidebar-tools custom-scroll"},Q={class:"tool-group"},O={class:"tool-content"},G={class:"nav-label"},j={class:"tool-group"},z={class:"tool-content"},W={class:"nav-label"},K={class:"tool-group"},X={class:"tool-content"},J={class:"nav-label"},Z={class:"tool-group"},aa={class:"tool-content"},sa={class:"tool-group"},ea={class:"tool-content"},ta={class:"tool-group"},la={class:"tool-content"},da={class:"tool-group"},ia={class:"tool-content"},na={class:"tool-group"},ca={class:"tool-content"},oa={class:"tool-group"},va={class:"tool-content"},ra={class:"sidebar-footer"},pa={class:"status-row"},ua={class:"val mono"},fa=(a,s)=>{const e=a.__vccOpts||a;for(const[t,l]of s)e[t]=l;return e},ha=fa(a({__name:"Sidebar",setup(a){const k=g(),y=s("--:--"),x=s(!1),w=e({portfolio:!0,risk:!1,quant:!1,options:!1,swaps:!1,vol:!1,bonds:!1,forwards:!1,margin:!1}),C=a=>{w[a]=!w[a]},M=[{path:"/dashboard",label:"Главная"},{path:"/portfolio",label:"Оптимизация портфеля"},{path:"/monte-carlo",label:"Симуляция Монте-Карло"},{path:"/greeks",label:"Риск-метрики"},{path:"/reports",label:"Отчёты"},{path:"/settings",label:"Параметры"}],P=[{path:"/backtest",label:"Бэктестинг"},{path:"/stress",label:"Стресс-тестирование"}],S=[{path:"/regimes",label:"Рыночные режимы"},{path:"/regime-details",label:"Детальный анализ режимов"},{path:"/fixed-income",label:"Доходности облигаций"}],_=a=>k.path===a,V=()=>{x.value=!x.value},R=()=>{x.value=!1},I=()=>{y.value=(new Date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})};let T;return t(()=>{I(),T=setInterval(I,1e3)}),l(()=>clearInterval(T)),(a,s)=>{const e=r("router-link");return m(),d(i,null,[n("div",{class:o(["sidebar-tab",{active:x.value,hidden:x.value}]),onClick:V,title:"Open Menu"},[...s[9]||(s[9]=[n("div",{class:"burger-icon"},[n("span"),n("span"),n("span")],-1)])],2),x.value?(m(),d("div",{key:0,class:"sidebar-backdrop",onClick:R})):c("",!0),n("aside",{class:o(["sidebar",{"sidebar--open":x.value}])},[n("div",{class:"sidebar-header"},[s[10]||(s[10]=n("span",{class:"app-logo"},"Quantitative Analitics",-1)),n("button",{class:"close-btn",onClick:R},"✕")]),n("nav",H,[v(e,{to:"/",class:o(["home-entry",{active:_("/")}]),onClick:R},{default:p(()=>[...s[11]||(s[11]=[n("div",{class:"home-icon"},[n("div",{class:"supernova-home"})],-1),n("div",{class:"home-info"},[n("div",{class:"home-title"},"Главная"),n("div",{class:"home-subtitle"},"Обзор инструментов")],-1)])]),_:1},8,["class"]),n("div",Q,[n("button",{class:o(["tool-header",{expanded:w.portfolio}]),onClick:s[0]||(s[0]=a=>C("portfolio"))},[...s[12]||(s[12]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova blue" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Портфельный анализ</span><span class="tool-subtitle" data-v-6ecf8fbf>Анализ и оптимизация</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.portfolio?"600px":"0"})},[n("div",O,[(m(),d(i,null,h(M,a=>v(e,{key:a.path,to:a.path,class:o(["nav-item",{active:_(a.path)}]),onClick:R},{default:p(()=>[n("span",G,b(a.label),1)]),_:2},1032,["to","class"])),64))])],4)]),n("div",j,[n("button",{class:o(["tool-header",{expanded:w.risk}]),onClick:s[1]||(s[1]=a=>C("risk"))},[...s[13]||(s[13]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova purple" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Риск-менеджмент</span><span class="tool-subtitle" data-v-6ecf8fbf>Бэктестинг, стресс-тестировние</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.risk?"220px":"0"})},[n("div",z,[(m(),d(i,null,h(P,a=>v(e,{key:a.path,to:a.path,class:o(["nav-item",{active:_(a.path)}]),onClick:R},{default:p(()=>[n("span",W,b(a.label),1)]),_:2},1032,["to","class"])),64))])],4)]),n("div",K,[n("button",{class:o(["tool-header",{expanded:w.quant}]),onClick:s[2]||(s[2]=a=>C("quant"))},[...s[14]||(s[14]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova cyan" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Скрытая марковская цепь</span><span class="tool-subtitle" data-v-6ecf8fbf>Модели и режимы</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.quant?"300px":"0"})},[n("div",X,[(m(),d(i,null,h(S,a=>v(e,{key:a.path,to:a.path,class:o(["nav-item",{active:_(a.path)}]),onClick:R},{default:p(()=>[n("span",J,b(a.label),1)]),_:2},1032,["to","class"])),64))])],4)]),n("div",Z,[n("button",{class:o(["tool-header",{expanded:w.options}]),onClick:s[3]||(s[3]=a=>C("options"))},[...s[15]||(s[15]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Опционы</span><span class="tool-subtitle" data-v-6ecf8fbf>Справедливая стоимость</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.options?"100px":"0"})},[n("div",aa,[v(e,{to:"/pricing/options",class:"nav-item coming-soon"},{default:p(()=>[...s[16]||(s[16]=[n("span",{class:"nav-label"},"Калькулятор опционов",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",sa,[n("button",{class:o(["tool-header",{expanded:w.swaps}]),onClick:s[4]||(s[4]=a=>C("swaps"))},[...s[17]||(s[17]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>СВОПы</span><span class="tool-subtitle" data-v-6ecf8fbf>Справедливая стоимость</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.swaps?"100px":"0"})},[n("div",ea,[v(e,{to:"/pricing/swaps",class:"nav-item coming-soon"},{default:p(()=>[...s[18]||(s[18]=[n("span",{class:"nav-label"},"IRS & Currency Swaps",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",ta,[n("button",{class:o(["tool-header",{expanded:w.vol}]),onClick:s[5]||(s[5]=a=>C("vol"))},[...s[19]||(s[19]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Поверхность волатильности</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.vol?"100px":"0"})},[n("div",la,[v(e,{to:"/pricing/surface",class:"nav-item coming-soon"},{default:p(()=>[...s[20]||(s[20]=[n("span",{class:"nav-label"},"Построение (SABR/SVI)",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",da,[n("button",{class:o(["tool-header",{expanded:w.bonds}]),onClick:s[6]||(s[6]=a=>C("bonds"))},[...s[21]||(s[21]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Справедливая стоимость облигаций</span><span class="tool-subtitle" data-v-6ecf8fbf>Доходный подход (DCF)</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.bonds?"100px":"0"})},[n("div",ia,[v(e,{to:"/pricing/bonds",class:"nav-item coming-soon"},{default:p(()=>[...s[22]||(s[22]=[n("span",{class:"nav-label"},"Оценка облигаций",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",na,[n("button",{class:o(["tool-header",{expanded:w.forwards}]),onClick:s[7]||(s[7]=a=>C("forwards"))},[...s[23]||(s[23]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Форварды</span><span class="tool-subtitle" data-v-6ecf8fbf>Оценка справедливой стоимости</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.forwards?"100px":"0"})},[n("div",ca,[v(e,{to:"/pricing/forwards",class:"nav-item coming-soon"},{default:p(()=>[...s[24]||(s[24]=[n("span",{class:"nav-label"},"Оценка форвардов",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",oa,[n("button",{class:o(["tool-header",{expanded:w.margin}]),onClick:s[8]||(s[8]=a=>C("margin"))},[...s[25]||(s[25]=[u('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Маржа по деривативам</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.margin?"100px":"0"})},[n("div",va,[v(e,{to:"/pricing/margin",class:"nav-item coming-soon"},{default:p(()=>[...s[26]||(s[26]=[n("span",{class:"nav-label"},"Расчет маржи",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)])]),s[29]||(s[29]=n("div",{class:"sidebar-divider"},null,-1)),n("div",ra,[s[28]||(s[28]=n("div",{class:"status-row"},[n("span",{class:"lbl"},"API статус"),n("span",{class:"val connected"},"● Онлайн")],-1)),n("div",pa,[s[27]||(s[27]=n("span",{class:"lbl"},"Время",-1)),n("span",ua,b(y.value),1)])])],2)],64)}}}),[["__scopeId","data-v-6ecf8fbf"]]),ba=k("tasks",()=>{const a=s([]),e=s=>{a.value=a.value.filter(a=>a.id!==s)};return{tasks:a,addTask:(s,e="calculation")=>{const t=Date.now().toString();return a.value.push({id:t,title:s,progress:0,status:"running",type:e}),t},updateProgress:(s,t)=>{const l=a.value.find(a=>a.id===s);l&&(l.progress=t,t>=100&&(l.status="completed",setTimeout(()=>e(s),3e3)))},failTask:s=>{const t=a.value.find(a=>a.id===s);t&&(t.status="error",setTimeout(()=>e(s),5e3))}}}),ga={class:"island-content"},ma={class:"island-title"},ka={class:"island-right"},ya={class:"island-pct"},xa=fa(a({__name:"TaskWidget",setup(a){const e=ba(),t=s(!1),l=y(()=>{const a=e.tasks.filter(a=>"running"===a.status||"pending"===a.status);return a.length>0?a[a.length-1]:null}),i=()=>{e.tasks.length>1&&(t.value=!t.value)};return(a,s)=>(m(),x(w,{name:"island-pop"},{default:p(()=>[l.value?(m(),d("div",{key:0,class:"dynamic-island",onClick:i},[s[0]||(s[0]=n("div",{class:"island-left"},[n("div",{class:"spinner-island"})],-1)),n("div",ga,[n("span",ma,b(l.value.title),1)]),n("div",ka,[n("span",ya,b(Math.round(l.value.progress))+"%",1)]),n("div",{class:"island-progress-bg",style:f({width:l.value.progress+"%"})},null,4)])):c("",!0)]),_:1}))}}),[["__scopeId","data-v-041506f2"]]),wa={class:"app-root"},Ca={class:"app-container"},Ma={class:"main-window"},Pa={class:"island-position"},Sa={class:"window-header"},_a={class:"header-content"},Va={class:"header-top"},Ra={class:"breadcrumbs"},Ia={class:"crumb-active"},Ta={class:"system-status"},Fa={class:"status-text"},Ua={class:"mono"},Aa={class:"header-bottom"},La={class:"search-wrapper"},Ba={class:"actions-group"},Da={key:0,class:"notification-dot"},Ea={key:0,class:"notifications-panel glass-panel"},$a={class:"panel-header"},Na={class:"window-content"},Ya=fa(a({__name:"MainLayout",setup(a){const e=g(),l=s(""),i=s(!1),u=s(2),f=s(14),h=y(()=>e.name?String(e.name).toUpperCase():"OVERVIEW"),k=()=>i.value=!i.value;return t(()=>{setInterval(()=>{f.value=12+Math.floor(8*Math.random())},2e3)}),(a,s)=>{const e=r("RouterView");return m(),d("div",wa,[s[12]||(s[12]=n("div",{class:"ambient-glow purple"},null,-1)),s[13]||(s[13]=n("div",{class:"ambient-glow blue"},null,-1)),n("div",Ca,[v(ha),n("div",Ma,[n("div",Pa,[v(xa)]),n("header",Sa,[n("div",_a,[n("div",Va,[n("nav",Ra,[s[2]||(s[2]=n("span",{class:"crumb-root"},"DASHBOARD",-1)),s[3]||(s[3]=n("span",{class:"crumb-sep"},"/",-1)),n("span",Ia,b(h.value),1)]),n("div",Ta,[s[5]||(s[5]=n("div",{class:"status-pill"},[n("span",{class:"pulse-dot"}),C(" API Live ")],-1)),s[6]||(s[6]=n("div",{class:"divider"},null,-1)),n("div",Fa,[s[4]||(s[4]=C(" Ping: ",-1)),n("span",Ua,b(f.value)+"ms",1)])])]),n("div",Aa,[n("div",La,[s[7]||(s[7]=n("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"11",cy:"11",r:"8"}),n("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),M(n("input",{type:"text",placeholder:"Поиск тикера, ISIN или стратегии...",class:"search-input","onUpdate:modelValue":s[0]||(s[0]=a=>l.value=a)},null,512),[[P,l.value]]),s[8]||(s[8]=n("div",{class:"hk-badge"},"⌘K",-1))]),n("div",Ba,[n("button",{class:o(["icon-btn",{active:i.value}]),onClick:k},[s[9]||(s[9]=n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),n("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),u.value?(m(),d("span",Da)):c("",!0)],2)])])]),v(w,{name:"drawer"},{default:p(()=>[i.value?(m(),d("div",Ea,[n("div",$a,[s[10]||(s[10]=n("h3",null,"Уведомления",-1)),n("button",{onClick:s[1]||(s[1]=a=>u.value=0),class:"clear-btn"},"Очистить")]),s[11]||(s[11]=n("div",{class:"notifications-list"},[n("div",{class:"notif-item warning"},[n("div",{class:"notif-icon"},"⚠️"),n("div",{class:"notif-content"},[n("div",{class:"notif-title"},"High Volatility Alert"),n("div",{class:"notif-desc"},"VIX index spike detected (>25.0)")]),n("div",{class:"notif-time"},"2m")]),n("div",{class:"notif-item success"},[n("div",{class:"notif-icon"},"✅"),n("div",{class:"notif-content"},[n("div",{class:"notif-title"},"Rebalancing Complete"),n("div",{class:"notif-desc"},"Portfolio adjusted successfully")]),n("div",{class:"notif-time"},"1h")])],-1))])):c("",!0)]),_:1})]),n("main",Na,[v(e,null,{default:p(({Component:a})=>[v(w,{name:"fade",mode:"out-in"},{default:p(()=>[(m(),x(S(a)))]),_:2},1024)]),_:1})])])])])}}}),[["__scopeId","data-v-82f3416c"]]),qa={class:"home-root"},Ha={class:"home-layout"},Qa={class:"hero"},Oa={class:"hero-actions"},Ga={class:"tool-grid"},ja={class:"tools-grid"},za=a({__name:"Home",setup(a){const e=_(),t=s(null),l=a=>null!==t.value&&t.value!==a,i=a=>{t.value||(t.value=a,setTimeout(()=>{e.push(a)},350))};return(a,s)=>{const e=r("router-link");return m(),d("div",qa,[s[24]||(s[24]=u('<div class="lava-layer" data-v-8da96078><div class="blob blob-1" data-v-8da96078></div><div class="blob blob-2" data-v-8da96078></div><div class="blob blob-3" data-v-8da96078></div><div class="blob blob-4" data-v-8da96078></div><div class="glass-gradient" data-v-8da96078></div></div>',1)),n("div",Ha,[n("section",Qa,[s[11]||(s[11]=n("div",{class:"logo-badge"},"Калькулятор количественной аналитики",-1)),s[12]||(s[12]=n("h1",{class:"hero-title"},[C(" Комплексный "),n("span",null,"калькулятор"),C(" для портфелей ценных бумаг и деривативов ")],-1)),s[13]||(s[13]=n("p",{class:"hero-subtitle"}," Единая панель для портфельного анализа, режимов рынка, справедливой стоимости деривативов и риск‑менеджмента институционального уровня. ",-1)),n("div",Oa,[v(e,{to:"/dashboard",class:"btn primary"},{default:p(()=>[...s[9]||(s[9]=[C(" Открыть рабочую панель ",-1)])]),_:1}),v(e,{to:"/regimes",class:"btn ghost"},{default:p(()=>[...s[10]||(s[10]=[C(" Смотреть рыночные режимы ",-1)])]),_:1})])]),n("section",Ga,[s[23]||(s[23]=n("h2",{class:"tools-title"},"Инструменты платформы",-1)),n("div",ja,[n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/portfolio"===t.value,"is-faded":l("/portfolio")}]),onClick:s[0]||(s[0]=a=>i("/portfolio"))},[...s[14]||(s[14]=[u('<div class="tool-icon blue" data-v-8da96078><div class="supernova blue" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Портфельный анализ</div><div class="tool-desc" data-v-8da96078> Доходность, риск‑метрики, VaR/ES, мониторинг позиций. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/regimes"===t.value,"is-faded":l("/regimes")}]),onClick:s[1]||(s[1]=a=>i("/regimes"))},[...s[15]||(s[15]=[u('<div class="tool-icon indigo" data-v-8da96078><div class="supernova indigo" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Скрытая марковская цепь для портфелей ценных бумаг</div><div class="tool-desc" data-v-8da96078> Скрытые состояния, матрицы переходов, стационарное распределение. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/options"===t.value,"is-faded":l("/pricing/options")}]),onClick:s[2]||(s[2]=a=>i("/pricing/options"))},[...s[16]||(s[16]=[u('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Вычисление справедливой стоимости опционов</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> БШМ, Модель Хестона, процессы Леви. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/swaps"===t.value,"is-faded":l("/pricing/swaps")}]),onClick:s[3]||(s[3]=a=>i("/pricing/swaps"))},[...s[17]||(s[17]=[u('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Вычисление справедливой стоимости сделок СВОП</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Процентные и валютные свопы, NPV, DV01, чувствительность. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/surface"===t.value,"is-faded":l("/pricing/surface")}]),onClick:s[4]||(s[4]=a=>i("/pricing/surface"))},[...s[18]||(s[18]=[u('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Поверхность волатильности</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Калибровка SABR/SVI, smile &amp; term‑structure, арбитраж‑free. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/bonds"===t.value,"is-faded":l("/pricing/bonds")}]),onClick:s[5]||(s[5]=a=>i("/pricing/bonds"))},[...s[19]||(s[19]=[u('<div class="tool-icon green" data-v-8da96078><div class="supernova green" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Определение справедливой стоимости облигаций (DCF)</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Доходный подход, спреды к кривой, модифиц. дюрация, convexity. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/forwards"===t.value,"is-faded":l("/pricing/forwards")}]),onClick:s[6]||(s[6]=a=>i("/pricing/forwards"))},[...s[20]||(s[20]=[u('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Определение справедливой стоимости сделок Форвард</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Теоретическая цена, cost‑of‑carry, кросс‑курсы, roll‑down. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/margin"===t.value,"is-faded":l("/pricing/margin")}]),onClick:s[7]||(s[7]=a=>i("/pricing/margin"))},[...s[21]||(s[21]=[u('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Маржа по деривативам</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Вариационная/начальная, стресс‑надбавки. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/stress"===t.value,"is-faded":l("/stress")}]),onClick:s[8]||(s[8]=a=>i("/stress"))},[...s[22]||(s[22]=[u('<div class="tool-icon red" data-v-8da96078><div class="supernova red" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Риск менеджмент</div><div class="tool-desc" data-v-8da96078> Стресс‑тесты, бэктестинг VaR, сценарный анализ портфеля. </div></div>',2)])],2)])])]),n("div",{class:o(["flash-overlay",{active:!!t.value}])},null,2)])}}}),Wa=fa(za,[["__scopeId","data-v-8da96078"]]),Ka={class:"page-container"},Xa={class:"ticker-wrapper"},Ja={class:"ticker-content"},Za={class:"t-symbol"},as={class:"t-price"},ss={class:"t-symbol"},es={class:"t-price"},ts={class:"dashboard-grid"},ls={class:"grid-col-left"},ds={class:"shortcuts-grid"},is={class:"card glass-panel alerts-panel"},ns={class:"alert-content"},cs={class:"alert-msg"},os={class:"alert-time"},vs=fa(a({__name:"MainDashboard",setup(a){const e=s([{symbol:"S&P 500",price:"4,785.20",change:.45},{symbol:"NASDAQ",price:"15,120.50",change:.82},{symbol:"VIX",price:"14.20",change:-2.1},{symbol:"US 10Y",price:"4.05%",change:.05},{symbol:"BTC/USD",price:"45,230",change:1.25},{symbol:"EUR/USD",price:"1.0950",change:-.15}]),t=s([{id:1,type:"warning",message:"VaR Usage reached 85%",time:"10:42 AM"},{id:2,type:"info",message:"Monte Carlo simulation completed",time:"09:15 AM"},{id:3,type:"error",message:"Data feed latency spike (fixed)",time:"08:30 AM"}]);return(a,s)=>{const l=r("router-link");return m(),d("div",Ka,[n("div",Xa,[n("div",Ja,[(m(!0),d(i,null,h(e.value,(a,s)=>(m(),d("div",{key:s,class:"ticker-item"},[n("span",Za,b(a.symbol),1),n("span",as,b(a.price),1),n("span",{class:o(["t-change",a.change>0?"text-green":"text-red"])},b(a.change>0?"▲":"▼")+" "+b(Math.abs(a.change))+"% ",3)]))),128)),(m(!0),d(i,null,h(e.value,(a,s)=>(m(),d("div",{key:"dup"+s,class:"ticker-item"},[n("span",ss,b(a.symbol),1),n("span",es,b(a.price),1),n("span",{class:o(["t-change",a.change>0?"text-green":"text-red"])},b(a.change>0?"▲":"▼")+" "+b(Math.abs(a.change))+"% ",3)]))),128))])]),s[7]||(s[7]=u('<header class="hero-section" data-v-78782bd2><div class="hero-text" data-v-78782bd2><h1 class="hero-title" data-v-78782bd2>Доброе день</h1><p class="hero-subtitle" data-v-78782bd2>Системы работают штатно.</p></div><div class="hero-status" data-v-78782bd2><div class="status-pill" data-v-78782bd2><span class="dot bg-green pulse" data-v-78782bd2></span> API активен </div><div class="status-pill" data-v-78782bd2><span class="dot bg-blue" data-v-78782bd2></span> Задержка: 12ms </div></div></header>',1)),n("div",ts,[n("section",ls,[s[4]||(s[4]=n("h3",{class:"section-label"},"Инструменты",-1)),n("div",ds,[v(l,{to:"/monte-carlo",class:"shortcut-card"},{default:p(()=>[...s[0]||(s[0]=[n("div",{class:"sc-icon-box blue"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("path",{d:"M2 12h20M2 12l5-5m-5 5l5 5M22 12l-5-5m5 5l-5 5"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Монте-Карло"),n("span",{class:"sc-desc"},"Симуляция сценариев")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1}),v(l,{to:"/stress",class:"shortcut-card"},{default:p(()=>[...s[1]||(s[1]=[n("div",{class:"sc-icon-box orange"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Стресс-тестирование"),n("span",{class:"sc-desc"},"Шоковые события")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1}),v(l,{to:"/portfolio",class:"shortcut-card"},{default:p(()=>[...s[2]||(s[2]=[n("div",{class:"sc-icon-box purple"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),n("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Портфель ценных бумаг"),n("span",{class:"sc-desc"},"Ребалансировка")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1}),v(l,{to:"/reports",class:"shortcut-card"},{default:p(()=>[...s[3]||(s[3]=[n("div",{class:"sc-icon-box gray"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n("polyline",{points:"14 2 14 8 20 8"}),n("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),n("polyline",{points:"10 9 9 9 8 9"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Отчеты"),n("span",{class:"sc-desc"},"Экспорт данных")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1})]),s[5]||(s[5]=n("h3",{class:"section-label mt-6"},"Уведомления",-1)),n("div",is,[(m(!0),d(i,null,h(t.value,a=>(m(),d("div",{class:"alert-item",key:a.id},[n("div",{class:o(["alert-icon",a.type])},"!",2),n("div",ns,[n("span",cs,b(a.message),1),n("span",os,b(a.time),1)])]))),128))])]),s[6]||(s[6]=u('<section class="grid-col-main" data-v-78782bd2><div class="card glass-panel equity-card" data-v-78782bd2><div class="equity-header" data-v-78782bd2><div data-v-78782bd2><span class="lbl" data-v-78782bd2>Капитал</span><h2 class="val-big" data-v-78782bd2>1 000 000 руб.</h2></div><div class="pnl-badge bg-green-subtle" data-v-78782bd2> +2.45% (24ч) </div></div><div class="chart-wrapper" data-v-78782bd2><svg viewBox="0 0 800 200" preserveAspectRatio="none" class="equity-svg" data-v-78782bd2><defs data-v-78782bd2><linearGradient id="eqGrad" x1="0" y1="0" x2="0" y2="1" data-v-78782bd2><stop offset="0%" stop-color="rgba(59, 130, 246, 0.3)" data-v-78782bd2></stop><stop offset="100%" stop-color="rgba(59, 130, 246, 0)" data-v-78782bd2></stop></linearGradient></defs><path d="M0,150 C150,140 300,80 450,100 S650,40 800,20 V200 H0 Z" fill="url(#eqGrad)" data-v-78782bd2></path><path d="M0,150 C150,140 300,80 450,100 S650,40 800,20" fill="none" stroke="#3b82f6" stroke-width="3" data-v-78782bd2></path></svg></div></div><div class="bottom-split" data-v-78782bd2><div class="card glass-panel" data-v-78782bd2><div class="panel-header-sm" data-v-78782bd2><h3 data-v-78782bd2>Сектора (Daily)</h3></div><div class="heatmap-grid" data-v-78782bd2><div class="hm-item bg-green-lg" data-v-78782bd2>Tech <span data-v-78782bd2>+1.2%</span></div><div class="hm-item bg-green-md" data-v-78782bd2>Fin <span data-v-78782bd2>+0.8%</span></div><div class="hm-item bg-red-md" data-v-78782bd2>Energy <span data-v-78782bd2>-0.5%</span></div><div class="hm-item bg-green-sm" data-v-78782bd2>Cons <span data-v-78782bd2>+0.2%</span></div><div class="hm-item bg-red-lg" data-v-78782bd2>Util <span data-v-78782bd2>-1.1%</span></div><div class="hm-item bg-grey" data-v-78782bd2>Real Est <span data-v-78782bd2>0.0%</span></div></div></div><div class="card glass-panel" data-v-78782bd2><div class="panel-header-sm" data-v-78782bd2><h3 data-v-78782bd2>Текущий режим рынка</h3></div><div class="risk-gauge-container" data-v-78782bd2><div class="risk-meter" data-v-78782bd2><div class="risk-needle" style="transform:rotate(45deg);" data-v-78782bd2></div><div class="risk-label" data-v-78782bd2>Высокая волатильность</div></div><div class="risk-stats" data-v-78782bd2><div class="rs-row" data-v-78782bd2><span data-v-78782bd2>VIX</span> <span class="mono" data-v-78782bd2>24.5</span></div><div class="rs-row" data-v-78782bd2><span data-v-78782bd2>Режим</span> <span class="text-orange" data-v-78782bd2>Нестабильный</span></div></div></div></div></div></section>',1))])])}}}),[["__scopeId","data-v-78782bd2"]]);V.create({baseURL:"http://localhost:8000/api",timeout:3e4,headers:{"Content-Type":"application/json"}});const rs=k("portfolio",()=>{const a=s({totalPnL:15400,var95:12500,expectedShortfall:15200,sharpeRatio:.64,maxDrawdown:-12.4,ytdReturn:8.2,lastUpdated:new Date}),e=s([{symbol:"SPY",name:"Акции (MSCI)",type:"ETF",notional:45e4,pnl:12500,pnlPct:2.5,allocation:45,targetAllocation:42,color:"#3b82f6"},{symbol:"AGG",name:"Облигации (AGG)",type:"Bond ETF",notional:35e4,pnl:8900,pnlPct:2.97,allocation:35,targetAllocation:38,color:"#10b981"},{symbol:"GLD",name:"Товары (GLD)",type:"Commodity",notional:12e4,pnl:-3200,pnlPct:-1.6,allocation:12,targetAllocation:15,color:"#f59e0b"},{symbol:"VNQ",name:"Недвижимость (VNQ)",type:"REIT",notional:8e4,pnl:1500,pnlPct:1.8,allocation:8,targetAllocation:5,color:"#ef4444"}]),t=s({targetSharpe:.714,targetVol:11.9,targetReturn:8.5,improvements:{sharpe:11.56,risk:7.03,return:3.66,costs:.5},riskFactors:{beta:.85,duration:4.2,fxRisk:-.15}}),l=y(()=>e.value.reduce((a,s)=>a+s.notional,0));return{kpis:a,positions:e,optimization:t,totalNotional:l}}),ps={class:"portfolio-page"},us={class:"hero-section"},fs={class:"hero-actions"},hs={class:"last-update"},bs={class:"kpi-grid"},gs={class:"kpi-card"},ms={class:"kpi-content"},ks={class:"kpi-sub"},ys={class:"kpi-card"},xs={class:"kpi-content"},ws={class:"kpi-value text-white"},Cs={class:"kpi-card"},Ms={class:"kpi-content"},Ps={class:"kpi-value text-gradient-blue"},Ss={class:"dashboard-grid"},_s={class:"col-main"},Vs={class:"card"},Rs={class:"card-body p-0"},Is={class:"table-container"},Ts={class:"asset-table"},Fs=["onClick"],Us={class:"asset-name-cell"},As={class:"name-wrapper"},Ls={class:"symbol"},Bs={class:"name"},Ds={class:"text-right mono"},Es={class:"text-right mono"},$s={class:"text-right mono font-bold"},Ns={class:"text-right mono text-muted"},Ys={class:"gap-cell"},qs={class:"gap-bar-wrapper"},Hs={class:"card"},Qs={class:"card-body"},Os={class:"heatmap-container"},Gs={class:"heatmap-header-row"},js={class:"heatmap-row-header"},zs={class:"card"},Ws={class:"card-body"},Ks={class:"market-map"},Xs={class:"tile-symbol"},Js={class:"tile-change"},Zs={class:"col-side"},ae={key:0,class:"card"},se={class:"card-header"},ee={class:"asset-title"},te={class:"asset-lg-symbol"},le={class:"asset-lg-name"},de={class:"card-body"},ie={class:"histogram-wrapper"},ne={class:"histogram-bars"},ce=fa(a({__name:"Portfolio",setup(a){const e=rs(),l=s(null),v=s((new Date).toLocaleTimeString());t(()=>{e.positions?.length>0&&(l.value=e.positions[0])});const r=()=>{v.value=(new Date).toLocaleTimeString()},p=[{label:"SPY",values:[1,.6,.3,-.2,.8]},{label:"TLT",values:[.6,1,.1,.4,.5]},{label:"GLD",values:[.3,.1,1,.2,.3]},{label:"DXY",values:[-.2,.4,.2,1,-.1]},{label:"QQQ",values:[.8,.5,.3,-.1,1]}],g=a=>{const s=Math.abs(a);return 1===a?"rgba(255,255,255,0.1)":a>0?`rgba(59, 130, 246, ${s})`:`rgba(239, 68, 68, ${s})`},k=()=>(3*Math.random()-1.5).toFixed(2),y=a=>a.allocation-a.targetAllocation>0?"text-green":"text-red",x=()=>{const a=Math.random()-.5,s=Math.min(1,Math.abs(a)+.2);return a>0?`rgba(16, 185, 129, ${s})`:`rgba(239, 68, 68, ${s})`},w=a=>{const s=[];!a||a.charCodeAt(0);for(let e=0;e<20;e++){let a=50*Math.exp(-Math.pow(e-10,2)/10);a+=20*Math.random()-10,s.push(Math.max(5,a))}return s};return(a,s)=>(m(),d("div",ps,[n("div",us,[s[2]||(s[2]=u('<div class="hero-left" data-v-72ef4ef1><h1 data-v-72ef4ef1>Управление портфелем ценных бумаг</h1><div class="hero-meta" data-v-72ef4ef1><span class="meta-tag" data-v-72ef4ef1>Стратегия: Глобальная мультиактивная</span><span class="meta-tag" data-v-72ef4ef1>Ребалансировка: каждый месяц</span><span class="meta-tag risk-tag" data-v-72ef4ef1>Риск-профиль: Агрессивный</span></div></div>',1)),n("div",fs,[n("div",hs,"Обновлено: "+b(v.value),1),n("button",{class:"btn btn-primary",onClick:r},[...s[0]||(s[0]=[n("svg",{width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),C(" Пересчитать ",-1)])]),s[1]||(s[1]=n("button",{class:"btn btn-outline"},[n("svg",{width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),C(" Отчет PDF ")],-1))])]),n("div",bs,[n("div",gs,[s[4]||(s[4]=n("div",{class:"kpi-header"},[n("span",{class:"kpi-label"},"Общий P&L"),n("span",{class:"kpi-trend positive"},"+12.4%")],-1)),n("div",ms,[s[3]||(s[3]=n("div",{class:"kpi-value text-gradient-green"},"452,109 руб.",-1)),n("div",ks,"Общая стоимость: "+b((R(e).totalNotional/1e6).toFixed(2))+" млн. руб.",1)])]),n("div",ys,[s[6]||(s[6]=n("div",{class:"kpi-header"},[n("span",{class:"kpi-label"},"VaR 95%"),n("span",{class:"kpi-trend negative"},"+1.2%")],-1)),n("div",xs,[n("div",ws,b((R(e).kpis.var95/1e3).toFixed(2))+"%",1),s[5]||(s[5]=n("div",{class:"kpi-sub"},"Оценка дневной волатильности",-1))])]),n("div",Cs,[s[8]||(s[8]=n("div",{class:"kpi-header"},[n("span",{class:"kpi-label"},"Эффективность")],-1)),n("div",Ms,[n("div",Ps,b(R(e).kpis.sharpeRatio.toFixed(2)),1),s[7]||(s[7]=n("div",{class:"kpi-sub"},"Коэффициент Шарпа (Rf=4.2%)",-1))])]),s[9]||(s[9]=u('<div class="kpi-card" data-v-72ef4ef1><div class="kpi-header" data-v-72ef4ef1><span class="kpi-label" data-v-72ef4ef1>Диверсификация</span></div><div class="kpi-content" data-v-72ef4ef1><div class="kpi-value text-white" data-v-72ef4ef1>0.34</div><div class="kpi-sub" data-v-72ef4ef1>Коэффициент корреляции</div></div></div>',1))]),n("div",Ss,[n("div",_s,[n("div",Vs,[s[11]||(s[11]=n("div",{class:"card-header"},[n("h3",null,"Открытые позиции"),n("div",{class:"header-controls"},[n("input",{type:"text",placeholder:"Выбрать...",class:"mini-search"})])],-1)),n("div",Rs,[n("div",Is,[n("table",Ts,[s[10]||(s[10]=n("thead",null,[n("tr",null,[n("th",null,"Тикет (ISIN)"),n("th",{class:"text-right"},"Цена"),n("th",{class:"text-right"},"Изменение"),n("th",{class:"text-right"},"Позиция по активу"),n("th",{class:"text-right"},"Вес в портфеле"),n("th",{class:"text-right"},"Целевое значение веса"),n("th",null,"Разница")])],-1)),n("tbody",null,[(m(!0),d(i,null,h(R(e).positions,a=>(m(),d("tr",{key:a.symbol,onClick:s=>(a=>l.value=a)(a),class:o({active:l.value?.symbol===a.symbol})},[n("td",null,[n("div",Us,[n("span",{class:"color-dot",style:f({background:a.color})},null,4),n("div",As,[n("span",Ls,b(a.symbol),1),n("span",Bs,b(a.name),1)])])]),n("td",Ds,"$"+b(a.price||"142.50"),1),n("td",{class:o(["text-right mono",Math.random()>.5?"text-green":"text-red"])},b(k())+"% ",3),n("td",Es,"$"+b((a.notional/1e3).toFixed(1))+"k",1),n("td",$s,b(a.allocation)+"%",1),n("td",Ns,b(a.targetAllocation)+"%",1),n("td",Ys,[n("div",qs,[n("div",{class:o(["gap-val",y(a)])},b((a.allocation-a.targetAllocation).toFixed(1))+"%",3)])])],10,Fs))),128))])])])])]),n("div",Hs,[s[13]||(s[13]=n("div",{class:"card-header"},[n("h3",null,"Матрица Корреляций")],-1)),n("div",Qs,[n("div",Os,[n("div",Gs,[s[12]||(s[12]=n("div",{class:"heatmap-empty-cell"},null,-1)),(m(),d(i,null,h(p,a=>n("div",{key:a.label,class:"heatmap-col-header"},b(a.label),1)),64))]),(m(),d(i,null,h(p,(a,s)=>n("div",{class:"heatmap-row",key:s},[n("div",js,b(a.label),1),(m(!0),d(i,null,h(a.values,(a,s)=>(m(),d("div",{class:"heatmap-cell",key:s,style:f({backgroundColor:g(a)})},b(a.toFixed(2)),5))),128))])),64))])])]),n("div",zs,[s[14]||(s[14]=n("div",{class:"card-header"},[n("h3",null,"Тепловая карта портфеля")],-1)),n("div",Ws,[n("div",Ks,[(m(!0),d(i,null,h(R(e).positions,a=>(m(),d("div",{key:a.symbol,class:"map-tile",style:f({flexGrow:a.allocation,backgroundColor:x()})},[n("span",Xs,b(a.symbol),1),n("span",Js,b(k())+"%",1)],4))),128))])])])]),n("aside",Zs,[l.value?(m(),d("div",ae,[n("div",se,[n("div",ee,[n("span",te,b(l.value.symbol),1),n("span",le,b(l.value.name),1)]),s[15]||(s[15]=n("div",{class:"badge-pill"},"Акции",-1))]),n("div",de,[s[16]||(s[16]=u('<div class="chart-controls" data-v-72ef4ef1><button class="pill-btn active" data-v-72ef4ef1>Доходности</button><button class="pill-btn" data-v-72ef4ef1>Просадка</button><div class="spacer" data-v-72ef4ef1></div><select class="mini-select" data-v-72ef4ef1><option data-v-72ef4ef1>1W</option><option data-v-72ef4ef1>2W</option><option data-v-72ef4ef1>1M</option><option selected data-v-72ef4ef1>3M</option><option data-v-72ef4ef1>6M</option><option data-v-72ef4ef1>1Y</option><option data-v-72ef4ef1>2Y</option><option data-v-72ef4ef1>5Y</option></select></div>',1)),n("div",ie,[n("div",ne,[(m(!0),d(i,null,h(w(l.value.symbol),(a,s)=>(m(),d("div",{key:s,class:"hist-bar",style:f({height:a+"%",background:l.value.color})},null,4))),128))])]),s[17]||(s[17]=u('<div class="metrics-grid-sm" data-v-72ef4ef1><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Годовая доходность</label><span class="text-green" data-v-72ef4ef1>+14.2%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Волатильность</label><span data-v-72ef4ef1>18.5%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Бэта (β)</label><span data-v-72ef4ef1>1.12</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Максимальная просадка</label><span class="text-red" data-v-72ef4ef1>-12.4%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>VaR (99%)</label><span data-v-72ef4ef1>-2.8%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Эксцесс</label><span data-v-72ef4ef1>3.4</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Асимметрия</label><span data-v-72ef4ef1>5.2</span></div></div><div class="divider" data-v-72ef4ef1></div><div class="asset-actions" data-v-72ef4ef1><button class="btn btn-outline w-full" data-v-72ef4ef1>Симуляция</button></div>',3))])])):c("",!0),s[18]||(s[18]=u('<div class="card" data-v-72ef4ef1><div class="card-header" data-v-72ef4ef1><h3 data-v-72ef4ef1>Оптимизация портфеля</h3><button class="icon-btn-sm" title="Reset" data-v-72ef4ef1>↺</button></div><div class="card-body" data-v-72ef4ef1><div class="settings-form" data-v-72ef4ef1><div class="form-group" data-v-72ef4ef1><label class="form-label" data-v-72ef4ef1>Модель Оптимизации</label><div class="select-wrapper" data-v-72ef4ef1><select class="form-control" data-v-72ef4ef1><option data-v-72ef4ef1>Mean-Variance (Markowitz)</option><option data-v-72ef4ef1>Black-Litterman Model</option><option data-v-72ef4ef1>Risk Parity (ERC)</option><option data-v-72ef4ef1>Hierarchical Risk Parity</option></select><span class="select-arrow" data-v-72ef4ef1>▼</span></div></div><div class="form-group" data-v-72ef4ef1><div class="label-row" data-v-72ef4ef1><label class="form-label" data-v-72ef4ef1>Весовые Ограничения</label><span class="label-hint" data-v-72ef4ef1>Min - Max %</span></div><div class="range-inputs" data-v-72ef4ef1><div class="input-suffix" data-v-72ef4ef1><input type="number" value="0" class="input-box" data-v-72ef4ef1><span class="suffix" data-v-72ef4ef1>%</span></div><span class="separator" data-v-72ef4ef1>to</span><div class="input-suffix" data-v-72ef4ef1><input type="number" value="25" class="input-box" data-v-72ef4ef1><span class="suffix" data-v-72ef4ef1>%</span></div></div></div><div class="form-group" data-v-72ef4ef1><div class="label-row" data-v-72ef4ef1><label class="form-label" data-v-72ef4ef1>Целевая волатильность</label><span class="val-display" data-v-72ef4ef1>15%</span></div><div class="slider-container" data-v-72ef4ef1><input type="range" class="range-slider" min="5" max="30" value="15" data-v-72ef4ef1><div class="range-scale" data-v-72ef4ef1><span data-v-72ef4ef1>5%</span><span class="center-tick" data-v-72ef4ef1>15%</span><span data-v-72ef4ef1>30%</span></div></div></div><div class="form-group checkbox-group" data-v-72ef4ef1><label class="checkbox-container" data-v-72ef4ef1><input type="checkbox" checked data-v-72ef4ef1><div class="checkmark" data-v-72ef4ef1></div><span class="checkbox-label" data-v-72ef4ef1>Ребалансировать веса текущего портфеля</span></label></div><button class="btn btn-primary w-full mt-2" data-v-72ef4ef1>Запустить оптимизацию</button></div></div></div>',1))])])]))}}),[["__scopeId","data-v-72ef4ef1"]]),oe={key:0,class:"scrub-prefix"},ve={class:"scrub-value"},re={key:1,class:"scrub-suffix"},pe=fa(a({__name:"ScrubInput",props:{modelValue:{type:Number,required:!0},step:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},decimals:{type:Number,default:0},prefix:{type:String,default:""},suffix:{type:String,default:""},sensitivity:{type:Number,default:1}},emits:["update:modelValue","change"],setup(a,{emit:e}){const t=a,i=e,v=s(!1);let r=0,p=0;const u=y(()=>t.modelValue.toFixed(t.decimals)),f=a=>{v.value=!0,r=a.clientX,p=t.modelValue,document.body.style.cursor="ew-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",h),window.addEventListener("mouseup",g)},h=a=>{if(!v.value)return;const s=a.clientX-r;let e=p+s*t.sensitivity*t.step;e<t.min&&(e=t.min),e>t.max&&(e=t.max),i("update:modelValue",e),i("change",e)},g=()=>{v.value=!1,document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g)};return l(()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g)}),(s,e)=>(m(),d("div",{class:o(["scrub-container",{dragging:v.value}]),onMousedown:f},[a.prefix?(m(),d("span",oe,b(a.prefix),1)):c("",!0),n("span",ve,b(u.value),1),a.suffix?(m(),d("span",re,b(a.suffix),1)):c("",!0)],34))}}),[["__scopeId","data-v-900d5ddf"]]),ue={class:"page-container"},fe={class:"section-header"},he={class:"header-actions"},be={class:"mc-grid-layout"},ge={class:"controls-column"},me={class:"card glass-panel settings-card"},ke={class:"controls-form"},ye={class:"input-group"},xe={class:"input-group"},we={class:"input-group"},Ce={class:"row-2-col"},Me={class:"input-group"},Pe={class:"input-group"},Se=["disabled"],_e={key:0},Ve={key:1},Re={key:0,class:"card glass-panel stats-card"},Ie={class:"simple-list"},Te={class:"mono text-red"},Fe={class:"mono text-green"},Ue={class:"mono text-blue"},Ae={class:"viz-column"},Le={class:"metrics-row"},Be={class:"kpi-card-mini"},De={class:"kpi-card-mini"},Ee={class:"kpi-val text-red"},$e={class:"kpi-card-mini"},Ne={class:"kpi-val text-green"},Ye={class:"kpi-card-mini"},qe={class:"kpi-val text-blue"},He={class:"text-sm text-muted"},Qe={class:"card glass-panel chart-panel"},Oe={class:"chart-header"},Ge={key:0,class:"live-badge"},je={key:0,class:"playback-controls"},ze={key:0},We={key:1},Ke={class:"timeline-wrapper"},Xe=["max"],Je={class:"chart-container",ref:"chartContainer"},Ze={key:0,viewBox:"0 0 1000 400",preserveAspectRatio:"none",class:"main-svg"},at=["y1","y2"],st=["d"],et=["d"],tt=["d"],lt=["d"],dt=["d"],it=["x1","x2"],nt={key:1,class:"empty-chart"},ct={key:0,class:"spinner-large"},ot={key:1},vt=fa(a({__name:"MonteCarlo",setup(a){const r=ba(),p=s(!1),u=e({startPrice:100,volatility:15.5,drift:8,days:252,paths:1e3,model:"gbm"}),g=s(0),k=s(!1);let y=null;const x=s(null),w=e({paths:[],displayPaths:[],medianPath:[],q05:[],q95:[],minY:0,maxY:200}),S=()=>{F(),U(),g.value>=u.days&&(g.value=u.days)},_=async()=>{if(p.value)return;p.value=!0,x.value=null,R();const a=r.addTask(`Monte Carlo (${u.paths} paths)`,"simulation");try{let s=0;const e=setInterval(()=>{s+=10,r.updateProgress(a,s),s>=100&&(clearInterval(e),F(),U(),p.value=!1,g.value=0,V())},150)}catch(s){r.failTask(a),p.value=!1}},V=()=>{k.value?R():(g.value>=u.days&&(g.value=0),k.value=!0,T())},R=()=>{k.value=!1,y&&cancelAnimationFrame(y)},I=()=>{R(),g.value=0},T=()=>{if(!k.value)return;const a=g.value+2;a>=u.days?(g.value=u.days,R()):(g.value=a,y=requestAnimationFrame(T))},F=()=>{const{startPrice:a,volatility:s,drift:e,days:t,paths:l}=u,d=1/252,i=e/100,n=s/100,c=[];for(let u=0;u<l;u++){const s=[a];let e=a;for(let a=1;a<=t;a++){const a=A(),t=(i-.5*n*n)*d,l=n*Math.sqrt(d)*a;e*=Math.exp(t+l),s.push(e)}c.push(s)}const o=t+1,v=[],r=[],p=[];let f=a,h=a;for(let u=0;u<o;u++){const a=c.map(a=>a[u]).sort((a,s)=>a-s),s=a[Math.floor(.5*l)],e=a[Math.floor(.05*l)],t=a[Math.floor(.95*l)];v.push(s),r.push(e),p.push(t),e<f&&(f=e),t>h&&(h=t)}w.paths=c,w.displayPaths=c.slice(0,50),w.medianPath=v,w.q05=r,w.q95=p,w.minY=.9*f,w.maxY=1.1*h,k.value||(g.value=t)},U=()=>{const a=w.paths.map(a=>a[a.length-1]);a.sort((a,s)=>a-s);const s=a.length,e=a.reduce((a,s)=>a+s,0)/s,t=a[Math.floor(.05*s)],l=a.filter(a=>a>u.startPrice).length;x.value={mean:e,min:a[0],max:a[s-1],median:a[Math.floor(.5*s)],var95:t,meanChange:((e-u.startPrice)/u.startPrice*100).toFixed(2),realizedVol:u.volatility,winProb:(l/s*100).toFixed(1)}},A=()=>{let a=0,s=0;for(;0===a;)a=Math.random();for(;0===s;)s=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*s)},L=a=>a/u.days*1e3,B=a=>{const s=w.maxY-w.minY;return 400-400*((a-w.minY)/s)},D=(a,s)=>{if(!a.length)return"";return"M "+a.slice(0,s+1).map((a,s)=>`${L(s).toFixed(1)},${B(a).toFixed(1)}`).join(" L ")},E=(a,s,e)=>{if(!a.length)return"";const t=a.slice(0,e+1),l=s.slice(0,e+1);let d="M "+t.map((a,s)=>`${L(s).toFixed(1)},${B(a).toFixed(1)}`).join(" L ");for(let i=l.length-1;i>=0;i--)d+=` L ${L(i).toFixed(1)},${B(l[i]).toFixed(1)}`;return d+=" Z",d},$=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a);return l(()=>{y&&cancelAnimationFrame(y)}),t(()=>{}),(a,s)=>{return m(),d("div",ue,[n("div",fe,[s[6]||(s[6]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Симуляция траекторий методом Монте-Карло"),n("p",{class:"section-subtitle"},"Генерация стохастических сценариев и оценка хвостовых рисков")],-1)),n("div",he,[n("span",{class:o(["status-badge",p.value?"pulse":""])},[n("span",{class:o(["dot",p.value?"bg-orange":"bg-green"])},null,2),C(" "+b(p.value?"Вычисление...":"Готов к запуску"),1)],2)])]),n("div",be,[n("aside",ge,[n("div",me,[s[13]||(s[13]=n("div",{class:"panel-header-sm"},[n("h3",null,"Параметры модели")],-1)),n("div",ke,[n("div",ye,[s[7]||(s[7]=n("label",{class:"lbl"},"Начальная цена (S₀)",-1)),v(pe,{modelValue:u.startPrice,"onUpdate:modelValue":s[0]||(s[0]=a=>u.startPrice=a),step:1,min:1,max:5e3,prefix:"$",onChange:S},null,8,["modelValue"])]),n("div",xe,[s[8]||(s[8]=n("label",{class:"lbl"},"Волатильность (σ)",-1)),v(pe,{modelValue:u.volatility,"onUpdate:modelValue":s[1]||(s[1]=a=>u.volatility=a),step:.5,min:1,max:200,decimals:1,suffix:"%",onChange:S},null,8,["modelValue"])]),n("div",we,[s[9]||(s[9]=n("label",{class:"lbl"},"Ожидаемая доходность (μ)",-1)),v(pe,{modelValue:u.drift,"onUpdate:modelValue":s[2]||(s[2]=a=>u.drift=a),step:.5,min:-50,max:100,decimals:1,suffix:"%",onChange:S},null,8,["modelValue"])]),s[12]||(s[12]=n("div",{class:"divider"},null,-1)),n("div",Ce,[n("div",Me,[s[10]||(s[10]=n("label",{class:"lbl"},"Горизонт (T)",-1)),M(n("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>u.days=a),type:"number",class:"glass-input",placeholder:"252"},null,512),[[P,u.days,void 0,{number:!0}]])]),n("div",Pe,[s[11]||(s[11]=n("label",{class:"lbl"},"Количество путей (N)",-1)),M(n("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>u.paths=a),type:"number",step:"1000",class:"glass-input"},null,512),[[P,u.paths,void 0,{number:!0}]])])]),n("button",{onClick:_,disabled:p.value,class:"btn btn-primary-gradient btn-full-width"},[p.value?(m(),d("span",Ve,"Расчет...")):(m(),d("span",_e,"Запустить симуляцию"))],8,Se)])]),x.value?(m(),d("div",Re,[s[17]||(s[17]=n("div",{class:"panel-header-sm"},[n("h3",null,"Статистика прогона")],-1)),n("ul",Ie,[n("li",null,[s[14]||(s[14]=n("span",null,"Мин. значение",-1)),n("span",Te,b($(x.value.min)),1)]),n("li",null,[s[15]||(s[15]=n("span",null,"Макс. значение",-1)),n("span",Fe,b($(x.value.max)),1)]),n("li",null,[s[16]||(s[16]=n("span",null,"Медиана",-1)),n("span",Ue,b($(x.value.median)),1)])])])):c("",!0)]),n("main",Ae,[n("div",Le,[n("div",Be,[s[18]||(s[18]=n("span",{class:"kpi-lbl"},"Математическое ожидание (E)",-1)),n("span",{class:o(["kpi-val",(e=x.value?.meanChange,("string"==typeof e?parseFloat(e):e)>0?"text-green":"text-red")])},b(x.value?$(x.value.mean):"—"),3)]),n("div",De,[s[19]||(s[19]=n("span",{class:"kpi-lbl"},"VaR (95%)",-1)),n("span",Ee,b(x.value?$(x.value.var95):"—"),1)]),n("div",$e,[s[20]||(s[20]=n("span",{class:"kpi-lbl"},"Вероятность роста",-1)),n("span",Ne,b(x.value?x.value.winProb+"%":"—"),1)]),n("div",Ye,[s[21]||(s[21]=n("span",{class:"kpi-lbl"},"Текущий день симуляции",-1)),n("span",qe,[C(b(g.value)+" ",1),n("span",He,"/ "+b(u.days),1)])])]),n("div",Qe,[n("div",Oe,[n("h3",null,[s[22]||(s[22]=C(" Траектории симуляции ",-1)),k.value?(m(),d("span",Ge,"● LIVE PLAYBACK")):c("",!0)]),w.paths.length?(m(),d("div",je,[n("button",{class:"icon-btn",onClick:V,title:"Play/Pause"},[k.value?(m(),d("span",ze,"⏸")):(m(),d("span",We,"▶"))]),n("div",Ke,[M(n("input",{type:"range",min:"0",max:u.days,"onUpdate:modelValue":s[5]||(s[5]=a=>g.value=a),onInput:R,class:"timeline-slider"},null,40,Xe),[[P,g.value,void 0,{number:!0}]]),n("div",{class:"timeline-track",style:f({width:g.value/u.days*100+"%"})},null,4)]),n("button",{class:"icon-btn",onClick:I,title:"Reset"},"↺")])):c("",!0)]),n("div",Je,[w.paths.length>0?(m(),d("svg",Ze,[s[23]||(s[23]=n("line",{x1:"0",y1:"350",x2:"1000",y2:"350",stroke:"rgba(255,255,255,0.05)"},null,-1)),s[24]||(s[24]=n("line",{x1:"0",y1:"200",x2:"1000",y2:"200",stroke:"rgba(255,255,255,0.05)"},null,-1)),s[25]||(s[25]=n("line",{x1:"0",y1:"50",x2:"1000",y2:"50",stroke:"rgba(255,255,255,0.05)"},null,-1)),n("line",{x1:"0",y1:B(u.startPrice),x2:"1000",y2:B(u.startPrice),stroke:"rgba(255,255,255,0.3)","stroke-dasharray":"4"},null,8,at),(m(!0),d(i,null,h(w.displayPaths,(a,s)=>(m(),d("path",{key:`path-${s}`,d:D(a,g.value),fill:"none",stroke:"rgba(59, 130, 246, 0.15)","stroke-width":"1"},null,8,st))),128)),n("path",{d:E(w.q05,w.q95,g.value),fill:"rgba(59, 130, 246, 0.1)",stroke:"none"},null,8,et),n("path",{d:D(w.medianPath,g.value),fill:"none",stroke:"#3b82f6","stroke-width":"3"},null,8,tt),n("path",{d:D(w.q05,g.value),fill:"none",stroke:"#f87171","stroke-width":"1.5","stroke-dasharray":"4"},null,8,lt),n("path",{d:D(w.q95,g.value),fill:"none",stroke:"#34d399","stroke-width":"1.5","stroke-dasharray":"4"},null,8,dt),g.value>0?(m(),d("line",{key:0,x1:L(g.value),y1:"0",x2:L(g.value),y2:"400",stroke:"rgba(255,255,255,0.4)","stroke-dasharray":"2"},null,8,it)):c("",!0)])):(m(),d("div",nt,[p.value?(m(),d("div",ct)):(m(),d("span",ot,"Запустите симуляцию для отображения графиков"))]))],512)])])])]);var e}}}),[["__scopeId","data-v-866551bd"]]),rt={class:"page-container"},pt={class:"section-header"},ut={class:"header-actions"},ft={class:"glass-panel-mini"},ht={class:"last-update"},bt=["disabled"],gt={key:0,width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mt={key:1,class:"spinner-mini"},kt={class:"kpi-cards-grid"},yt={class:"kpi-card"},xt={class:"kpi-label"},wt={class:"kpi-value text-red"},Ct={class:"kpi-sub"},Mt={class:"text-white font-bold"},Pt={class:"kpi-card"},St={class:"kpi-value text-orange"},_t={class:"dashboard-grid"},Vt={class:"col-left"},Rt={class:"card glass-panel"},It={class:"risk-table-wrapper"},Tt={class:"simple-table"},Ft={class:"pl-0"},Ut={class:"asset-row"},At={class:"sym"},Lt={class:"text-right mono"},Bt={class:"text-right mono text-red"},Dt={class:"text-right pr-0"},Et={class:"bar-cell"},$t={class:"progress-bar"},Nt={class:"mono bar-val"},Yt={class:"card glass-panel"},qt={class:"panel-header"},Ht=["disabled"],Qt={class:"stress-list"},Ot={class:"stress-info"},Gt={class:"stress-name"},jt={class:"stress-desc"},zt={class:"stress-result"},Wt={class:"card glass-panel"},Kt={class:"correlation-matrix-grid"},Xt={class:"matrix-cell header"},Jt={class:"col-right"},Zt={class:"card glass-panel"},al={class:"factor-list"},sl={class:"lbl-group"},el={class:"lbl"},tl={class:"sub-lbl"},ll={class:"val-group"},dl=fa(a({__name:"GreekParameters",setup(a){const e=ba(),t=s("1d"),l=s(!1),c=s(!1),r=s((new Date).toLocaleTimeString()),p=s(99),g=y(()=>(1.645+(p.value-95)/4*.685)/2.33*-67500),k=s([{symbol:"SPY",weight:40,contribution:27e3,percentRisk:45,color:"#3b82f6"},{symbol:"QQQ",weight:30,contribution:21e3,percentRisk:35,color:"#8b5cf6"},{symbol:"GLD",weight:15,contribution:4500,percentRisk:7.5,color:"#fbbf24"},{symbol:"TLT",weight:15,contribution:7500,percentRisk:12.5,color:"#ef4444"}]),x=s([{id:1,name:"Финансовый Кризис 2008",description:"Повторение рыночного краха",impact:-452e3,impactPct:-.25},{id:2,name:"Скачок Инфляции",description:"Рост ставок +200 б.п.",impact:-125e3,impactPct:-.07},{id:3,name:"Падение Нефти",description:"Нефть Brent < $40",impact:-35e3,impactPct:-.02},{id:4,name:"Рост Волатильности",description:"VIX > 40",impact:-85e3,impactPct:-.045}]),w=s([{name:"Market Risk",index:"S&P 500",beta:.85},{name:"Interest Rates",index:"US 10Y Treasury",beta:-.42},{name:"Momentum",index:"MTUM ETF",beta:.25},{name:"Volatility",index:"VIX Index",beta:-.65},{name:"Commodities",index:"BCOM Index",beta:.12}]),P=s(["SPY","QQQ","TLT","GLD","BTC"]),S=s([[1,.92,-.35,.15,.45],[.92,1,-.42,.1,.55],[-.35,-.42,1,.25,-.15],[.15,.1,.25,1,.2],[.45,.55,-.15,.2,1]]),_=a=>"$"+Math.abs(a).toLocaleString("en-US",{maximumFractionDigits:0}),V=a=>{let s="rgba(255,255,255,0.02)",e="rgba(255,255,255,0.6)";if(1===a)s="rgba(255,255,255,0.1)",e="#fff";else if(a>0){s=`rgba(59, 130, 246, ${.5*a})`,e="#bfdbfe"}else if(a<0){s=`rgba(239, 68, 68, ${.5*Math.abs(a)})`,e="#fca5a5"}return{background:s,color:e}},R=async()=>{if(l.value)return;l.value=!0;const a=e.addTask("Updating Risk Metrics...","calculation");try{e.updateProgress(a,20),await new Promise(a=>setTimeout(a,600)),e.updateProgress(a,60),await new Promise(a=>setTimeout(a,400)),e.updateProgress(a,100),r.value=(new Date).toLocaleTimeString()}catch(s){e.failTask(a)}finally{l.value=!1}},T=async()=>{if(c.value)return;c.value=!0;const a=e.addTask("Running Factor Stress Tests...","simulation");try{for(let s=0;s<=100;s+=10)await new Promise(a=>setTimeout(a,150)),e.updateProgress(a,s)}catch(s){e.failTask(a)}finally{c.value=!1}};return(a,s)=>(m(),d("div",rt,[n("div",pt,[s[5]||(s[5]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Риск-метрики портфеля"),n("p",{class:"section-subtitle"},"Продвинутый анализ рисков, факторный анализ")],-1)),n("div",ut,[n("div",ft,[s[2]||(s[2]=n("span",{class:"lbl-mini"},"Уровень доверия:",-1)),v(pe,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),min:90,max:99.9,step:.1,decimals:1,suffix:"%",class:"text-accent"},null,8,["modelValue"])]),n("div",ht,"Данные на: "+b(r.value),1),M(n("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.value=a),class:"glass-select"},[...s[3]||(s[3]=[u('<option value="1d" data-v-7e21077b>Горизонт: 1 день</option><option value="10d" data-v-7e21077b>Горизонт: 10 дней</option><option value="1m" data-v-7e21077b>Горизонт: 1 месяц</option><option value="2m" data-v-7e21077b>Горизонт: 2 месяца</option><option value="6m" data-v-7e21077b>Горизонт: 6 месяцев</option><option value="1y" data-v-7e21077b>Горизонт: 1 год</option><option value="2y" data-v-7e21077b>Горизонт: 2 года</option><option value="5y" data-v-7e21077b>Горизонт: 5 лет</option>',8)])],512),[[I,t.value]]),n("button",{class:"btn btn-outline",onClick:R,disabled:l.value},[l.value?(m(),d("span",mt)):(m(),d("svg",gt,[...s[4]||(s[4]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),C(" "+b(l.value?"Расчет...":"Обновить"),1)],8,bt)])]),n("div",kt,[n("div",yt,[n("div",xt,"VaR "+b(p.value)+"% (Value at Risk)",1),n("div",wt,b(_(g.value)),1),n("div",Ct,[s[6]||(s[6]=n("span",{class:"text-muted"},"от капитала:",-1)),s[7]||(s[7]=C()),n("span",Mt,b((Math.abs(g.value)/24e5*100).toFixed(2))+"%",1)])]),n("div",Pt,[s[8]||(s[8]=n("div",{class:"kpi-label"},"Expected Shortfall (CVaR)",-1)),n("div",St,b(_(1.25*g.value)),1),s[9]||(s[9]=n("div",{class:"kpi-sub"},[n("span",{class:"text-muted"},"средний хвост")],-1))]),s[10]||(s[10]=u('<div class="kpi-card" data-v-7e21077b><div class="kpi-label" data-v-7e21077b>Бэта портфеля (β)</div><div class="kpi-value text-gradient-blue" data-v-7e21077b>0.85</div><div class="kpi-sub" data-v-7e21077b><span class="text-muted" data-v-7e21077b>vs IMOEX</span></div></div><div class="kpi-card" data-v-7e21077b><div class="kpi-label" data-v-7e21077b>Коэффициент Шарпа</div><div class="kpi-value text-gradient-green" data-v-7e21077b>1.42</div><div class="kpi-sub" data-v-7e21077b><span class="text-muted" data-v-7e21077b>Коэффициент Сортино:</span> <span class="text-white" data-v-7e21077b>2.15</span></div></div>',2))]),n("div",_t,[n("div",Vt,[n("div",Rt,[s[13]||(s[13]=n("div",{class:"panel-header"},[n("h3",null,"Декомпозиция рисков"),n("div",{class:"badge-info"},"Marginal VaR")],-1)),n("div",It,[n("table",Tt,[s[11]||(s[11]=n("colgroup",null,[n("col",{style:{width:"25%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"25%"}}),n("col",{style:{width:"30%"}})],-1)),s[12]||(s[12]=n("thead",null,[n("tr",null,[n("th",{class:"text-left pl-0"},"Актив"),n("th",{class:"text-right"},"Вес"),n("th",{class:"text-right"},"Доля риска"),n("th",{class:"text-right pr-0"},"% от Риска")])],-1)),n("tbody",null,[(m(!0),d(i,null,h(k.value,a=>(m(),d("tr",{key:a.symbol},[n("td",Ft,[n("div",Ut,[n("span",{class:"dot",style:f({background:a.color})},null,4),n("span",At,b(a.symbol),1)])]),n("td",Lt,b(a.weight)+"%",1),n("td",Bt,"$"+b((a.contribution/1e3).toFixed(1))+"k",1),n("td",Dt,[n("div",Et,[n("div",$t,[n("div",{class:"progress-fill",style:f({width:a.percentRisk+"%"})},null,4)]),n("span",Nt,b(a.percentRisk)+"%",1)])])]))),128))])])])]),n("div",Yt,[n("div",qt,[s[14]||(s[14]=n("h3",null,"Стресс-тестирование",-1)),n("button",{onClick:T,class:"btn-xs",disabled:c.value},b(c.value?"Моделирование...":"Запустить Тест"),9,Ht)]),n("div",Qt,[(m(!0),d(i,null,h(x.value,a=>(m(),d("div",{key:a.id,class:"stress-item"},[n("div",Ot,[n("span",Gt,b(a.name),1),n("span",jt,b(a.description),1)]),n("div",zt,[n("span",{class:o(["stress-val",a.impact>0?"text-green":"text-red"])},b(a.impact>0?"+":"")+b(_(a.impact)),3),n("span",{class:o(["stress-pct",a.impactPct>0?"text-green":"text-red"])},b(a.impactPct>0?"+":"")+b((100*a.impactPct).toFixed(2))+"% ",3)])]))),128))])]),n("div",Wt,[s[16]||(s[16]=n("div",{class:"panel-header"},[n("h3",null,"Матрица корреляции активов портфеля"),n("div",{class:"legend"},[n("span",{class:"dot-legend bg-blue"}),C(" Положительная "),n("span",{class:"dot-legend bg-red"}),C(" Отрицательная ")])],-1)),n("div",Kt,[s[15]||(s[15]=n("div",{class:"matrix-cell empty"},null,-1)),(m(!0),d(i,null,h(P.value,a=>(m(),d("div",{key:a,class:"matrix-cell header"},b(a),1))),128)),(m(!0),d(i,null,h(S.value,(a,s)=>(m(),d(i,{key:"row-"+s},[n("div",Xt,b(P.value[s]),1),(m(!0),d(i,null,h(a,(a,e)=>(m(),d("div",{key:s+"-"+e,class:"matrix-cell value",style:f(V(a))},b(a.toFixed(2)),5))),128))],64))),128))])])]),n("div",Jt,[n("div",Zt,[s[18]||(s[18]=n("div",{class:"panel-header"},[n("h3",null,"Факторный Анализ")],-1)),n("div",al,[(m(!0),d(i,null,h(w.value,a=>{return m(),d("div",{class:"list-row",key:a.name},[n("div",sl,[n("span",el,b(a.name),1),n("span",tl,b(a.index),1)]),n("div",ll,[n("span",{class:o(["val",(e=a.beta,Math.abs(e)>.5?"font-bold text-white":"text-muted")])},b(a.beta>0?"+":"")+b(a.beta.toFixed(2)),3),s[17]||(s[17]=n("span",{class:"diff text-muted"},"β",-1))])]);var e}),128))])]),s[19]||(s[19]=u('<div class="card glass-panel" data-v-7e21077b><div class="panel-header" data-v-7e21077b><h3 data-v-7e21077b>Анализ Просадок</h3></div><div class="metrics-kv-list" data-v-7e21077b><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Текущая просадка</span><span class="v text-red" data-v-7e21077b>-3.45%</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Макс. просадка</span><span class="v text-red font-bold" data-v-7e21077b>-12.40%</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Дней в просадке</span><span class="v" data-v-7e21077b>14 дней</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Фактор восстановления</span><span class="v text-green" data-v-7e21077b>3.2x</span></div></div></div><div class="card glass-panel" data-v-7e21077b><div class="panel-header" data-v-7e21077b><h3 data-v-7e21077b>Ликвидность</h3></div><div class="metrics-kv-list" data-v-7e21077b><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Ожидаемое время до ликвидации при VaR 95%</span><span class="v" data-v-7e21077b>1.2 дня</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Bid-Ask Spread Cost</span><span class="v text-orange" data-v-7e21077b>0.08%</span></div></div></div>',2))])])]))}}),[["__scopeId","data-v-7e21077b"]]),il={class:"page-container"},nl={class:"section-header"},cl={class:"header-right"},ol={class:"sensitivity-control glass-panel-mini"},vl=["disabled"],rl={key:0,width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pl={key:1,class:"spinner-mini"},ul={class:"scenarios-grid"},fl=["onClick"],hl={class:"sc-header"},bl={class:"sc-name"},gl={class:"sc-desc"},ml={class:"sc-footer"},kl={class:"sc-prob"},yl={key:0,class:"dashboard-grid"},xl={class:"col-left"},wl={class:"card glass-panel"},Cl={class:"panel-header"},Ml={class:"impact-metrics-grid"},Pl={class:"metric-box"},Sl={class:"val text-red"},_l={class:"metric-box"},Vl={class:"metric-box"},Rl={class:"val text-white"},Il={class:"metric-box"},Tl={class:"val text-orange"},Fl={class:"impact-bars-list"},Ul={class:"bar-label"},Al={class:"bar-track"},Ll={class:"stats-grid-row"},Bl={class:"stat-box"},Dl={class:"val-sm text-red"},El={class:"stat-box"},$l={class:"val-sm text-red"},Nl={class:"stat-box"},Yl={class:"val-sm text-orange"},ql={class:"col-right"},Hl={class:"card glass-panel sticky-panel"},Ql={class:"market-changes-list"},Ol={class:"m-key"},Gl={class:"info-block"},jl={class:"text-xs text-muted"},zl={class:"text-white"},Wl={class:"card glass-panel"},Kl={class:"table-wrapper"},Xl={class:"metrics-table"},Jl=["onClick"],Zl={class:"col-left"},ad={class:"sc-name-sm"},sd={class:"text-muted"},ed={class:"text-orange"},td=fa(a({__name:"StressTesting",setup(a){const e=ba(),t=s(!1),l=s(1),r=s([{id:1,name:"«Чёрный лебедь»",description:"Рыночный крах, подобный COVID-19",pnlImpact:-185e3,varChange:-45.5,duration:"1–3 дня",probability:.01,severity:"critical",marketChanges:{"Волатильность":"+25%","Доходность облигаций":"+150 б.п.","Корреляция":"+0.50","Спред":"+100 б.п."},assetImpact:{"Акции":-35,"Облигации":-12,"Товары":-25,"Валюта":-8}},{id:2,name:"Скачок волатильности",description:"Резкий рост ожидаемой волатильности (VIX)",pnlImpact:-67500,varChange:-18.2,duration:"1–5 дней",probability:.05,severity:"high",marketChanges:{VIX:"+20 пп","Размах торгов":"+15%","Ликвидность":"-10%"},assetImpact:{"Акции":-18,"Облигации":-5,"Опционы":-40,"Валюта":-3}},{id:3,name:"Рост ставок",description:"ЦБ неожиданно поднял ставку на 100 б.п.",pnlImpact:-45200,varChange:-12.5,duration:"1–10 дней",probability:.15,severity:"high",marketChanges:{"Ставка ЦБ":"+100 б.п.","Спреды":"+50 б.п.","Курс":"-5%"},assetImpact:{"Акции":-12,"Облигации":-22,"Недвижимость":-15,"Валюта":-6}},{id:4,name:"Коррекция рынка",description:"Умеренное снижение, обычная корректировка",pnlImpact:-12400,varChange:-5.2,duration:"5–20 дней",probability:.35,severity:"medium",marketChanges:{"Индекс":"-8%","Волатильность":"+10%","Спреды":"+20 б.п."},assetImpact:{"Акции":-8,"Облигации":2,"Товары":-5,"Валюта":-2}}]),p=s(r.value[0]),u=a=>p.value=a,g=a=>a*l.value,k=a=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(a),x=a=>(a/1e3).toFixed(0)+"k",w=a=>a.charAt(0).toUpperCase()+a.slice(1),M=y(()=>r.value.reduce((a,s)=>a+s.pnlImpact,0)/r.value.length),P=y(()=>Math.min(...r.value.map(a=>a.pnlImpact))),S=y(()=>r.value.reduce((a,s)=>a+s.pnlImpact*s.probability,0)),_=async()=>{if(t.value)return;t.value=!0;const a=e.addTask("Simulating Stress Scenarios...","simulation");try{for(let s=0;s<=100;s+=25)await new Promise(a=>setTimeout(a,300)),e.updateProgress(a,s)}catch(s){e.failTask(a)}finally{t.value=!1}};return(a,s)=>(m(),d("div",il,[n("div",nl,[s[3]||(s[3]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Стресс-тестирование"),n("p",{class:"section-subtitle"},"Сценарии экстремальных рыночных условий")],-1)),n("div",cl,[n("div",ol,[s[1]||(s[1]=n("span",{class:"lbl"},"Множитель шока:",-1)),v(pe,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=a=>l.value=a),step:.1,min:.5,max:3,decimals:1,suffix:"x",class:"text-accent"},null,8,["modelValue"])]),n("button",{onClick:_,class:"btn btn-primary-gradient",disabled:t.value},[t.value?(m(),d("span",pl)):(m(),d("svg",rl,[...s[2]||(s[2]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"},null,-1),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),C(" "+b(t.value?"Тестирую...":"Запустить все"),1)],8,vl)])]),n("div",ul,[(m(!0),d(i,null,h(r.value,a=>(m(),d("div",{key:a.id,onClick:s=>u(a),class:o(["card scenario-card",{active:p.value?.id===a.id}])},[s[4]||(s[4]=n("div",{class:"card-glow"},null,-1)),n("div",hl,[n("span",bl,b(a.name),1),n("span",{class:o(["badge",a.severity])},b(a.severity),3)]),n("p",gl,b(a.description),1),n("div",ml,[n("span",{class:o(["sc-impact",g(a.pnlImpact)<0?"text-red":"text-green"])},b(x(g(a.pnlImpact))),3),n("span",kl,"Вероятность: "+b((100*a.probability).toFixed(0))+"%",1)])],10,fl))),128))]),p.value?(m(),d("div",yl,[n("div",xl,[n("div",wl,[n("div",Cl,[n("h3",null,"Влияние сценария: "+b(p.value.name),1)]),n("div",Ml,[n("div",Pl,[s[5]||(s[5]=n("span",{class:"lbl"},"P&L Impact",-1)),n("span",Sl,b(k(g(p.value.pnlImpact))),1)]),n("div",_l,[s[6]||(s[6]=n("span",{class:"lbl"},"Изменение VaR",-1)),n("span",{class:o(["val",p.value.varChange<0?"text-red":"text-green"])},b((p.value.varChange*l.value).toFixed(1))+"% ",3)]),n("div",Vl,[s[7]||(s[7]=n("span",{class:"lbl"},"Длительность",-1)),n("span",Rl,b(p.value.duration),1)]),n("div",Il,[s[8]||(s[8]=n("span",{class:"lbl"},"Вероятность",-1)),n("span",Tl,b((100*p.value.probability).toFixed(1))+"%",1)])]),s[12]||(s[12]=n("div",{class:"divider"},null,-1)),s[13]||(s[13]=n("div",{class:"panel-header"},[n("h3",null,"Влияние на активы")],-1)),n("div",Fl,[(m(!0),d(i,null,h(p.value.assetImpact,(a,s)=>(m(),d("div",{key:s,class:"bar-row"},[n("span",Ul,b(s),1),n("div",Al,[n("div",{class:o(["bar-fill",a<0?"bg-red":"bg-green"]),style:f({width:Math.min(100,Math.abs(a*l.value*1.5))+"%"})},null,6)]),n("span",{class:o(["bar-val",a<0?"text-red":"text-green"])},b(a>0?"+":"")+b((a*l.value).toFixed(1))+"% ",3)]))),128))]),s[14]||(s[14]=n("div",{class:"divider"},null,-1)),s[15]||(s[15]=n("div",{class:"panel-header"},[n("h3",null,"Статистика риска")],-1)),n("div",Ll,[n("div",Bl,[s[9]||(s[9]=n("span",{class:"lbl-sm"},"Средний убыток",-1)),n("span",Dl,b(x(M.value*l.value)),1)]),n("div",El,[s[10]||(s[10]=n("span",{class:"lbl-sm"},"Макс. просадка",-1)),n("span",$l,b(x(P.value*l.value)),1)]),n("div",Nl,[s[11]||(s[11]=n("span",{class:"lbl-sm"},"Ожидаемый убыток",-1)),n("span",Yl,b(x(S.value*l.value)),1)])])])]),n("aside",ql,[n("div",Hl,[s[18]||(s[18]=n("div",{class:"panel-header"},[n("h3",null,"Рыночные условия")],-1)),n("div",Ql,[(m(!0),d(i,null,h(p.value.marketChanges,(a,s)=>(m(),d("div",{key:s,class:"market-row"},[n("span",Ol,b(w(s)),1),n("span",{class:o(["m-val",a.includes("-")?"text-red":"text-green"])},b(a),3)]))),128))]),s[19]||(s[19]=n("div",{class:"divider"},null,-1)),n("div",Gl,[n("p",jl,[s[16]||(s[16]=C(" Данные пересчитаны с учетом коэффициента шока: ",-1)),n("b",zl,b(l.value.toFixed(1))+"x",1),s[17]||(s[17]=C(". ",-1))])])])])])):c("",!0),n("div",Wl,[s[21]||(s[21]=n("div",{class:"panel-header"},[n("h3",null,"Сравнение сценариев")],-1)),n("div",Kl,[n("table",Xl,[s[20]||(s[20]=n("thead",null,[n("tr",null,[n("th",{class:"col-left"},"Сценарий"),n("th",null,"P&L"),n("th",null,"Изменение VaR"),n("th",null,"Длительность"),n("th",null,"Вероятность")])],-1)),n("tbody",null,[(m(!0),d(i,null,h(r.value,a=>(m(),d("tr",{key:a.id,class:o(["hover-row",{"row-active":p.value?.id===a.id}]),onClick:s=>u(a)},[n("td",Zl,[n("span",ad,b(a.name),1)]),n("td",{class:o(a.pnlImpact<0?"text-red":"text-green")},b(k(g(a.pnlImpact))),3),n("td",{class:o(a.varChange<0?"text-red":"text-green")},b((a.varChange*l.value).toFixed(1))+"% ",3),n("td",sd,b(a.duration),1),n("td",ed,b((100*a.probability).toFixed(1))+"%",1)],10,Jl))),128))])])])]),s[22]||(s[22]=n("div",{class:"footer-notes"},[n("div",{class:"note-item"},"Сценарии основаны на исторических данных"),n("div",{class:"note-item"},"Корреляции могут меняться в кризис"),n("div",{class:"note-item"},"Рекомендуется ежеквартальный пересмотр")],-1))]))}}),[["__scopeId","data-v-00c5b1a7"]]),ld={class:"page-container"},dd={class:"section-header"},id={class:"segmented-control"},nd=["onClick"],cd={class:"dashboard-grid"},od={class:"col-left"},vd={class:"card glass-panel"},rd={class:"table-wrapper"},pd={class:"heatmap-table"},ud={class:"col-month"},fd={class:"col-right"},hd={class:"card glass-panel"},bd={class:"drawdown-list"},gd={class:"dd-info"},md={class:"dd-period"},kd={class:"dd-rec"},yd={class:"dd-val text-red"},xd=fa(a({__name:"Backtesting",setup(a){const e=s(["1M","3M","6M","YTD","1Y","All"]),t=s("YTD"),l=s(["2024","2025"]),c=s(["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]),v=s([{2024:"+2.1",2025:"+1.8"},{2024:"+3.4",2025:"-1.2"},{2024:"-0.5",2025:"+2.9"},{2024:"+1.7",2025:"+0.8"},{2024:"+2.3",2025:"-0.3"},{2024:"+1.9",2025:"+1.5"},{2024:"+2.8",2025:"+2.1"},{2024:"-1.1",2025:"+0.9"},{2024:"+3.2",2025:"+1.4"},{2024:"+2.5",2025:"+3.1"},{2024:"+1.8",2025:"+2.2"},{2024:"+4.1",2025:"+2.8"}]),r=[{period:"Март 23 — Май 23",amount:-14.2,recovery:"6 мес."},{period:"Сент 23 — Окт 23",amount:-8.5,recovery:"3 мес."},{period:"Фев 24 — Март 24",amount:-5.3,recovery:"2 мес."}],p=a=>{const s=parseFloat(a);return s>3?"bg-green-strong":s>0?"bg-green":s>-2?"bg-red-soft":"bg-red-strong"};return(a,s)=>(m(),d("div",ld,[n("div",dd,[s[0]||(s[0]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Результаты бэктестинга"),n("p",{class:"section-subtitle"},"Анализ исторической производительности стратегии")],-1)),n("div",id,[(m(!0),d(i,null,h(e.value,a=>(m(),d("button",{key:a,onClick:s=>t.value=a,class:o(["seg-btn",{active:t.value===a}])},b(a),11,nd))),128))])]),s[5]||(s[5]=u('<div class="kpi-cards-grid" data-v-ff8fd6e5><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>Полная доходность</div><div class="kpi-value text-gradient-green" data-v-ff8fd6e5>+24.5%</div><div class="kpi-change text-green" data-v-ff8fd6e5>vs S&amp;P 500: +18.3%</div></div><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>CAGR (Годовая)</div><div class="kpi-value text-white" data-v-ff8fd6e5>18.2%</div><div class="kpi-change text-muted" data-v-ff8fd6e5>Безрисковая: 5.0%</div></div><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>Коэф. Шарпа</div><div class="kpi-value text-gradient-blue" data-v-ff8fd6e5>1.58</div><div class="kpi-change text-blue" data-v-ff8fd6e5>Высокая эфф.</div></div><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>Макс. Просадка</div><div class="kpi-value text-red" data-v-ff8fd6e5>-14.2%</div><div class="kpi-change text-red" data-v-ff8fd6e5>vs Рынок: -23.5%</div></div></div><div class="card glass-panel chart-panel" data-v-ff8fd6e5><div class="panel-header" data-v-ff8fd6e5><h3 data-v-ff8fd6e5>Накопленная доходность (Equity Curve)</h3><div class="chart-legend" data-v-ff8fd6e5><div class="legend-item" data-v-ff8fd6e5><span class="dot strategy" data-v-ff8fd6e5></span>Стратегия</div><div class="legend-item" data-v-ff8fd6e5><span class="dot benchmark" data-v-ff8fd6e5></span>S&amp;P 500</div></div></div><div class="chart-container" data-v-ff8fd6e5><div class="chart-mockup" data-v-ff8fd6e5><svg viewBox="0 0 1000 200" preserveAspectRatio="none" class="mock-chart" data-v-ff8fd6e5><line x1="0" y1="50" x2="1000" y2="50" stroke="rgba(255,255,255,0.05)" data-v-ff8fd6e5></line><line x1="0" y1="100" x2="1000" y2="100" stroke="rgba(255,255,255,0.05)" data-v-ff8fd6e5></line><line x1="0" y1="150" x2="1000" y2="150" stroke="rgba(255,255,255,0.05)" data-v-ff8fd6e5></line><path d="M0,200 Q100,190 200,180 T400,170 T600,140 T800,130 T1000,90" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2" stroke-dasharray="5,5" data-v-ff8fd6e5></path><defs data-v-ff8fd6e5><linearGradient id="fade" x1="0" y1="0" x2="0" y2="1" data-v-ff8fd6e5><stop offset="0%" stop-color="rgba(74, 222, 128, 0.2)" data-v-ff8fd6e5></stop><stop offset="100%" stop-color="rgba(74, 222, 128, 0)" data-v-ff8fd6e5></stop></linearGradient></defs><path d="M0,200 Q100,180 200,150 T400,160 T600,100 T800,80 T1000,20 V200 H0" fill="url(#fade)" stroke="none" data-v-ff8fd6e5></path><path d="M0,200 Q100,180 200,150 T400,160 T600,100 T800,80 T1000,20" fill="none" stroke="#4ade80" stroke-width="2" data-v-ff8fd6e5></path></svg></div></div></div>',2)),n("div",cd,[n("div",od,[n("div",vd,[s[2]||(s[2]=n("div",{class:"panel-header"},[n("h3",null,"Месячная доходность")],-1)),n("div",rd,[n("table",pd,[n("thead",null,[n("tr",null,[s[1]||(s[1]=n("th",{class:"col-month"},"Месяц",-1)),(m(!0),d(i,null,h(l.value,a=>(m(),d("th",{key:a,class:"col-year"},b(a),1))),128))])]),n("tbody",null,[(m(!0),d(i,null,h(c.value,(a,s)=>(m(),d("tr",{key:a},[n("td",ud,b(a),1),(m(!0),d(i,null,h(l.value,e=>(m(),d("td",{key:`${a}-${e}`,class:"col-val"},[n("div",{class:o(["val-pill",p(v.value[s][e])])},b(v.value[s][e])+"% ",3)]))),128))]))),128))])])])])]),n("div",fd,[s[4]||(s[4]=u('<div class="card glass-panel" data-v-ff8fd6e5><div class="panel-header" data-v-ff8fd6e5><h3 data-v-ff8fd6e5>Статистика сделок</h3></div><div class="stats-grid-mini" data-v-ff8fd6e5><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Всего сделок</span><span class="val" data-v-ff8fd6e5>243</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Win Rate</span><span class="val text-green" data-v-ff8fd6e5>64.2%</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Profit Factor</span><span class="val text-green" data-v-ff8fd6e5>2.34</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Ср. Прибыль</span><span class="val text-green" data-v-ff8fd6e5>+$245</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Ср. Убыток</span><span class="val text-red" data-v-ff8fd6e5>-$145</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Дней в поз.</span><span class="val" data-v-ff8fd6e5>8.4</span></div></div></div>',1)),n("div",hd,[s[3]||(s[3]=n("div",{class:"panel-header"},[n("h3",null,"Топ просадок")],-1)),n("div",bd,[(m(),d(i,null,h(r,(a,s)=>n("div",{key:s,class:"dd-item"},[n("div",gd,[n("span",md,b(a.period),1),n("span",kd,"Восст: "+b(a.recovery),1)]),n("span",yd,b(a.amount)+"%",1)])),64))])])])])]))}}),[["__scopeId","data-v-ff8fd6e5"]]);const wd={class:"reports-page"},Cd={class:"reports-header"},Md={class:"header-actions"},Pd={key:0},Sd={key:1},_d={class:"report-container-wrapper custom-scroll"},Vd={id:"report-content",class:"a4-sheet"},Rd={class:"rep-header"},Id={class:"rep-meta"},Td={class:"rep-date"},Fd=fa(a({__name:"Reports",setup(a){const{exportToPdf:e,isExporting:t}=function(){const a=s(!1);return{exportToPdf:async(s,e="report.pdf")=>{a.value=!0;try{const a=await q(()=>import("./pdf-CDn_A7Xt.js").then(a=>a.h),[]),t=a.default||a,l=document.getElementById(s);if(!l)throw new Error(`Element #${s} not found`);const d={margin:[10,10,10,10],filename:e,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#0f172a"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};await t().set(d).from(l).save()}catch(t){console.error("PDF Export Error:",t),alert("Ошибка экспорта PDF. Убедитесь, что html2pdf.js установлен (npm install html2pdf.js)")}finally{a.value=!1}},isExporting:a}}(),l=y(()=>(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),i=()=>{e("report-content",`QuantPro_Report_${(new Date).toISOString().slice(0,10)}.pdf`)};return(a,s)=>(m(),d("div",wd,[n("div",Cd,[s[1]||(s[1]=n("div",{class:"header-left"},[n("h1",{class:"page-title"},"Аналитические отчеты"),n("p",{class:"page-subtitle"},"Ежедневная сводка основных изменений")],-1)),n("div",Md,[n("button",{class:"btn-action",onClick:i},[R(t)?(m(),d("span",Pd,"Генерация отчета...")):(m(),d("span",Sd,"Скачать в формате PDF")),s[0]||(s[0]=n("span",{class:"icon"},"⬇",-1))])])]),n("div",_d,[n("div",Vd,[n("div",Rd,[s[2]||(s[2]=n("div",{class:"rep-logo"},"ОАФИиОСС",-1)),n("div",Id,[n("div",Td,b(l.value),1)])]),s[3]||(s[3]=u('<div class="rep-divider" data-v-95e03e11></div><h2 class="rep-main-title" data-v-95e03e11>Ежедневная оценка рисков</h2><section class="rep-section" data-v-95e03e11><h3 class="sec-title" data-v-95e03e11>1. Краткое резюме</h3><p class="sec-text" data-v-95e03e11> Портфель демонстрирует умеренную волатильность в текущем рыночном режиме. Показатель <strong data-v-95e03e11>Value-at-Risk (95%)</strong> остается в пределах установленных лимитов (-2.4%). Наблюдается slight negative skewness в распределении доходностей, что указывает на повышенный риск хвостовых событий. </p></section><section class="rep-section" data-v-95e03e11><h3 class="sec-title" data-v-95e03e11>2. Ключевые метрики</h3><div class="metrics-grid" data-v-95e03e11><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>Общий P&amp;L (YTD)</span><span class="m-value positive" data-v-95e03e11>+12.5%</span></div><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>Коэффициент Шарпа</span><span class="m-value" data-v-95e03e11>1.84</span></div><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>VaR (95%, 1d)</span><span class="m-value warning" data-v-95e03e11>-2.1%</span></div><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>Beta (β)</span><span class="m-value" data-v-95e03e11>0.85</span></div></div></section><section class="rep-section" data-v-95e03e11><h3 class="sec-title" data-v-95e03e11>3. Анализ подверженности риску</h3><div class="chart-placeholder" data-v-95e03e11><div class="fake-chart-bars" data-v-95e03e11><div class="bar" style="height:40%;" data-v-95e03e11></div><div class="bar" style="height:70%;" data-v-95e03e11></div><div class="bar" style="height:50%;" data-v-95e03e11></div><div class="bar" style="height:85%;" data-v-95e03e11></div><div class="bar" style="height:60%;" data-v-95e03e11></div><div class="bar" style="height:90%;" data-v-95e03e11></div></div><div class="chart-label" data-v-95e03e11>Отраслевая структура портфеля</div></div></section><div class="rep-footer" data-v-95e03e11><div class="footer-line" data-v-95e03e11></div><div class="footer-info" data-v-95e03e11><span data-v-95e03e11>Конфиденциально</span></div></div>',6))])])]))}}),[["__scopeId","data-v-95e03e11"]]),Ud={class:"page-container"},Ad={class:"section-header"},Ld=["disabled"],Bd={key:0},Dd={key:1},Ed={class:"settings-layout"},$d={class:"settings-sidebar"},Nd={class:"sidebar-menu glass-panel"},Yd=["onClick"],qd={class:"menu-label"},Hd={key:0,class:"badge-dot"},Qd={class:"settings-content"},Od={class:"settings-view"},Gd={class:"settings-block glass-panel"},jd={class:"control-group"},zd={class:"control-row"},Wd={class:"segmented-control"},Kd={class:"control-row"},Xd={class:"control-right"},Jd={class:"control-row"},Zd={class:"control-right"},ai={class:"settings-view"},si={class:"settings-block glass-panel"},ei={class:"control-group"},ti={class:"control-row"},li={class:"control-right"},di={class:"control-row"},ii={class:"control-right"},ni={class:"control-row"},ci={class:"control-right"},oi={class:"control-group"},vi={class:"control-row"},ri={class:"switch"},pi={class:"control-row"},ui={class:"switch"},fi={class:"settings-view"},hi={class:"settings-block glass-panel"},bi={class:"control-group risk-limits"},gi={class:"control-row"},mi={class:"input-wrapper"},ki={class:"control-row"},yi={class:"input-wrapper"},xi={class:"control-row"},wi={class:"input-wrapper"},Ci={class:"control-group"},Mi={class:"control-row"},Pi={class:"switch"},Si={class:"settings-view"},_i={class:"settings-block glass-panel"},Vi={class:"control-group api-group"},Ri={class:"control-row vertical"},Ii={class:"control-row vertical"},Ti={class:"status-footer"},Fi={class:"settings-block glass-panel"},Ui={class:"control-group api-group"},Ai={class:"control-row vertical"},Li={class:"control-row vertical"},Bi={class:"status-footer"},Di={class:"settings-block glass-panel"},Ei={class:"control-group"},$i={class:"control-row vertical"},Ni={class:"control-row vertical"},Yi={class:"settings-block glass-panel mt-4"},qi={class:"services-list"},Hi={class:"srv-left"},Qi={class:"srv-name"},Oi=fa(a({__name:"Settings",setup(a){const t=s("general"),l=s(!0),v=s(!1),r=[{id:"general",name:"Общие"},{id:"models",name:"Модели"},{id:"risk",name:"Риск-менеджмент"},{id:"api",name:"API и Данные"}],p=e({cbonds:{status:"idle"},rudata:{status:"idle"}}),f=e({general:{theme:"dark",language:"ru",currency:"RUB"},models:{portfolioModel:"markowitz",varModel:"parametric",varConfidence:"0.95",useRollingWindow:!0,exponentialWeighting:!1},risk:{maxVaR:5,maxConcentration:25,minSharpeRatio:1.2,enableStressTesting:!0},api:{cbondsLogin:"",cbondsPassword:"",rudataLogin:"",rudataPassword:"",bloombergKey:"",webhookUrl:""},connectedServices:[{id:1,name:"Cbonds",connected:!1},{id:2,name:"RuData",connected:!1},{id:3,name:"Bloomberg",connected:!1},{id:4,name:"MOEX",connected:!1}]}),g=a=>{const s=p[a].status;return"checking"===s?{text:"Проверка...",class:"text-blue"}:"success"===s?{text:"Подключено успешно",class:"text-green"}:"error"===s?{text:"Ошибка авторизации",class:"text-red"}:{text:"Не проверено",class:"text-muted"}},k=a=>{p[a].status="checking",setTimeout(()=>{if(f.api[`${a}Login`]&&f.api[`${a}Password`]){p[a].status="success";const s=f.connectedServices.find(s=>s.name.toLowerCase().includes(a));s&&(s.connected=!0)}else p[a].status="error"},1200)},y=()=>{l.value=!1,setTimeout(()=>l.value=!0,2e3)};return T(f,()=>{l.value=!0},{deep:!0}),(a,s)=>(m(),d("div",Ud,[n("div",Ad,[s[22]||(s[22]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Настройки"),n("p",{class:"section-subtitle"},"Настройки моделей и интерфейса")],-1)),n("button",{onClick:y,class:o(["btn btn-save",{"has-changes":l.value}]),disabled:!l.value},[l.value?(m(),d("span",Bd,"Сохранить изменения")):(m(),d("span",Dd,"Сохранено"))],10,Ld)]),n("div",Ed,[n("div",$d,[n("div",Nd,[(m(),d(i,null,h(r,a=>n("button",{key:a.id,onClick:s=>t.value=a.id,class:o(["menu-item",{active:t.value===a.id}])},[n("span",qd,b(a.name),1),"api"===a.id&&v.value?(m(),d("span",Hd)):c("",!0)],10,Yd)),64))])]),n("div",Qd,[M(n("div",Od,[n("div",Gd,[s[30]||(s[30]=n("h3",{class:"block-title"},"Интерфейс",-1)),n("div",jd,[n("div",zd,[s[23]||(s[23]=n("label",null,"Тема оформления",-1)),n("div",Wd,[n("button",{class:o({active:"dark"===f.general.theme}),onClick:s[0]||(s[0]=a=>f.general.theme="dark")},"Тёмная тема",2),n("button",{class:o({active:"light"===f.general.theme}),onClick:s[1]||(s[1]=a=>f.general.theme="light")},"Светлая тема",2),n("button",{class:o({active:"auto"===f.general.theme}),onClick:s[2]||(s[2]=a=>f.general.theme="auto")},"Как в системе",2)])]),s[28]||(s[28]=n("div",{class:"divider"},null,-1)),n("div",Kd,[s[25]||(s[25]=n("label",null,"Язык",-1)),n("div",Xd,[M(n("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>f.general.language=a),class:"glass-select"},[...s[24]||(s[24]=[u('<option value="ru" data-v-54d774f5>Русский</option><option value="en" data-v-54d774f5>English</option><option value="de" data-v-54d774f5>Deutsch</option><option value="ch" data-v-54d774f5>中國人</option><option value="ja" data-v-54d774f5>日本語</option><option value="qa" data-v-54d774f5>Қазақ</option>',6)])],512),[[I,f.general.language]])])]),s[29]||(s[29]=n("div",{class:"divider"},null,-1)),n("div",Jd,[s[27]||(s[27]=n("label",null,"Валюта портфеля",-1)),n("div",Zd,[M(n("select",{"onUpdate:modelValue":s[4]||(s[4]=a=>f.general.currency=a),class:"glass-select"},[...s[26]||(s[26]=[u('<option value="RUB" data-v-54d774f5>RUB</option><option value="USD" data-v-54d774f5>USD</option><option value="EUR" data-v-54d774f5>EUR</option><option value="CNY" data-v-54d774f5>CNY</option><option value="CHF" data-v-54d774f5>CHF</option><option value="GBP" data-v-54d774f5>GBP</option><option value="JPY" data-v-54d774f5>JPY</option><option value="AED" data-v-54d774f5>AED</option><option value="QAR" data-v-54d774f5>QAR</option><option value="HKD" data-v-54d774f5>HKD</option>',10)])],512),[[I,f.general.currency]])])])])])],512),[[F,"general"===t.value]]),M(n("div",ai,[n("div",si,[s[44]||(s[44]=n("h3",{class:"block-title"},"Оптимизация и VaR",-1)),n("div",ei,[n("div",ti,[s[32]||(s[32]=n("div",{class:"label-group"},[n("label",null,"Модель оптимизации"),n("span",{class:"sub-label"},"Метод расчета весов")],-1)),n("div",li,[M(n("select",{"onUpdate:modelValue":s[5]||(s[5]=a=>f.models.portfolioModel=a),class:"glass-select"},[...s[31]||(s[31]=[n("option",{value:"markowitz"},"Markowitz (Mean-Variance)",-1),n("option",{value:"black-litterman"},"Black-Litterman",-1),n("option",{value:"risk-parity"},"Risk Parity",-1),n("option",{value:"hrp"},"HRP (Hierarchical)",-1)])],512),[[I,f.models.portfolioModel]])])]),s[37]||(s[37]=n("div",{class:"divider"},null,-1)),n("div",di,[s[34]||(s[34]=n("div",{class:"label-group"},[n("label",null,"Модель VaR"),n("span",{class:"sub-label"},"Оценка хвостового риска")],-1)),n("div",ii,[M(n("select",{"onUpdate:modelValue":s[6]||(s[6]=a=>f.models.varModel=a),class:"glass-select"},[...s[33]||(s[33]=[n("option",{value:"historical"},"Историческая",-1),n("option",{value:"parametric"},"Параметрическая",-1),n("option",{value:"cornish"},"Cornish-Fisher",-1),n("option",{value:"gpd"},"EVT (GPD)",-1)])],512),[[I,f.models.varModel]])])]),s[38]||(s[38]=n("div",{class:"divider"},null,-1)),n("div",ni,[s[36]||(s[36]=n("label",null,"Confidence Level",-1)),n("div",ci,[M(n("select",{"onUpdate:modelValue":s[7]||(s[7]=a=>f.models.varConfidence=a),class:"glass-select"},[...s[35]||(s[35]=[n("option",{value:"0.90"},"90%",-1),n("option",{value:"0.95"},"95%",-1),n("option",{value:"0.99"},"99%",-1)])],512),[[I,f.models.varConfidence]])])])]),s[45]||(s[45]=n("h3",{class:"block-title mt-4"},"Параметры данных",-1)),n("div",oi,[n("div",vi,[s[40]||(s[40]=n("label",null,"Скользящее окно (Rolling Window)",-1)),n("label",ri,[M(n("input",{type:"checkbox","onUpdate:modelValue":s[8]||(s[8]=a=>f.models.useRollingWindow=a)},null,512),[[U,f.models.useRollingWindow]]),s[39]||(s[39]=n("span",{class:"slider"},null,-1))])]),s[43]||(s[43]=n("div",{class:"divider"},null,-1)),n("div",pi,[s[42]||(s[42]=n("label",null,"Экспоненциальное взвешивание (EWMA)",-1)),n("label",ui,[M(n("input",{type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=a=>f.models.exponentialWeighting=a)},null,512),[[U,f.models.exponentialWeighting]]),s[41]||(s[41]=n("span",{class:"slider"},null,-1))])])])])],512),[[F,"models"===t.value]]),M(n("div",fi,[n("div",hi,[s[55]||(s[55]=n("h3",{class:"block-title"},"Лимиты",-1)),n("div",bi,[n("div",gi,[s[47]||(s[47]=n("label",null,"Макс. VaR портфеля",-1)),n("div",mi,[M(n("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=a=>f.risk.maxVaR=a),class:"glass-input"},null,512),[[P,f.risk.maxVaR,void 0,{number:!0}]]),s[46]||(s[46]=n("span",{class:"unit"},"%",-1))])]),s[51]||(s[51]=n("div",{class:"divider"},null,-1)),n("div",ki,[s[49]||(s[49]=n("label",null,"Макс. концентрация (1 актив)",-1)),n("div",yi,[M(n("input",{type:"number","onUpdate:modelValue":s[11]||(s[11]=a=>f.risk.maxConcentration=a),class:"glass-input"},null,512),[[P,f.risk.maxConcentration,void 0,{number:!0}]]),s[48]||(s[48]=n("span",{class:"unit"},"%",-1))])]),s[52]||(s[52]=n("div",{class:"divider"},null,-1)),n("div",xi,[s[50]||(s[50]=n("label",null,"Мин. коэффициент Шарпа",-1)),n("div",wi,[M(n("input",{type:"number","onUpdate:modelValue":s[12]||(s[12]=a=>f.risk.minSharpeRatio=a),class:"glass-input",step:"0.1"},null,512),[[P,f.risk.minSharpeRatio,void 0,{number:!0}]])])])]),s[56]||(s[56]=n("h3",{class:"block-title mt-4"},"Автоматизация",-1)),n("div",Ci,[n("div",Mi,[s[54]||(s[54]=n("label",null,"Стресс-тестирование",-1)),n("label",Pi,[M(n("input",{type:"checkbox","onUpdate:modelValue":s[13]||(s[13]=a=>f.risk.enableStressTesting=a)},null,512),[[U,f.risk.enableStressTesting]]),s[53]||(s[53]=n("span",{class:"slider"},null,-1))])])])])],512),[[F,"risk"===t.value]]),M(n("div",Si,[n("div",_i,[s[60]||(s[60]=n("h3",{class:"block-title"},"Cbonds API",-1)),n("div",Vi,[n("div",Ri,[s[57]||(s[57]=n("label",null,"Логин",-1)),M(n("input",{type:"text","onUpdate:modelValue":s[14]||(s[14]=a=>f.api.cbondsLogin=a),class:"glass-input full",placeholder:"username@company.com"},null,512),[[P,f.api.cbondsLogin]])]),s[59]||(s[59]=n("div",{class:"divider"},null,-1)),n("div",Ii,[s[58]||(s[58]=n("label",null,"Пароль",-1)),M(n("input",{type:"password","onUpdate:modelValue":s[15]||(s[15]=a=>f.api.cbondsPassword=a),class:"glass-input full",placeholder:"••••••••"},null,512),[[P,f.api.cbondsPassword]])])]),n("div",Ti,[n("button",{class:"btn-xs",onClick:s[16]||(s[16]=a=>k("cbonds"))},"Проверить подключение"),n("span",{class:o(["status-text",g("cbonds").class])},b(g("cbonds").text),3)])]),n("div",Fi,[s[64]||(s[64]=n("h3",{class:"block-title"},"RuData / Interfax",-1)),n("div",Ui,[n("div",Ai,[s[61]||(s[61]=n("label",null,"Логин",-1)),M(n("input",{type:"text","onUpdate:modelValue":s[17]||(s[17]=a=>f.api.rudataLogin=a),class:"glass-input full",placeholder:"login"},null,512),[[P,f.api.rudataLogin]])]),s[63]||(s[63]=n("div",{class:"divider"},null,-1)),n("div",Li,[s[62]||(s[62]=n("label",null,"Пароль",-1)),M(n("input",{type:"password","onUpdate:modelValue":s[18]||(s[18]=a=>f.api.rudataPassword=a),class:"glass-input full",placeholder:"••••••••"},null,512),[[P,f.api.rudataPassword]])])]),n("div",Bi,[n("button",{class:"btn-xs",onClick:s[19]||(s[19]=a=>k("rudata"))},"Проверить подключение"),n("span",{class:o(["status-text",g("rudata").class])},b(g("rudata").text),3)])]),n("div",Di,[s[68]||(s[68]=n("h3",{class:"block-title"},"Глобальные Провайдеры",-1)),n("div",Ei,[n("div",$i,[s[65]||(s[65]=n("label",null,"Bloomberg API Key",-1)),M(n("input",{type:"password","onUpdate:modelValue":s[20]||(s[20]=a=>f.api.bloombergKey=a),placeholder:"••••••••••••••••",class:"glass-input full"},null,512),[[P,f.api.bloombergKey]])]),s[67]||(s[67]=n("div",{class:"divider"},null,-1)),n("div",Ni,[s[66]||(s[66]=n("label",null,"Webhook URL (Alerts)",-1)),M(n("input",{type:"text","onUpdate:modelValue":s[21]||(s[21]=a=>f.api.webhookUrl=a),placeholder:"https://hooks.slack.com/...",class:"glass-input full"},null,512),[[P,f.api.webhookUrl]])])])]),n("div",Yi,[s[69]||(s[69]=n("h3",{class:"block-title"},"Статус подключений",-1)),n("div",qi,[(m(!0),d(i,null,h(f.connectedServices,a=>(m(),d("div",{key:a.id,class:"service-item"},[n("div",Hi,[n("span",Qi,b(a.name),1)]),n("span",{class:o(["status-indicator",{connected:a.connected}])},b(a.connected?"Активно":"Отключено"),3)]))),128))])])],512),[[F,"api"===t.value]])])])]))}}),[["__scopeId","data-v-54d774f5"]]),Gi={class:"page-container"},ji={class:"section-header"},zi={class:"header-actions"},Wi={class:"status-pill"},Ki={class:"dashboard-grid"},Xi={class:"left-panel"},Ji={class:"card glass-panel mb-4"},Zi={class:"controls-form"},an={class:"input-group"},sn={class:"input-group"},en={class:"input-group"},tn=["disabled"],ln={key:0},dn={key:1,class:"flex-center"},nn={key:0,class:"card glass-panel"},cn={class:"m-val"},on={class:"m-lbl"},vn={key:1,class:"card glass-panel mt-4"},rn={class:"stats-list"},pn={class:"stat-head"},un={class:"s-name"},fn={class:"stat-metrics"},hn={class:"text-muted"},bn={class:"main-panel"},gn={class:"card glass-panel chart-card"},mn={class:"chart-header"},kn={key:0,class:"live-badge"},yn={key:0,class:"playback-controls"},xn={key:0},wn={key:1},Cn={class:"timeline-wrapper"},Mn=["max"],Pn={class:"chart-container"},Sn={key:0,viewBox:"0 0 800 250",preserveAspectRatio:"none",class:"regime-svg"},_n=["x","width","fill"],Vn=["d"],Rn=["x1","x2"],In={class:"card glass-panel chart-card mt-4"},Tn={class:"chart-container"},Fn={key:0,viewBox:"0 0 800 250",preserveAspectRatio:"none",class:"regime-svg"},Un=["y1","y2"],An=["d"],Ln=["cx","cy","fill"],Bn=["x1","x2"],Dn={class:"card glass-panel chart-card mt-4"},En={class:"chart-container"},$n={key:0,viewBox:"0 0 800 200",preserveAspectRatio:"none",class:"regime-svg"},Nn=["y1","y2"],Yn=["y"],qn=["y"],Hn=["y"],Qn=["cx","cy","fill"],On=fa(a({__name:"RegimeAnalysis",setup(a){const e=ba(),r=s("SPY"),p=s(3),u=s(1),g=s(!1),k=s(null),x=s([]),w=s([]),S=s(0),_=s(!1);let V=null;const R=async()=>{if(g.value)return;g.value=!0,U();const a=e.addTask(`Обучение HMM на ${r.value}...`,"simulation");try{e.updateProgress(a,15),await new Promise(a=>setTimeout(a,500));for(let s=30;s<=90;s+=15)await new Promise(a=>setTimeout(a,200)),e.updateProgress(a,s);B(),e.updateProgress(a,100),S.value=0,T()}catch(s){e.failTask(a)}finally{g.value=!1}},T=()=>{_.value?U():(S.value>=x.value.length-1&&(S.value=0),_.value=!0,L())},U=()=>{_.value=!1,V&&cancelAnimationFrame(V)},A=()=>{U(),S.value=0},L=()=>{if(!_.value)return;const a=S.value+2;a>=x.value.length?(S.value=x.value.length-1,U()):(S.value=a,V=requestAnimationFrame(L))},B=()=>{const a=p.value,s=[];for(let i=0;i<a;i++){const e=new Array(a).fill(.05);e[i]=1-.05*(a-1),s.push(e)}k.value=s;const e=[];let t=100,l=0,d=.1;for(let i=0;i<250;i++){const a=Math.random(),s=k.value[l]||k.value[0];let i=0;for(let e=0;e<s.length;e++)if(i+=s[e],a<i){l=e;break}let n=0,c=0;0===l?(n=2e-4,c=.008*u.value):1===l?(n=.001,c=.012*u.value):(n=-.002,c=.025*u.value);const o=n+2*(Math.random()-.5)*c;t*=1+o,d=.9*d+Math.abs(o)*Math.sqrt(252)*.1,e.push({price:t,regime:l,vol:d})}x.value=e,S.value=e.length-1,w.value=[{ret:"8.5",vol:(12*u.value).toFixed(1)},{ret:"22.0",vol:(18.5*u.value).toFixed(1)},{ret:"-15.4",vol:(45.2*u.value).toFixed(1)}].slice(0,p.value)},D=y(()=>800/(x.value.length||1)),E=a=>a*D.value,$=a=>{let s=(a-0)/.8;return s>1&&(s=1),s<0&&(s=0),250-230*s-10},N=a=>200-200/(p.value+1)*(a+1),Y=y(()=>{if(!x.value.length)return"";const a=x.value.slice(0,S.value+1),s=x.value.map(a=>a.price),e=Math.min(...s),t=Math.max(...s);return"M "+a.map((a,s)=>`${E(s).toFixed(1)},${((a,s,e)=>250-(a-s)/(e-s)*230-10)(a.price,e,t).toFixed(1)}`).join(" L ")}),q=y(()=>{if(!x.value.length)return"";return"M "+x.value.slice(0,S.value+1).map((a,s)=>`${E(s).toFixed(1)},${$(a.vol).toFixed(1)}`).join(" L ")}),H=a=>0===a?"Stable":1===a?"Growth":"Stress",Q=a=>1===a?"#4ade80":2===a?"#f87171":"#3b82f6",O=a=>1===a?"bg-green":2===a?"bg-red":"bg-blue",G=y(()=>{if(!x.value.length)return"Unknown";const a=Math.min(S.value,x.value.length-1);return H(x.value[a].regime)}),j=y(()=>{if(!x.value.length)return"bg-grey";const a=Math.min(S.value,x.value.length-1);return O(x.value[a].regime)});return l(()=>{V&&cancelAnimationFrame(V)}),t(()=>{}),(a,s)=>(m(),d("div",Gi,[n("div",ji,[s[4]||(s[4]=n("div",null,[n("h1",{class:"section-title"},"Выявление скрытых рыночных режимов"),n("p",{class:"section-subtitle"},"Классификация режимов скрытой марковской цепи и анализ волатильности")],-1)),n("div",zi,[n("div",Wi,[n("span",{class:o(["dot",j.value])},null,2),C(" Текущий режим: "+b(G.value),1)])])]),n("div",Ki,[n("aside",Xi,[n("div",Ji,[s[11]||(s[11]=n("div",{class:"panel-header-sm"},[n("h3",null,"Параметры модели")],-1)),n("div",Zi,[n("div",an,[s[6]||(s[6]=n("label",{class:"lbl"},"Актив",-1)),M(n("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>r.value=a),class:"glass-select"},[...s[5]||(s[5]=[n("option",{value:"SPY"},"S&P 500 (SPY)",-1),n("option",{value:"QQQ"},"Nasdaq 100 (QQQ)",-1),n("option",{value:"IWM"},"Russell 2000 (IWM)",-1),n("option",{value:"BTC"},"Bitcoin (BTC)",-1)])],512),[[I,r.value]])]),n("div",sn,[s[7]||(s[7]=n("label",{class:"lbl"},"Количество скрытых режимов",-1)),v(pe,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=a=>p.value=a),min:2,max:5,step:1,class:"text-accent"},null,8,["modelValue"])]),s[10]||(s[10]=n("div",{class:"divider"},null,-1)),n("div",en,[s[8]||(s[8]=n("label",{class:"lbl"},"Мультипликатор шока по режиму",-1)),v(pe,{modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=a=>u.value=a),min:.5,max:3,step:.1,decimals:1,suffix:"x"},null,8,["modelValue"])]),n("button",{onClick:R,disabled:g.value,class:"btn btn-primary-gradient w-full mt-2"},[g.value?(m(),d("span",dn,[...s[9]||(s[9]=[n("span",{class:"spinner-mini mr-2"},null,-1),C(" Вычисляется... ",-1)])])):(m(),d("span",ln,"Запустить анализ"))],8,tn)])]),k.value?(m(),d("div",nn,[s[12]||(s[12]=n("div",{class:"panel-header-sm"},[n("h3",null,"Матрица переходов")],-1)),n("div",{class:"matrix-grid",style:f({gridTemplateColumns:`repeat(${p.value}, 1fr)`})},[(m(!0),d(i,null,h(k.value,(a,s)=>(m(),d("div",{key:s,class:"matrix-row-group"},[(m(!0),d(i,null,h(a,(a,e)=>(m(),d("div",{key:e,class:"matrix-cell",style:f({backgroundColor:`rgba(59, 130, 246, ${.8*a})`})},[n("span",cn,b((100*a).toFixed(0))+"%",1),n("span",on,"S"+b(s)+"→S"+b(e),1)],4))),128))]))),128))],4)])):c("",!0),w.value.length?(m(),d("div",vn,[s[13]||(s[13]=n("div",{class:"panel-header-sm"},[n("h3",null,"Статистики режимов")],-1)),n("div",rn,[(m(!0),d(i,null,h(w.value,(a,s)=>(m(),d("div",{class:"stat-item",key:s},[n("div",pn,[n("span",{class:o(["dot",O(s)])},null,2),n("span",un,b(H(s)),1)]),n("div",fn,[n("span",null,"μ: "+b(a.ret)+"%",1),n("span",hn,"σ: "+b(a.vol)+"%",1)])]))),128))])])):c("",!0)]),n("main",bn,[n("div",gn,[n("div",mn,[n("h3",null,[s[14]||(s[14]=C(" Режимно-зависимое изменение цены актива ",-1)),_.value?(m(),d("span",kn,"● LIVE PLAYBACK")):c("",!0)]),x.value.length?(m(),d("div",yn,[n("button",{class:"icon-btn",onClick:T,title:"Play/Pause"},[_.value?(m(),d("span",xn,"⏸")):(m(),d("span",wn,"▶"))]),n("div",Cn,[M(n("input",{type:"range",min:"0",max:x.value.length-1,"onUpdate:modelValue":s[3]||(s[3]=a=>S.value=a),onInput:U,class:"timeline-slider"},null,40,Mn),[[P,S.value,void 0,{number:!0}]]),n("div",{class:"timeline-track",style:f({width:S.value/(x.value.length-1)*100+"%"})},null,4)]),n("button",{class:"icon-btn",onClick:A,title:"Reset"},"↺")])):c("",!0)]),n("div",Pn,[x.value.length?(m(),d("svg",Sn,[(m(!0),d(i,null,h(x.value,(a,s)=>{return M((m(),d("rect",{key:"bg-"+s,x:E(s),y:"0",width:D.value,height:"250",fill:(e=a.regime,t=.15,1===e?`rgba(74, 222, 128, ${t})`:2===e?`rgba(248, 113, 113, ${t})`:`rgba(59, 130, 246, ${t})`)},null,8,_n)),[[F,s<=S.value]]);var e,t}),128)),n("path",{d:Y.value,fill:"none",stroke:"#fff","stroke-width":"1.5"},null,8,Vn),S.value<x.value.length-1?(m(),d("line",{key:0,x1:E(S.value),y1:"0",x2:E(S.value),y2:"250",stroke:"rgba(255,255,255,0.5)","stroke-dasharray":"2"},null,8,Rn)):c("",!0)])):c("",!0)])]),n("div",In,[s[15]||(s[15]=n("div",{class:"chart-header"},[n("h3",null,"Скользящая волатильность (20-дневное окно)")],-1)),n("div",Tn,[x.value.length?(m(),d("svg",Fn,[(m(),d(i,null,h(5,a=>n("line",{key:a,x1:"0",y1:50*a,x2:"800",y2:50*a,stroke:"rgba(255,255,255,0.05)"},null,8,Un)),64)),n("path",{d:q.value,fill:"none",stroke:"rgba(255,255,255,0.5)","stroke-width":"1"},null,8,An),(m(!0),d(i,null,h(x.value,(a,s)=>M((m(),d("circle",{key:"v-"+s,cx:E(s),cy:$(a.vol),r:"2",fill:Q(a.regime)},null,8,Ln)),[[F,s<=S.value]])),128)),S.value<x.value.length-1?(m(),d("line",{key:0,x1:E(S.value),y1:"0",x2:E(S.value),y2:"250",stroke:"rgba(255,255,255,0.3)","stroke-dasharray":"2"},null,8,Bn)):c("",!0)])):c("",!0)])]),n("div",Dn,[s[16]||(s[16]=n("div",{class:"chart-header"},[n("h3",null,"Предсказанные скрытые состояния")],-1)),n("div",En,[x.value.length?(m(),d("svg",$n,[(m(),d(i,null,h([0,1,2],a=>n("line",{key:"g-"+a,x1:"0",y1:N(a),x2:"800",y2:N(a),stroke:"rgba(255,255,255,0.05)","stroke-dasharray":"4"},null,8,Nn)),64)),n("text",{x:"10",y:N(0)-10,fill:"rgba(255,255,255,0.3)","font-size":"10"},"Stable (0)",8,Yn),n("text",{x:"10",y:N(1)-10,fill:"rgba(255,255,255,0.3)","font-size":"10"},"Growth (1)",8,qn),n("text",{x:"10",y:N(2)-10,fill:"rgba(255,255,255,0.3)","font-size":"10"},"Stress (2)",8,Hn),(m(!0),d(i,null,h(x.value,(a,s)=>M((m(),d("circle",{key:"s-"+s,cx:E(s),cy:N(a.regime),r:"3",fill:Q(a.regime),opacity:"0.8"},null,8,Qn)),[[F,s<=S.value]])),128))])):c("",!0)])])])])]))}}),[["__scopeId","data-v-cfb61ffe"]]),Gn={class:"page-container"},jn=fa(a({__name:"RegimeDetails",setup:a=>(a,s)=>(m(),d("div",Gn,[...s[0]||(s[0]=[u('<div class="section-header" data-v-0178c154><div data-v-0178c154><h1 class="section-title" data-v-0178c154>Детальный анализ режимов</h1><p class="section-subtitle" data-v-0178c154>Метрики устойчивости, матрицы переходов и сценарное прогнозирование</p></div><div class="header-controls" data-v-0178c154><span class="date-badge" data-v-0178c154>Data: 01.11.2025</span></div></div><div class="grid-3 mb-6" data-v-0178c154><div class="card glass-panel regime-card border-blue" data-v-0178c154><div class="card-head" data-v-0178c154><span class="dot bg-blue" data-v-0178c154></span><h3 data-v-0178c154>Состояние 0: Стабильность</h3></div><div class="card-body" data-v-0178c154><p class="desc" data-v-0178c154>Динамическое равновесие без ярко выраженного направления. Рынок стабилизируется, волатильность минимальна.</p><div class="metrics-table" data-v-0178c154><div class="m-row" data-v-0178c154><span data-v-0178c154>Количество дней</span> <strong data-v-0178c154>272</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Доля периода</span> <strong data-v-0178c154>70.8%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ср. доходность</span> <strong class="text-blue" data-v-0178c154>+0.005%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Волатильность</span> <strong data-v-0178c154>0.375%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Устойчивость</span> <strong data-v-0178c154>0.9632</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ожид. длительность</span> <strong data-v-0178c154>27.2 дня</strong></div></div></div></div><div class="card glass-panel regime-card border-red" data-v-0178c154><div class="card-head" data-v-0178c154><span class="dot bg-red" data-v-0178c154></span><h3 data-v-0178c154>Состояние 1: Падение</h3></div><div class="card-body" data-v-0178c154><p class="desc" data-v-0178c154>Фаза понижательного тренда с высокой волатильностью. &quot;Липкое&quot; состояние с короткими отскоками.</p><div class="metrics-table" data-v-0178c154><div class="m-row" data-v-0178c154><span data-v-0178c154>Количество дней</span> <strong data-v-0178c154>60</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Доля периода</span> <strong data-v-0178c154>15.6%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ср. доходность</span> <strong class="text-red" data-v-0178c154>-0.039%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Волатильность</span> <strong data-v-0178c154>0.652%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Устойчивость</span> <strong data-v-0178c154>0.6667</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ожид. длительность</span> <strong data-v-0178c154>3.0 дня</strong></div></div></div></div><div class="card glass-panel regime-card border-green" data-v-0178c154><div class="card-head" data-v-0178c154><span class="dot bg-green" data-v-0178c154></span><h3 data-v-0178c154>Состояние 2: Рост</h3></div><div class="card-body" data-v-0178c154><p class="desc" data-v-0178c154>Периоды возрастающего тренда. Систематический рост стоимости облигаций с умеренными колебаниями.</p><div class="metrics-table" data-v-0178c154><div class="m-row" data-v-0178c154><span data-v-0178c154>Количество дней</span> <strong data-v-0178c154>52</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Доля периода</span> <strong data-v-0178c154>13.5%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ср. доходность</span> <strong class="text-green" data-v-0178c154>+0.036%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Волатильность</span> <strong data-v-0178c154>0.479%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Устойчивость</span> <strong data-v-0178c154>0.6471</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ожид. длительность</span> <strong data-v-0178c154>2.8 дня</strong></div></div></div></div></div><div class="grid-2 mb-6" data-v-0178c154><div class="card glass-panel" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Матрица переходов</h3></div><div class="heatmap-container" data-v-0178c154><div class="heatmap-grid" data-v-0178c154><div class="h-label" data-v-0178c154>From \\ To</div><div class="h-col-header text-blue" data-v-0178c154>Стаб</div><div class="h-col-header text-red" data-v-0178c154>Падение</div><div class="h-col-header text-green" data-v-0178c154>Рост</div><div class="h-row-header text-blue" data-v-0178c154>Стаб</div><div class="h-cell" style="background:rgba(59, 130, 246, 0.96);" data-v-0178c154>0.9632</div><div class="h-cell" style="background:rgba(248, 113, 113, 0.02);" data-v-0178c154>0.0221</div><div class="h-cell" style="background:rgba(74, 222, 128, 0.01);" data-v-0178c154>0.0147</div><div class="h-row-header text-red" data-v-0178c154>Падение</div><div class="h-cell" style="background:rgba(59, 130, 246, 0.08);" data-v-0178c154>0.0833</div><div class="h-cell" style="background:rgba(248, 113, 113, 0.66);" data-v-0178c154>0.6667</div><div class="h-cell" style="background:rgba(74, 222, 128, 0.25);" data-v-0178c154>0.2500</div><div class="h-row-header text-green" data-v-0178c154>Рост</div><div class="h-cell" style="background:rgba(59, 130, 246, 0.07);" data-v-0178c154>0.0784</div><div class="h-cell" style="background:rgba(248, 113, 113, 0.27);" data-v-0178c154>0.2745</div><div class="h-cell" style="background:rgba(74, 222, 128, 0.64);" data-v-0178c154>0.6471</div></div><div class="analysis-note mt-4" data-v-0178c154><p data-v-0178c154>• <strong data-v-0178c154>Стабильность</strong> имеет наивысшую инерцию (0.96).<br data-v-0178c154>• Из <strong data-v-0178c154>Падения</strong> выход в Рост (25%) вероятнее, чем в Стабильность (8%).</p></div></div></div><div class="card glass-panel flex-col" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Прогноз вероятностей</h3><span class="sub" data-v-0178c154>Начальное состояние: Рост</span></div><div class="forecast-table-wrapper" data-v-0178c154><table class="simple-table" data-v-0178c154><thead data-v-0178c154><tr data-v-0178c154><th data-v-0178c154>Горизонт</th><th class="text-blue" data-v-0178c154>P(Стаб)</th><th class="text-red" data-v-0178c154>P(Пад)</th><th class="text-green" data-v-0178c154>P(Рост)</th></tr></thead><tbody data-v-0178c154><tr data-v-0178c154><td data-v-0178c154>1 день</td><td data-v-0178c154>7.84%</td><td data-v-0178c154>27.45%</td><td data-v-0178c154>64.71%</td></tr><tr data-v-0178c154><td data-v-0178c154>5 дней</td><td data-v-0178c154>31.74%</td><td data-v-0178c154>35.18%</td><td data-v-0178c154>33.08%</td></tr><tr data-v-0178c154><td data-v-0178c154>10 дней</td><td data-v-0178c154>48.98%</td><td data-v-0178c154>26.79%</td><td data-v-0178c154>24.23%</td></tr><tr data-v-0178c154><td data-v-0178c154>20 дней</td><td data-v-0178c154>63.13%</td><td data-v-0178c154>19.51%</td><td data-v-0178c154>17.36%</td></tr><tr class="stationary" data-v-0178c154><td data-v-0178c154>∞ (Стационарное состояние)</td><td data-v-0178c154>70.8%</td><td data-v-0178c154>15.6%</td><td data-v-0178c154>13.5%</td></tr></tbody></table></div><div class="chart-mini mt-4" data-v-0178c154><h4 data-v-0178c154>Сходимость к стационарному состоянию</h4><svg viewBox="0 0 400 100" class="svg-curves" data-v-0178c154><path d="M0,90 Q50,80 100,50 T400,30" fill="none" stroke="#3b82f6" stroke-width="2" data-v-0178c154></path><path d="M0,10 Q50,40 100,60 T400,85" fill="none" stroke="#4ade80" stroke-width="2" data-v-0178c154></path></svg></div></div></div><div class="grid-2 mb-6" data-v-0178c154><div class="card glass-panel" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Распределение доходностей по режимам</h3></div><div class="chart-container-rect" data-v-0178c154><svg viewBox="0 0 600 250" class="svg-chart" data-v-0178c154><line x1="50" y1="220" x2="550" y2="220" stroke="#555" data-v-0178c154></line><line x1="300" y1="20" x2="300" y2="220" stroke="#444" stroke-dasharray="4" data-v-0178c154></line><path d="M150,220 Q300,-100 450,220" fill="rgba(59, 130, 246, 0.2)" stroke="#3b82f6" stroke-width="2" data-v-0178c154></path><path d="M50,220 Q200,50 400,220" fill="rgba(248, 113, 113, 0.2)" stroke="#f87171" stroke-width="2" data-v-0178c154></path><path d="M200,220 Q380,50 500,220" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2" data-v-0178c154></path><text x="310" y="30" fill="#3b82f6" font-size="10" data-v-0178c154>Стабильность (Low σ)</text><text x="100" y="100" fill="#f87171" font-size="10" data-v-0178c154>Падение (Negative μ)</text><text x="450" y="100" fill="#4ade80" font-size="10" data-v-0178c154>Рост (Positive μ)</text></svg></div><p class="chart-caption" data-v-0178c154>Распределение изменений доходностей. Падение имеет &quot;толстый хвост&quot; слева.</p></div><div class="card glass-panel" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Характеристики режимов</h3></div><div class="chart-container-rect" data-v-0178c154><svg viewBox="0 0 500 250" class="svg-chart" data-v-0178c154><rect x="50" y="150" width="40" height="50" fill="#3b82f6" opacity="0.8" data-v-0178c154></rect><rect x="100" y="195" width="40" height="5" fill="#3b82f6" opacity="0.4" data-v-0178c154></rect><rect x="200" y="50" width="40" height="150" fill="#f87171" opacity="0.8" data-v-0178c154></rect><rect x="250" y="200" width="40" height="40" fill="#f87171" opacity="0.4" data-v-0178c154></rect><rect x="350" y="100" width="40" height="100" fill="#4ade80" opacity="0.8" data-v-0178c154></rect><rect x="400" y="160" width="40" height="40" fill="#4ade80" opacity="0.4" data-v-0178c154></rect><text x="75" y="240" fill="#aaa" text-anchor="middle" font-size="12" data-v-0178c154>Стабильность</text><text x="245" y="240" fill="#aaa" text-anchor="middle" font-size="12" data-v-0178c154>Падение</text><text x="395" y="240" fill="#aaa" text-anchor="middle" font-size="12" data-v-0178c154>Рост</text><rect x="350" y="20" width="10" height="10" fill="#fff" opacity="0.8" data-v-0178c154></rect> <text x="370" y="30" fill="#fff" font-size="10" data-v-0178c154>Волатильность</text><rect x="350" y="40" width="10" height="10" fill="#fff" opacity="0.4" data-v-0178c154></rect> <text x="370" y="50" fill="#fff" font-size="10" data-v-0178c154>Доходность (Abs)</text></svg></div></div></div>',4)])]))}),[["__scopeId","data-v-0178c154"]]),zn={class:"page-container"},Wn={class:"analysis-grid"},Kn={class:"charts-column"},Xn={class:"card glass-panel chart-container"},Jn={class:"chart-area big-chart"},Zn={viewBox:"0 0 1000 300",preserveAspectRatio:"none",class:"svg-chart"},ac=["y1","y2"],sc=["d","stroke"],ec=["d"],tc={class:"card glass-panel chart-container"},lc={class:"chart-area big-chart"},dc={viewBox:"0 0 1000 300",preserveAspectRatio:"none",class:"svg-chart"},ic=["y1","y2"],nc=["d"],cc=["d"],oc=["d"],vc={class:"page-container center-content"},rc={class:"card glass-panel not-found-card"},pc={class:"content-wrapper"},uc={class:"actions"},fc={class:"suggestions"},hc={class:"links-row"},bc=[{path:"/",name:"Home",component:Wa,meta:{title:"Главная",icon:"🏠",bare:!0}},{path:"/",component:Ya,children:[{path:"dashboard",component:vs,name:"Сводный дашборд по портфельному анализу",meta:{title:"Дашборд",icon:"📊"}},{path:"portfolio",component:ce,name:"Портфель",meta:{title:"Портфель",icon:"💼"}},{path:"monte-carlo",component:vt,name:"Монте-Карло",meta:{title:"Monte Carlo",icon:"🎲"}},{path:"greeks",component:dl,name:"Риск-метрики",meta:{title:"Греческие параметры",icon:"🎯",badge:"3"}},{path:"stress",component:td,name:"Стресс-тестирование",meta:{title:"Стресс-тестирование",icon:"⚡"},alias:"stress-testing"},{path:"backtest",component:xd,name:"Бэктестинг",meta:{title:"Бэктестинг",icon:"📉"}},{path:"reports",component:Fd,name:"Отчёты",meta:{title:"Отчёты",icon:"📋"}},{path:"settings",component:Oi,name:"Настройки",meta:{title:"Настройки",icon:"⚙️"},alias:"parameters"},{path:"regimes",component:On,name:"Анализ режимов",meta:{title:"Рыночные режимы",icon:"🌊"}},{path:"fixed-income",component:fa(a({__name:"YieldAnalysis",setup(a){const e=s([]),l=s([]),c=s({US10Y:[],US02Y:[]}),o=()=>{const a=[],s=[];for(let e=0;e<50;e++){const e=[],t=[0];let l=0;for(let a=0;a<250;a++){let s=2*(Math.random()-.5);a>220&&Math.random()>.8&&(s*=8),e.push(s),l+=s,t.push(l)}a.push(e),s.push(t)}e.value=a,l.value=s;const t=a=>{const s=[0];let e=0;for(let t=0;t<250;t++)e+=Math.random()-.5+a,s.push(e);return s};c.value={US10Y:t(.1),US02Y:t(-.05)}},v=(a,s,e)=>{if(!a||0===a.length)return"";return"M "+a.map((t,l)=>{return`${(s=>s/(a.length-1)*1e3)(l).toFixed(1)},${(d=t,300-(d-e)/(s-e)*300).toFixed(1)}`;var d}).join(" L ")};return t(()=>{o()}),(a,s)=>(m(),d("div",zn,[n("div",{class:"section-header"},[s[1]||(s[1]=n("div",null,[n("h1",{class:"section-title"},"Анализ кривых доходности"),n("p",{class:"section-subtitle"},"Динамика рынка и стресс-сценарии")],-1)),n("div",{class:"header-controls"},[n("button",{class:"btn-refresh",onClick:o},[...s[0]||(s[0]=[n("span",{class:"icon"},"↻",-1),C(" Обновить ",-1)])])])]),n("div",Wn,[n("div",Kn,[n("div",Xn,[s[4]||(s[4]=u('<div class="panel-header" data-v-fec75330><h3 data-v-fec75330>Ежедневные изменения (%)</h3><div class="legend" data-v-fec75330><span class="l-item faded" data-v-fec75330><span class="dot bg-gray" data-v-fec75330></span> Кластеры волатильности</span><span class="l-item" data-v-fec75330><span class="dot bg-green" data-v-fec75330></span> Выбросы</span></div></div>',1)),n("div",Jn,[(m(),d("svg",Zn,[(m(),d(i,null,h(6,a=>n("line",{key:"g1-"+a,x1:"0",y1:50*a,x2:"1000",y2:50*a,stroke:"rgba(255,255,255,0.05)"},null,8,ac)),64)),s[2]||(s[2]=n("line",{x1:"0",y1:"150",x2:"1000",y2:"150",stroke:"rgba(255,255,255,0.2)","stroke-dasharray":"4"},null,-1)),(m(!0),d(i,null,h(e.value,(a,s)=>(m(),d("path",{key:"d-"+s,d:v(a,10,-10),fill:"none",stroke:`hsla(${Math.floor(360*Math.random())}, 60%, 70%, 0.4)`,"stroke-width":"0.8",opacity:"0.6"},null,8,sc))),128)),n("path",{d:v(e.value[48],10,-10),fill:"none",stroke:"#4ade80","stroke-width":"1.5"},null,8,ec)])),s[3]||(s[3]=n("div",{class:"chart-label"},"График 1: Изменения доходностей (%)",-1))])]),n("div",tc,[s[7]||(s[7]=u('<div class="panel-header" data-v-fec75330><h3 data-v-fec75330>Накопленные изменения (%)</h3><div class="legend" data-v-fec75330><span class="l-item" data-v-fec75330><span class="dot bg-blue" data-v-fec75330></span> US10Y</span><span class="l-item" data-v-fec75330><span class="dot bg-purple" data-v-fec75330></span> US02Y</span></div></div>',1)),n("div",lc,[(m(),d("svg",dc,[(m(),d(i,null,h(6,a=>n("line",{key:"g2-"+a,x1:"0",y1:50*a,x2:"1000",y2:50*a,stroke:"rgba(255,255,255,0.05)"},null,8,ic)),64)),s[5]||(s[5]=n("line",{x1:"0",y1:"150",x2:"1000",y2:"150",stroke:"rgba(255,255,255,0.2)","stroke-dasharray":"4"},null,-1)),(m(!0),d(i,null,h(l.value,(a,s)=>(m(),d("path",{key:"c-"+s,d:v(a,40,-40),fill:"none",stroke:"rgba(255,255,255,0.08)","stroke-width":"1"},null,8,nc))),128)),n("path",{d:v(c.value.US10Y,40,-40),fill:"none",stroke:"#3b82f6","stroke-width":"2.5"},null,8,cc),n("path",{d:v(c.value.US02Y,40,-40),fill:"none",stroke:"#a855f7","stroke-width":"2.5"},null,8,oc)])),s[6]||(s[6]=n("div",{class:"chart-label"},"График 2: Накопленный итог (%)",-1))])])]),s[8]||(s[8]=u('<aside class="stats-column" data-v-fec75330><div class="card glass-panel h-full sticky-panel" data-v-fec75330><div class="panel-header-sm" data-v-fec75330><h3 data-v-fec75330>Статистика волатильности</h3></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Максимальный дневной всплеск</span><span class="val text-red" data-v-fec75330>+8.4%</span></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Возврат к среднему</span><span class="val" data-v-fec75330>0.45</span></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Эксцесс</span><span class="val text-orange" data-v-fec75330>5.2</span></div><div class="divider" data-v-fec75330></div><div class="panel-header-sm" data-v-fec75330><h3 data-v-fec75330>Параметры</h3></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Количество облигаций</span><span class="val" data-v-fec75330>50</span></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Временной горизонт</span><span class="val" data-v-fec75330>18M</span></div><div class="divider" data-v-fec75330></div><div class="info-block" data-v-fec75330><p data-v-fec75330><strong data-v-fec75330>График 1:</strong> Показывает &quot;шум&quot; и кластеры волатильности. Всплеск в конце графика (зеленая линия) указывает на шоковое событие. </p><p class="mt-2" data-v-fec75330><strong data-v-fec75330>График 2:</strong> Показывает долгосрочный тренд, который формируется из этих ежедневных изменений. </p></div></div></aside>',1))])]))}}),[["__scopeId","data-v-fec75330"]]),name:"Доходности облигаций",meta:{title:"Доходность облигаций",icon:"📈"}},{path:"regime-details",component:jn,name:"Режимная аналитика",meta:{title:"HMM Аналитика",icon:"🔬"}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:fa(a({__name:"NotFound",setup(a){const s=()=>{window.history.back()};return(a,e)=>{const t=r("router-link");return m(),d("div",vc,[n("div",rc,[e[8]||(e[8]=n("div",{class:"glow-bg"},null,-1)),n("div",pc,[e[6]||(e[6]=u('<div class="error-code-container" data-v-2359607e><span class="error-code" data-v-2359607e>404</span><div class="scan-line" data-v-2359607e></div></div><h1 class="error-title" data-v-2359607e>Страница не найдена</h1><p class="error-desc" data-v-2359607e> Похоже, вы вышли за пределы известной вселенной или доступных данных. </p>',3)),n("div",uc,[v(t,{to:"/",class:"btn btn-primary-gradient"},{default:p(()=>[...e[0]||(e[0]=[n("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),C(" Вернуться на Дашборд ",-1)])]),_:1}),n("button",{onClick:s,class:"btn btn-outline"},[...e[1]||(e[1]=[n("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),C(" Назад ",-1)])])]),e[7]||(e[7]=n("div",{class:"divider"},null,-1)),n("div",fc,[e[5]||(e[5]=n("span",{class:"suggestions-lbl"},"Быстрый переход:",-1)),n("div",hc,[v(t,{to:"/risk-metrics",class:"link-pill"},{default:p(()=>[...e[2]||(e[2]=[C("Риск-метрики",-1)])]),_:1}),v(t,{to:"/monte-carlo",class:"link-pill"},{default:p(()=>[...e[3]||(e[3]=[C("Монте-Карло",-1)])]),_:1}),v(t,{to:"/stress-testing",class:"link-pill"},{default:p(()=>[...e[4]||(e[4]=[C("Стресс-тесты",-1)])]),_:1})])])])])])}}}),[["__scopeId","data-v-2359607e"]]),meta:{title:"404"}}],gc=A({history:L("/stochastic-dashbord-v1/"),routes:bc});gc.beforeEach((a,s,e)=>{const t=a.meta?.title||"QuantPro";document.title=`${t} | Risk Management`,e()});const mc=k("theme",()=>{const a=s("dark"),e=a=>{const s=document.documentElement;s.style.colorScheme=a,"light"===a?(s.classList.add("light-theme"),s.classList.remove("dark-theme")):(s.classList.add("dark-theme"),s.classList.remove("light-theme"))};return{theme:a,initTheme:()=>{const s=localStorage.getItem("theme")||"dark";a.value=s,e(s)},toggleTheme:()=>{a.value="dark"===a.value?"light":"dark",localStorage.setItem("theme",a.value),console.log("🎨 Theme changed to:",a.value),e(a.value)}}}),kc={class:"palette-header"},yc=["onKeydown"],xc={class:"palette-body custom-scroll"},wc={key:0,class:"no-results"},Cc={class:"group-title"},Mc=["onClick","onMouseenter"],Pc={class:"cmd-left"},Sc={class:"cmd-icon"},_c={class:"cmd-label"},Vc={key:0,class:"cmd-desc"},Rc={key:0,class:"cmd-shortcut"},Ic=a({__name:"CommandPalette",setup(a){const e=_(),r=s(!1),u=s(""),f=s(null),g=s(null),k=[{id:"nav-home",label:"Go to Home",group:"Navigation",icon:"🏠",action:()=>e.push("/")},{id:"nav-dash",label:"Go to Dashboard",group:"Navigation",icon:"📊",action:()=>e.push("/dashboard")},{id:"nav-port",label:"Go to Portfolio",group:"Navigation",icon:"💼",action:()=>e.push("/portfolio")},{id:"nav-opt",label:"Option Pricing",group:"Navigation",icon:"ƒ",desc:"Calc fair value",action:()=>e.push("/pricing/options")},{id:"nav-hmm",label:"Market Regimes",group:"Navigation",icon:"🌊",action:()=>e.push("/regimes")},{id:"nav-rep",label:"Reports",group:"Navigation",icon:"📋",action:()=>e.push("/reports")},{id:"act-mc",label:"Run Monte Carlo",group:"Actions",icon:"🎲",desc:"Start simulation",action:()=>console.log("Running MC...")},{id:"act-recalc",label:"Recalculate Greeks",group:"Actions",icon:"∑",action:()=>console.log("Recalc Greeks...")},{id:"act-pdf",label:"Export PDF",group:"Actions",icon:"📄",action:()=>console.log("Exporting...")},{id:"sys-theme",label:"Toggle Theme",group:"System",icon:"🌗",shortcut:"Cmd+T",action:()=>console.log("Toggle theme")},{id:"sys-set",label:"Settings",group:"System",icon:"⚙️",action:()=>e.push("/settings")}],S=y(()=>{if(!u.value)return k;const a=u.value.toLowerCase();return k.filter(s=>s.label.toLowerCase().includes(a)||s.group.toLowerCase().includes(a)||s.desc?.toLowerCase().includes(a))}),V=y(()=>{const a={};return S.value.forEach(s=>{a[s.group]||(a[s.group]=[]),a[s.group].push(s)}),a}),R=y(()=>Object.values(V.value).flat());T(S,a=>{a.length>0?g.value=a[0].id:g.value=null});const I=()=>{r.value=!1},F=a=>{a.action(),I()},U=()=>{const a=R.value.find(a=>a.id===g.value);a&&F(a)},A=a=>{const s=R.value,e=s.findIndex(a=>a.id===g.value);-1!==e&&(g.value="down"===a?s[e+1]?.id||s[0].id:s[e-1]?.id||s[s.length-1].id)},L=a=>{(a.metaKey||a.ctrlKey)&&"k"===a.key&&(a.preventDefault(),r.value?I():(r.value=!0,u.value="",g.value=R.value[0]?.id||null,D(()=>f.value?.focus())))};return t(()=>window.addEventListener("keydown",L)),l(()=>window.removeEventListener("keydown",L)),(a,s)=>(m(),x(B,{to:"body"},[v(w,{name:"fade"},{default:p(()=>[r.value?(m(),d("div",{key:0,class:"palette-backdrop",onClick:I},[n("div",{class:"palette-modal",onClick:s[3]||(s[3]=E(()=>{},["stop"]))},[n("div",kc,[s[4]||(s[4]=n("span",{class:"search-icon"},[n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"11",cy:"11",r:"8"}),n("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),M(n("input",{ref_key:"searchInput",ref:f,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a),type:"text",placeholder:"Type a command or search...",class:"palette-input",onKeydown:[s[1]||(s[1]=$(E(a=>A("down"),["prevent"]),["down"])),s[2]||(s[2]=$(E(a=>A("up"),["prevent"]),["up"])),$(E(U,["prevent"]),["enter"]),$(I,["esc"])]},null,40,yc),[[P,u.value]]),s[5]||(s[5]=n("span",{class:"esc-badge"},"ESC",-1))]),n("div",xc,[0===S.value.length?(m(),d("div",wc," No matching commands found. ")):(m(!0),d(i,{key:1},h(V.value,(a,s)=>(m(),d("div",{key:s,class:"command-group"},[n("div",Cc,b(s),1),(m(!0),d(i,null,h(a,a=>(m(),d("button",{key:a.id,class:o(["command-item",{selected:g.value===a.id}]),onClick:s=>F(a),onMouseenter:s=>g.value=a.id},[n("div",Pc,[n("span",Sc,b(a.icon),1),n("span",_c,[C(b(a.label)+" ",1),a.desc?(m(),d("span",Vc,"— "+b(a.desc),1)):c("",!0)])]),a.shortcut?(m(),d("div",Rc,b(a.shortcut),1)):c("",!0)],42,Mc))),128))]))),128))]),s[6]||(s[6]=n("div",{class:"palette-footer"},[n("div",{class:"footer-item"},[n("span",null,"↵"),C(" to select")]),n("div",{class:"footer-item"},[n("span",null,"↑↓"),C(" to navigate")])],-1))])])):c("",!0)]),_:1})]))}}),Tc=fa(Ic,[["__scopeId","data-v-7c5538ab"]]),Fc=a({__name:"App",setup(a){const s=mc();return t(()=>{s.initTheme()}),(a,s)=>{const e=r("router-view");return m(),d(i,null,[v(Tc),v(e)],64)}}}),Uc=k("theme",()=>{const a=s("dark"),e={"--color-bg-primary":"#050505","--color-bg-secondary":"#0a0a0a","--color-bg-tertiary":"#141414","--color-bg-glass":"rgba(20, 20, 20, 0.65)","--color-bg-glass-light":"rgba(255, 255, 255, 0.05)","--color-accent-primary":"#ffffff","--color-accent-secondary":"#737373","--color-accent-success":"#22c55e","--color-accent-warning":"#f59e0b","--color-accent-danger":"#ef4444","--color-text-primary":"#fafafa","--color-text-secondary":"#a3a3a3","--color-text-tertiary":"#525252","--color-border":"rgba(255, 255, 255, 0.08)","--color-border-hover":"rgba(255, 255, 255, 0.15)","--shadow-sm":"0 0 0 1px rgba(255,255,255,0.05)","--shadow-md":"0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255,255,255,0.05)","--shadow-lg":"0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255,255,255,0.05)"},t=()=>{a.value="dark",(()=>{const a=document.documentElement;Object.entries(e).forEach(([s,e])=>{a.style.setProperty(s,e)}),a.classList.add("dark"),a.style.colorScheme="dark"})()};return{theme:a,initTheme:t,toggleTheme:()=>{t()}}}),Ac=N(Fc),Lc=Y();Ac.use(Lc),Ac.use(gc);Uc().initTheme(),Ac.mount("#app");
