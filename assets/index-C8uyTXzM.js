import{d as a,r as e,a as s,o as l,b as t,c as d,F as i,e as n,f as c,n as o,g as r,h as v,w as u,i as p,j as f,k as b,t as m,u as h,l as g,m as y,p as k,q as x,T as w,s as C,v as P,x as M,y as S,z as _,A as V,B as R,C as I,D as T,E as F,G as U,H as D,I as A,J as L,K as B,L as E,M as Y,N as $,O as N}from"./vendor-CA2JJgJw.js";import{_ as O}from"./pdf-CDn_A7Xt.js";import{C as z,r as H}from"./charts-dOL2HBx2.js";!function(){const a=document.createElement("link").relList;if(!(a&&a.supports&&a.supports("modulepreload"))){for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const s of a)if("childList"===s.type)for(const a of s.addedNodes)"LINK"===a.tagName&&"modulepreload"===a.rel&&e(a)}).observe(document,{childList:!0,subtree:!0})}function e(a){if(a.ep)return;a.ep=!0;const e=function(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),"use-credentials"===a.crossOrigin?e.credentials="include":"anonymous"===a.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(a);fetch(a.href,e)}}();const q={class:"sidebar-tools custom-scroll"},j={class:"tool-group"},Q={class:"tool-content"},G={class:"nav-label"},W={class:"tool-group"},K={class:"tool-content"},X={class:"nav-label"},Z={class:"tool-group"},J={class:"tool-content"},aa={class:"nav-label"},ea={class:"tool-group"},sa={class:"tool-content"},la={class:"tool-group"},ta={class:"tool-content"},da={class:"tool-group"},ia={class:"tool-content"},na={class:"tool-group"},ca={class:"tool-content"},oa={class:"tool-group"},ra={class:"tool-content"},va={class:"tool-group"},ua={class:"tool-content"},pa={class:"sidebar-footer"},fa={class:"status-row"},ba={class:"val mono"},ma=(a,e)=>{const s=a.__vccOpts||a;for(const[l,t]of e)s[l]=t;return s},ha=ma(a({__name:"Sidebar",setup(a){const y=h(),k=e("--:--"),x=e(!1),w=s({portfolio:!0,risk:!1,quant:!1,options:!1,swaps:!1,vol:!1,bonds:!1,forwards:!1,margin:!1}),C=a=>{w[a]=!w[a]},P=[{path:"/dashboard",label:"Главная"},{path:"/portfolio",label:"Оптимизация портфеля"},{path:"/monte-carlo",label:"Симуляция Монте-Карло"},{path:"/greeks",label:"Риск-метрики"},{path:"/reports",label:"Отчёты"},{path:"/settings",label:"Параметры"}],M=[{path:"/backtest",label:"Бэктестинг"},{path:"/stress",label:"Стресс-тестирование"}],S=[{path:"/regimes",label:"Рыночные режимы"},{path:"/regime-details",label:"Детальный анализ режимов"},{path:"/fixed-income",label:"Доходности облигаций"}],_=a=>y.path===a,V=()=>{x.value=!x.value},R=()=>{x.value=!1},I=()=>{k.value=(new Date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})};let T;return l(()=>{I(),T=setInterval(I,1e3)}),t(()=>clearInterval(T)),(a,e)=>{const s=v("router-link");return g(),d(i,null,[n("div",{class:o(["sidebar-tab",{active:x.value,hidden:x.value}]),onClick:V,title:"Open Menu"},[...e[9]||(e[9]=[n("div",{class:"burger-icon"},[n("span"),n("span"),n("span")],-1)])],2),x.value?(g(),d("div",{key:0,class:"sidebar-backdrop",onClick:R})):c("",!0),n("aside",{class:o(["sidebar",{"sidebar--open":x.value}])},[n("div",{class:"sidebar-header"},[e[10]||(e[10]=n("span",{class:"app-logo"},"Quantitative Analitics",-1)),n("button",{class:"close-btn",onClick:R},"✕")]),n("nav",q,[r(s,{to:"/",class:o(["home-entry",{active:_("/")}]),onClick:R},{default:u(()=>[...e[11]||(e[11]=[n("div",{class:"home-icon"},[n("div",{class:"supernova-home"})],-1),n("div",{class:"home-info"},[n("div",{class:"home-title"},"Главная"),n("div",{class:"home-subtitle"},"Обзор инструментов")],-1)])]),_:1},8,["class"]),n("div",j,[n("button",{class:o(["tool-header",{expanded:w.portfolio}]),onClick:e[0]||(e[0]=a=>C("portfolio"))},[...e[12]||(e[12]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova blue" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Портфельный анализ</span><span class="tool-subtitle" data-v-6ecf8fbf>Анализ и оптимизация</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.portfolio?"600px":"0"})},[n("div",Q,[(g(),d(i,null,b(P,a=>r(s,{key:a.path,to:a.path,class:o(["nav-item",{active:_(a.path)}]),onClick:R},{default:u(()=>[n("span",G,m(a.label),1)]),_:2},1032,["to","class"])),64))])],4)]),n("div",W,[n("button",{class:o(["tool-header",{expanded:w.risk}]),onClick:e[1]||(e[1]=a=>C("risk"))},[...e[13]||(e[13]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova purple" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Риск-менеджмент</span><span class="tool-subtitle" data-v-6ecf8fbf>Бэктестинг, стресс-тестировние</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.risk?"220px":"0"})},[n("div",K,[(g(),d(i,null,b(M,a=>r(s,{key:a.path,to:a.path,class:o(["nav-item",{active:_(a.path)}]),onClick:R},{default:u(()=>[n("span",X,m(a.label),1)]),_:2},1032,["to","class"])),64))])],4)]),n("div",Z,[n("button",{class:o(["tool-header",{expanded:w.quant}]),onClick:e[2]||(e[2]=a=>C("quant"))},[...e[14]||(e[14]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova cyan" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Скрытая марковская цепь</span><span class="tool-subtitle" data-v-6ecf8fbf>Модели и режимы</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.quant?"300px":"0"})},[n("div",J,[(g(),d(i,null,b(S,a=>r(s,{key:a.path,to:a.path,class:o(["nav-item",{active:_(a.path)}]),onClick:R},{default:u(()=>[n("span",aa,m(a.label),1)]),_:2},1032,["to","class"])),64))])],4)]),n("div",ea,[n("button",{class:o(["tool-header",{expanded:w.options}]),onClick:e[3]||(e[3]=a=>C("options"))},[...e[15]||(e[15]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Опционы</span><span class="tool-subtitle" data-v-6ecf8fbf>Справедливая стоимость</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.options?"100px":"0"})},[n("div",sa,[r(s,{to:"/pricing/options",class:"nav-item coming-soon"},{default:u(()=>[...e[16]||(e[16]=[n("span",{class:"nav-label"},"Калькулятор опционов",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",la,[n("button",{class:o(["tool-header",{expanded:w.swaps}]),onClick:e[4]||(e[4]=a=>C("swaps"))},[...e[17]||(e[17]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>СВОПы</span><span class="tool-subtitle" data-v-6ecf8fbf>Справедливая стоимость</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.swaps?"100px":"0"})},[n("div",ta,[r(s,{to:"/pricing/swaps",class:"nav-item coming-soon"},{default:u(()=>[...e[18]||(e[18]=[n("span",{class:"nav-label"},"IRS & Currency Swaps",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",da,[n("button",{class:o(["tool-header",{expanded:w.vol}]),onClick:e[5]||(e[5]=a=>C("vol"))},[...e[19]||(e[19]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Поверхность волатильности</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.vol?"100px":"0"})},[n("div",ia,[r(s,{to:"/pricing/surface",class:"nav-item coming-soon"},{default:u(()=>[...e[20]||(e[20]=[n("span",{class:"nav-label"},"Построение (SABR/SVI)",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",na,[n("button",{class:o(["tool-header",{expanded:w.bonds}]),onClick:e[6]||(e[6]=a=>C("bonds"))},[...e[21]||(e[21]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Справедливая стоимость облигаций</span><span class="tool-subtitle" data-v-6ecf8fbf>Доходный подход (DCF)</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.bonds?"100px":"0"})},[n("div",ca,[r(s,{to:"/pricing/bonds",class:"nav-item coming-soon"},{default:u(()=>[...e[22]||(e[22]=[n("span",{class:"nav-label"},"Оценка облигаций",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",oa,[n("button",{class:o(["tool-header",{expanded:w.forwards}]),onClick:e[7]||(e[7]=a=>C("forwards"))},[...e[23]||(e[23]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Форварды</span><span class="tool-subtitle" data-v-6ecf8fbf>Оценка справедливой стоимости</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.forwards?"100px":"0"})},[n("div",ra,[r(s,{to:"/pricing/forwards",class:"nav-item coming-soon"},{default:u(()=>[...e[24]||(e[24]=[n("span",{class:"nav-label"},"Оценка форвардов",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)]),n("div",va,[n("button",{class:o(["tool-header",{expanded:w.margin}]),onClick:e[8]||(e[8]=a=>C("margin"))},[...e[25]||(e[25]=[p('<div class="glossy-icon" data-v-6ecf8fbf><div class="supernova orange" data-v-6ecf8fbf></div></div><div class="tool-info" data-v-6ecf8fbf><span class="tool-title" data-v-6ecf8fbf>Маржа по деривативам</span></div><div class="chevron" data-v-6ecf8fbf><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-6ecf8fbf><polyline points="6 9 12 15 18 9" data-v-6ecf8fbf></polyline></svg></div>',3)])],2),n("div",{class:"tool-content-wrapper",style:f({maxHeight:w.margin?"100px":"0"})},[n("div",ua,[r(s,{to:"/pricing/margin",class:"nav-item coming-soon"},{default:u(()=>[...e[26]||(e[26]=[n("span",{class:"nav-label"},"Расчет маржи",-1),n("span",{class:"nav-soon"},"SOON",-1)])]),_:1})])],4)])]),e[29]||(e[29]=n("div",{class:"sidebar-divider"},null,-1)),n("div",pa,[e[28]||(e[28]=n("div",{class:"status-row"},[n("span",{class:"lbl"},"API статус"),n("span",{class:"val connected"},"● Онлайн")],-1)),n("div",fa,[e[27]||(e[27]=n("span",{class:"lbl"},"Время",-1)),n("span",ba,m(k.value),1)])])],2)],64)}}}),[["__scopeId","data-v-6ecf8fbf"]]),ga=y("tasks",()=>{const a=e([]),s=e=>{a.value=a.value.filter(a=>a.id!==e)};return{tasks:a,addTask:(e,s="calculation")=>{const l=Date.now().toString();return a.value.push({id:l,title:e,progress:0,status:"running",type:s}),l},updateProgress:(e,l)=>{const t=a.value.find(a=>a.id===e);t&&(t.progress=l,l>=100&&(t.status="completed",setTimeout(()=>s(e),3e3)))},failTask:e=>{const l=a.value.find(a=>a.id===e);l&&(l.status="error",setTimeout(()=>s(e),5e3))}}}),ya={class:"island-content"},ka={class:"island-title"},xa={class:"island-right"},wa={class:"island-pct"},Ca=ma(a({__name:"TaskWidget",setup(a){const s=ga(),l=e(!1),t=k(()=>{const a=s.tasks.filter(a=>"running"===a.status||"pending"===a.status);return a.length>0?a[a.length-1]:null}),i=()=>{s.tasks.length>1&&(l.value=!l.value)};return(a,e)=>(g(),x(w,{name:"island-pop"},{default:u(()=>[t.value?(g(),d("div",{key:0,class:"dynamic-island",onClick:i},[e[0]||(e[0]=n("div",{class:"island-left"},[n("div",{class:"spinner-island"})],-1)),n("div",ya,[n("span",ka,m(t.value.title),1)]),n("div",xa,[n("span",wa,m(Math.round(t.value.progress))+"%",1)]),n("div",{class:"island-progress-bg",style:f({width:t.value.progress+"%"})},null,4)])):c("",!0)]),_:1}))}}),[["__scopeId","data-v-041506f2"]]),Pa={class:"app-root"},Ma={class:"app-container"},Sa={class:"main-window"},_a={class:"island-position"},Va={class:"window-header"},Ra={class:"header-content"},Ia={class:"header-top"},Ta={class:"breadcrumbs"},Fa={class:"crumb-active"},Ua={class:"system-status"},Da={class:"status-text"},Aa={class:"mono"},La={class:"header-bottom"},Ba={class:"search-wrapper"},Ea={class:"actions-group"},Ya={key:0,class:"notification-dot"},$a={key:0,class:"notifications-panel glass-panel"},Na={class:"panel-header"},Oa={class:"window-content"},za=ma(a({__name:"MainLayout",setup(a){const s=h(),t=e(""),i=e(!1),p=e(2),f=e(14),b=k(()=>s.name?String(s.name).toUpperCase():"OVERVIEW"),y=()=>i.value=!i.value;return l(()=>{setInterval(()=>{f.value=12+Math.floor(8*Math.random())},2e3)}),(a,e)=>{const s=v("RouterView");return g(),d("div",Pa,[e[12]||(e[12]=n("div",{class:"ambient-glow purple"},null,-1)),e[13]||(e[13]=n("div",{class:"ambient-glow blue"},null,-1)),n("div",Ma,[r(ha),n("div",Sa,[n("div",_a,[r(Ca)]),n("header",Va,[n("div",Ra,[n("div",Ia,[n("nav",Ta,[e[2]||(e[2]=n("span",{class:"crumb-root"},"DASHBOARD",-1)),e[3]||(e[3]=n("span",{class:"crumb-sep"},"/",-1)),n("span",Fa,m(b.value),1)]),n("div",Ua,[e[5]||(e[5]=n("div",{class:"status-pill"},[n("span",{class:"pulse-dot"}),C(" API Live ")],-1)),e[6]||(e[6]=n("div",{class:"divider"},null,-1)),n("div",Da,[e[4]||(e[4]=C(" Ping: ",-1)),n("span",Aa,m(f.value)+"ms",1)])])]),n("div",La,[n("div",Ba,[e[7]||(e[7]=n("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"11",cy:"11",r:"8"}),n("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),P(n("input",{type:"text",placeholder:"Поиск тикера, ISIN или стратегии...",class:"search-input","onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a)},null,512),[[M,t.value]]),e[8]||(e[8]=n("div",{class:"hk-badge"},"⌘K",-1))]),n("div",Ea,[n("button",{class:o(["icon-btn",{active:i.value}]),onClick:y},[e[9]||(e[9]=n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),n("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),p.value?(g(),d("span",Ya)):c("",!0)],2)])])]),r(w,{name:"drawer"},{default:u(()=>[i.value?(g(),d("div",$a,[n("div",Na,[e[10]||(e[10]=n("h3",null,"Уведомления",-1)),n("button",{onClick:e[1]||(e[1]=a=>p.value=0),class:"clear-btn"},"Очистить")]),e[11]||(e[11]=n("div",{class:"notifications-list"},[n("div",{class:"notif-item warning"},[n("div",{class:"notif-icon"},"⚠️"),n("div",{class:"notif-content"},[n("div",{class:"notif-title"},"High Volatility Alert"),n("div",{class:"notif-desc"},"VIX index spike detected (>25.0)")]),n("div",{class:"notif-time"},"2m")]),n("div",{class:"notif-item success"},[n("div",{class:"notif-icon"},"✅"),n("div",{class:"notif-content"},[n("div",{class:"notif-title"},"Rebalancing Complete"),n("div",{class:"notif-desc"},"Portfolio adjusted successfully")]),n("div",{class:"notif-time"},"1h")])],-1))])):c("",!0)]),_:1})]),n("main",Oa,[r(s,null,{default:u(({Component:a})=>[r(w,{name:"fade",mode:"out-in"},{default:u(()=>[(g(),x(S(a)))]),_:2},1024)]),_:1})])])])])}}}),[["__scopeId","data-v-82f3416c"]]),Ha={class:"home-root"},qa={class:"home-layout"},ja={class:"hero"},Qa={class:"hero-actions"},Ga={class:"tool-grid"},Wa={class:"tools-grid"},Ka=a({__name:"Home",setup(a){const s=_(),l=e(null),t=a=>null!==l.value&&l.value!==a,i=a=>{l.value||(l.value=a,setTimeout(()=>{s.push(a)},350))};return(a,e)=>{const s=v("router-link");return g(),d("div",Ha,[e[24]||(e[24]=p('<div class="lava-layer" data-v-8da96078><div class="blob blob-1" data-v-8da96078></div><div class="blob blob-2" data-v-8da96078></div><div class="blob blob-3" data-v-8da96078></div><div class="blob blob-4" data-v-8da96078></div><div class="glass-gradient" data-v-8da96078></div></div>',1)),n("div",qa,[n("section",ja,[e[11]||(e[11]=n("div",{class:"logo-badge"},"Калькулятор количественной аналитики",-1)),e[12]||(e[12]=n("h1",{class:"hero-title"},[C(" Комплексный "),n("span",null,"калькулятор"),C(" для портфелей ценных бумаг и деривативов ")],-1)),e[13]||(e[13]=n("p",{class:"hero-subtitle"}," Единая панель для портфельного анализа, режимов рынка, справедливой стоимости деривативов и риск‑менеджмента институционального уровня. ",-1)),n("div",Qa,[r(s,{to:"/dashboard",class:"btn primary"},{default:u(()=>[...e[9]||(e[9]=[C(" Открыть рабочую панель ",-1)])]),_:1}),r(s,{to:"/regimes",class:"btn ghost"},{default:u(()=>[...e[10]||(e[10]=[C(" Смотреть рыночные режимы ",-1)])]),_:1})])]),n("section",Ga,[e[23]||(e[23]=n("h2",{class:"tools-title"},"Инструменты платформы",-1)),n("div",Wa,[n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/portfolio"===l.value,"is-faded":t("/portfolio")}]),onClick:e[0]||(e[0]=a=>i("/portfolio"))},[...e[14]||(e[14]=[p('<div class="tool-icon blue" data-v-8da96078><div class="supernova blue" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Портфельный анализ</div><div class="tool-desc" data-v-8da96078> Доходность, риск‑метрики, VaR/ES, мониторинг позиций. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/regimes"===l.value,"is-faded":t("/regimes")}]),onClick:e[1]||(e[1]=a=>i("/regimes"))},[...e[15]||(e[15]=[p('<div class="tool-icon indigo" data-v-8da96078><div class="supernova indigo" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Скрытая марковская цепь для портфелей ценных бумаг</div><div class="tool-desc" data-v-8da96078> Скрытые состояния, матрицы переходов, стационарное распределение. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/options"===l.value,"is-faded":t("/pricing/options")}]),onClick:e[2]||(e[2]=a=>i("/pricing/options"))},[...e[16]||(e[16]=[p('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Вычисление справедливой стоимости опционов</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> БШМ, Модель Хестона, процессы Леви. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/swaps"===l.value,"is-faded":t("/pricing/swaps")}]),onClick:e[3]||(e[3]=a=>i("/pricing/swaps"))},[...e[17]||(e[17]=[p('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Вычисление справедливой стоимости сделок СВОП</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Процентные и валютные свопы, NPV, DV01, чувствительность. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/surface"===l.value,"is-faded":t("/pricing/surface")}]),onClick:e[4]||(e[4]=a=>i("/pricing/surface"))},[...e[18]||(e[18]=[p('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Поверхность волатильности</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Калибровка SABR/SVI, smile &amp; term‑structure, арбитраж‑free. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/bonds"===l.value,"is-faded":t("/pricing/bonds")}]),onClick:e[5]||(e[5]=a=>i("/pricing/bonds"))},[...e[19]||(e[19]=[p('<div class="tool-icon green" data-v-8da96078><div class="supernova green" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Определение справедливой стоимости облигаций (DCF)</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Доходный подход, спреды к кривой, модифиц. дюрация, convexity. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/forwards"===l.value,"is-faded":t("/pricing/forwards")}]),onClick:e[6]||(e[6]=a=>i("/pricing/forwards"))},[...e[20]||(e[20]=[p('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Определение справедливой стоимости сделок Форвард</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Теоретическая цена, cost‑of‑carry, кросс‑курсы, roll‑down. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/pricing/margin"===l.value,"is-faded":t("/pricing/margin")}]),onClick:e[7]||(e[7]=a=>i("/pricing/margin"))},[...e[21]||(e[21]=[p('<div class="tool-icon orange" data-v-8da96078><div class="supernova orange" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Маржа по деривативам</div><div class="tool-tag" data-v-8da96078>Soon</div><div class="tool-desc" data-v-8da96078> Вариационная/начальная, стресс‑надбавки. </div></div>',2)])],2),n("div",{class:o(["tool-card cursor-pointer",{"is-exploding":"/stress"===l.value,"is-faded":t("/stress")}]),onClick:e[8]||(e[8]=a=>i("/stress"))},[...e[22]||(e[22]=[p('<div class="tool-icon red" data-v-8da96078><div class="supernova red" data-v-8da96078></div></div><div class="tool-body" data-v-8da96078><div class="tool-name" data-v-8da96078>Риск менеджмент</div><div class="tool-desc" data-v-8da96078> Стресс‑тесты, бэктестинг VaR, сценарный анализ портфеля. </div></div>',2)])],2)])])]),n("div",{class:o(["flash-overlay",{active:!!l.value}])},null,2)])}}}),Xa=ma(Ka,[["__scopeId","data-v-8da96078"]]),Za={class:"page-container"},Ja={class:"ticker-wrapper"},ae={class:"ticker-content"},ee={class:"t-symbol"},se={class:"t-price"},le={class:"t-symbol"},te={class:"t-price"},de={class:"dashboard-grid"},ie={class:"grid-col-left"},ne={class:"shortcuts-grid"},ce={class:"card glass-panel alerts-panel"},oe={class:"alert-content"},re={class:"alert-msg"},ve={class:"alert-time"},ue=ma(a({__name:"MainDashboard",setup(a){const s=e([{symbol:"S&P 500",price:"4,785.20",change:.45},{symbol:"NASDAQ",price:"15,120.50",change:.82},{symbol:"VIX",price:"14.20",change:-2.1},{symbol:"US 10Y",price:"4.05%",change:.05},{symbol:"BTC/USD",price:"45,230",change:1.25},{symbol:"EUR/USD",price:"1.0950",change:-.15}]),l=e([{id:1,type:"warning",message:"VaR Usage reached 85%",time:"10:42 AM"},{id:2,type:"info",message:"Monte Carlo simulation completed",time:"09:15 AM"},{id:3,type:"error",message:"Data feed latency spike (fixed)",time:"08:30 AM"}]);return(a,e)=>{const t=v("router-link");return g(),d("div",Za,[n("div",Ja,[n("div",ae,[(g(!0),d(i,null,b(s.value,(a,e)=>(g(),d("div",{key:e,class:"ticker-item"},[n("span",ee,m(a.symbol),1),n("span",se,m(a.price),1),n("span",{class:o(["t-change",a.change>0?"text-green":"text-red"])},m(a.change>0?"▲":"▼")+" "+m(Math.abs(a.change))+"% ",3)]))),128)),(g(!0),d(i,null,b(s.value,(a,e)=>(g(),d("div",{key:"dup"+e,class:"ticker-item"},[n("span",le,m(a.symbol),1),n("span",te,m(a.price),1),n("span",{class:o(["t-change",a.change>0?"text-green":"text-red"])},m(a.change>0?"▲":"▼")+" "+m(Math.abs(a.change))+"% ",3)]))),128))])]),e[7]||(e[7]=p('<header class="hero-section" data-v-78782bd2><div class="hero-text" data-v-78782bd2><h1 class="hero-title" data-v-78782bd2>Доброе день</h1><p class="hero-subtitle" data-v-78782bd2>Системы работают штатно.</p></div><div class="hero-status" data-v-78782bd2><div class="status-pill" data-v-78782bd2><span class="dot bg-green pulse" data-v-78782bd2></span> API активен </div><div class="status-pill" data-v-78782bd2><span class="dot bg-blue" data-v-78782bd2></span> Задержка: 12ms </div></div></header>',1)),n("div",de,[n("section",ie,[e[4]||(e[4]=n("h3",{class:"section-label"},"Инструменты",-1)),n("div",ne,[r(t,{to:"/monte-carlo",class:"shortcut-card"},{default:u(()=>[...e[0]||(e[0]=[n("div",{class:"sc-icon-box blue"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("path",{d:"M2 12h20M2 12l5-5m-5 5l5 5M22 12l-5-5m5 5l-5 5"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Монте-Карло"),n("span",{class:"sc-desc"},"Симуляция сценариев")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1}),r(t,{to:"/stress",class:"shortcut-card"},{default:u(()=>[...e[1]||(e[1]=[n("div",{class:"sc-icon-box orange"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Стресс-тестирование"),n("span",{class:"sc-desc"},"Шоковые события")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1}),r(t,{to:"/portfolio",class:"shortcut-card"},{default:u(()=>[...e[2]||(e[2]=[n("div",{class:"sc-icon-box purple"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),n("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Портфель ценных бумаг"),n("span",{class:"sc-desc"},"Ребалансировка")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1}),r(t,{to:"/reports",class:"shortcut-card"},{default:u(()=>[...e[3]||(e[3]=[n("div",{class:"sc-icon-box gray"},[n("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[n("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n("polyline",{points:"14 2 14 8 20 8"}),n("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),n("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),n("polyline",{points:"10 9 9 9 8 9"})])],-1),n("div",{class:"sc-info"},[n("span",{class:"sc-title"},"Отчеты"),n("span",{class:"sc-desc"},"Экспорт данных")],-1),n("div",{class:"sc-arrow"},"→",-1)])]),_:1})]),e[5]||(e[5]=n("h3",{class:"section-label mt-6"},"Уведомления",-1)),n("div",ce,[(g(!0),d(i,null,b(l.value,a=>(g(),d("div",{class:"alert-item",key:a.id},[n("div",{class:o(["alert-icon",a.type])},"!",2),n("div",oe,[n("span",re,m(a.message),1),n("span",ve,m(a.time),1)])]))),128))])]),e[6]||(e[6]=p('<section class="grid-col-main" data-v-78782bd2><div class="card glass-panel equity-card" data-v-78782bd2><div class="equity-header" data-v-78782bd2><div data-v-78782bd2><span class="lbl" data-v-78782bd2>Капитал</span><h2 class="val-big" data-v-78782bd2>1 000 000 руб.</h2></div><div class="pnl-badge bg-green-subtle" data-v-78782bd2> +2.45% (24ч) </div></div><div class="chart-wrapper" data-v-78782bd2><svg viewBox="0 0 800 200" preserveAspectRatio="none" class="equity-svg" data-v-78782bd2><defs data-v-78782bd2><linearGradient id="eqGrad" x1="0" y1="0" x2="0" y2="1" data-v-78782bd2><stop offset="0%" stop-color="rgba(59, 130, 246, 0.3)" data-v-78782bd2></stop><stop offset="100%" stop-color="rgba(59, 130, 246, 0)" data-v-78782bd2></stop></linearGradient></defs><path d="M0,150 C150,140 300,80 450,100 S650,40 800,20 V200 H0 Z" fill="url(#eqGrad)" data-v-78782bd2></path><path d="M0,150 C150,140 300,80 450,100 S650,40 800,20" fill="none" stroke="#3b82f6" stroke-width="3" data-v-78782bd2></path></svg></div></div><div class="bottom-split" data-v-78782bd2><div class="card glass-panel" data-v-78782bd2><div class="panel-header-sm" data-v-78782bd2><h3 data-v-78782bd2>Сектора (Daily)</h3></div><div class="heatmap-grid" data-v-78782bd2><div class="hm-item bg-green-lg" data-v-78782bd2>Tech <span data-v-78782bd2>+1.2%</span></div><div class="hm-item bg-green-md" data-v-78782bd2>Fin <span data-v-78782bd2>+0.8%</span></div><div class="hm-item bg-red-md" data-v-78782bd2>Energy <span data-v-78782bd2>-0.5%</span></div><div class="hm-item bg-green-sm" data-v-78782bd2>Cons <span data-v-78782bd2>+0.2%</span></div><div class="hm-item bg-red-lg" data-v-78782bd2>Util <span data-v-78782bd2>-1.1%</span></div><div class="hm-item bg-grey" data-v-78782bd2>Real Est <span data-v-78782bd2>0.0%</span></div></div></div><div class="card glass-panel" data-v-78782bd2><div class="panel-header-sm" data-v-78782bd2><h3 data-v-78782bd2>Текущий режим рынка</h3></div><div class="risk-gauge-container" data-v-78782bd2><div class="risk-meter" data-v-78782bd2><div class="risk-needle" style="transform:rotate(45deg);" data-v-78782bd2></div><div class="risk-label" data-v-78782bd2>Высокая волатильность</div></div><div class="risk-stats" data-v-78782bd2><div class="rs-row" data-v-78782bd2><span data-v-78782bd2>VIX</span> <span class="mono" data-v-78782bd2>24.5</span></div><div class="rs-row" data-v-78782bd2><span data-v-78782bd2>Режим</span> <span class="text-orange" data-v-78782bd2>Нестабильный</span></div></div></div></div></div></section>',1))])])}}}),[["__scopeId","data-v-78782bd2"]]);V.create({baseURL:"http://localhost:8000/api",timeout:3e4,headers:{"Content-Type":"application/json"}});const pe=y("portfolio",()=>{const a=e({totalPnL:15400,var95:12500,expectedShortfall:15200,sharpeRatio:.64,maxDrawdown:-12.4,ytdReturn:8.2,lastUpdated:new Date}),s=e([{symbol:"SPY",name:"Акции (MSCI)",type:"ETF",notional:45e4,pnl:12500,pnlPct:2.5,allocation:45,targetAllocation:42,color:"#3b82f6"},{symbol:"AGG",name:"Облигации (AGG)",type:"Bond ETF",notional:35e4,pnl:8900,pnlPct:2.97,allocation:35,targetAllocation:38,color:"#10b981"},{symbol:"GLD",name:"Товары (GLD)",type:"Commodity",notional:12e4,pnl:-3200,pnlPct:-1.6,allocation:12,targetAllocation:15,color:"#f59e0b"},{symbol:"VNQ",name:"Недвижимость (VNQ)",type:"REIT",notional:8e4,pnl:1500,pnlPct:1.8,allocation:8,targetAllocation:5,color:"#ef4444"}]),l=e({targetSharpe:.714,targetVol:11.9,targetReturn:8.5,improvements:{sharpe:11.56,risk:7.03,return:3.66,costs:.5},riskFactors:{beta:.85,duration:4.2,fxRisk:-.15}}),t=k(()=>s.value.reduce((a,e)=>a+e.notional,0));return{kpis:a,positions:s,optimization:l,totalNotional:t}}),fe={class:"portfolio-page"},be={class:"hero-section"},me={class:"hero-actions"},he={class:"last-update"},ge={class:"kpi-grid"},ye={class:"kpi-card"},ke={class:"kpi-content"},xe={class:"kpi-sub"},we={class:"kpi-card"},Ce={class:"kpi-content"},Pe={class:"kpi-value text-white"},Me={class:"kpi-card"},Se={class:"kpi-content"},_e={class:"kpi-value text-gradient-blue"},Ve={class:"dashboard-grid"},Re={class:"col-main"},Ie={class:"card"},Te={class:"card-body p-0"},Fe={class:"table-container"},Ue={class:"asset-table"},De=["onClick"],Ae={class:"asset-name-cell"},Le={class:"name-wrapper"},Be={class:"symbol"},Ee={class:"name"},Ye={class:"text-right mono"},$e={class:"text-right mono"},Ne={class:"text-right mono font-bold"},Oe={class:"text-right mono text-muted"},ze={class:"gap-cell"},He={class:"gap-bar-wrapper"},qe={class:"card"},je={class:"card-body"},Qe={class:"heatmap-container"},Ge={class:"heatmap-header-row"},We={class:"heatmap-row-header"},Ke={class:"card"},Xe={class:"card-body"},Ze={class:"market-map"},Je={class:"tile-symbol"},as={class:"tile-change"},es={class:"col-side"},ss={key:0,class:"card"},ls={class:"card-header"},ts={class:"asset-title"},ds={class:"asset-lg-symbol"},is={class:"asset-lg-name"},ns={class:"card-body"},cs={class:"histogram-wrapper"},os={class:"histogram-bars"},rs=ma(a({__name:"Portfolio",setup(a){const s=pe(),t=e(null),r=e((new Date).toLocaleTimeString());l(()=>{s.positions?.length>0&&(t.value=s.positions[0])});const v=()=>{r.value=(new Date).toLocaleTimeString()},u=[{label:"SPY",values:[1,.6,.3,-.2,.8]},{label:"TLT",values:[.6,1,.1,.4,.5]},{label:"GLD",values:[.3,.1,1,.2,.3]},{label:"DXY",values:[-.2,.4,.2,1,-.1]},{label:"QQQ",values:[.8,.5,.3,-.1,1]}],h=a=>{const e=Math.abs(a);return 1===a?"rgba(255,255,255,0.1)":a>0?`rgba(59, 130, 246, ${e})`:`rgba(239, 68, 68, ${e})`},y=()=>(3*Math.random()-1.5).toFixed(2),k=a=>a.allocation-a.targetAllocation>0?"text-green":"text-red",x=()=>{const a=Math.random()-.5,e=Math.min(1,Math.abs(a)+.2);return a>0?`rgba(16, 185, 129, ${e})`:`rgba(239, 68, 68, ${e})`},w=a=>{const e=[];!a||a.charCodeAt(0);for(let s=0;s<20;s++){let a=50*Math.exp(-Math.pow(s-10,2)/10);a+=20*Math.random()-10,e.push(Math.max(5,a))}return e};return(a,e)=>(g(),d("div",fe,[n("div",be,[e[2]||(e[2]=p('<div class="hero-left" data-v-72ef4ef1><h1 data-v-72ef4ef1>Управление портфелем ценных бумаг</h1><div class="hero-meta" data-v-72ef4ef1><span class="meta-tag" data-v-72ef4ef1>Стратегия: Глобальная мультиактивная</span><span class="meta-tag" data-v-72ef4ef1>Ребалансировка: каждый месяц</span><span class="meta-tag risk-tag" data-v-72ef4ef1>Риск-профиль: Агрессивный</span></div></div>',1)),n("div",me,[n("div",he,"Обновлено: "+m(r.value),1),n("button",{class:"btn btn-primary",onClick:v},[...e[0]||(e[0]=[n("svg",{width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),C(" Пересчитать ",-1)])]),e[1]||(e[1]=n("button",{class:"btn btn-outline"},[n("svg",{width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),C(" Отчет PDF ")],-1))])]),n("div",ge,[n("div",ye,[e[4]||(e[4]=n("div",{class:"kpi-header"},[n("span",{class:"kpi-label"},"Общий P&L"),n("span",{class:"kpi-trend positive"},"+12.4%")],-1)),n("div",ke,[e[3]||(e[3]=n("div",{class:"kpi-value text-gradient-green"},"452,109 руб.",-1)),n("div",xe,"Общая стоимость: "+m((R(s).totalNotional/1e6).toFixed(2))+" млн. руб.",1)])]),n("div",we,[e[6]||(e[6]=n("div",{class:"kpi-header"},[n("span",{class:"kpi-label"},"VaR 95%"),n("span",{class:"kpi-trend negative"},"+1.2%")],-1)),n("div",Ce,[n("div",Pe,m((R(s).kpis.var95/1e3).toFixed(2))+"%",1),e[5]||(e[5]=n("div",{class:"kpi-sub"},"Оценка дневной волатильности",-1))])]),n("div",Me,[e[8]||(e[8]=n("div",{class:"kpi-header"},[n("span",{class:"kpi-label"},"Эффективность")],-1)),n("div",Se,[n("div",_e,m(R(s).kpis.sharpeRatio.toFixed(2)),1),e[7]||(e[7]=n("div",{class:"kpi-sub"},"Коэффициент Шарпа (Rf=4.2%)",-1))])]),e[9]||(e[9]=p('<div class="kpi-card" data-v-72ef4ef1><div class="kpi-header" data-v-72ef4ef1><span class="kpi-label" data-v-72ef4ef1>Диверсификация</span></div><div class="kpi-content" data-v-72ef4ef1><div class="kpi-value text-white" data-v-72ef4ef1>0.34</div><div class="kpi-sub" data-v-72ef4ef1>Коэффициент корреляции</div></div></div>',1))]),n("div",Ve,[n("div",Re,[n("div",Ie,[e[11]||(e[11]=n("div",{class:"card-header"},[n("h3",null,"Открытые позиции"),n("div",{class:"header-controls"},[n("input",{type:"text",placeholder:"Выбрать...",class:"mini-search"})])],-1)),n("div",Te,[n("div",Fe,[n("table",Ue,[e[10]||(e[10]=n("thead",null,[n("tr",null,[n("th",null,"Тикет (ISIN)"),n("th",{class:"text-right"},"Цена"),n("th",{class:"text-right"},"Изменение"),n("th",{class:"text-right"},"Позиция по активу"),n("th",{class:"text-right"},"Вес в портфеле"),n("th",{class:"text-right"},"Целевое значение веса"),n("th",null,"Разница")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(R(s).positions,a=>(g(),d("tr",{key:a.symbol,onClick:e=>(a=>t.value=a)(a),class:o({active:t.value?.symbol===a.symbol})},[n("td",null,[n("div",Ae,[n("span",{class:"color-dot",style:f({background:a.color})},null,4),n("div",Le,[n("span",Be,m(a.symbol),1),n("span",Ee,m(a.name),1)])])]),n("td",Ye,"$"+m(a.price||"142.50"),1),n("td",{class:o(["text-right mono",Math.random()>.5?"text-green":"text-red"])},m(y())+"% ",3),n("td",$e,"$"+m((a.notional/1e3).toFixed(1))+"k",1),n("td",Ne,m(a.allocation)+"%",1),n("td",Oe,m(a.targetAllocation)+"%",1),n("td",ze,[n("div",He,[n("div",{class:o(["gap-val",k(a)])},m((a.allocation-a.targetAllocation).toFixed(1))+"%",3)])])],10,De))),128))])])])])]),n("div",qe,[e[13]||(e[13]=n("div",{class:"card-header"},[n("h3",null,"Матрица Корреляций")],-1)),n("div",je,[n("div",Qe,[n("div",Ge,[e[12]||(e[12]=n("div",{class:"heatmap-empty-cell"},null,-1)),(g(),d(i,null,b(u,a=>n("div",{key:a.label,class:"heatmap-col-header"},m(a.label),1)),64))]),(g(),d(i,null,b(u,(a,e)=>n("div",{class:"heatmap-row",key:e},[n("div",We,m(a.label),1),(g(!0),d(i,null,b(a.values,(a,e)=>(g(),d("div",{class:"heatmap-cell",key:e,style:f({backgroundColor:h(a)})},m(a.toFixed(2)),5))),128))])),64))])])]),n("div",Ke,[e[14]||(e[14]=n("div",{class:"card-header"},[n("h3",null,"Тепловая карта портфеля")],-1)),n("div",Xe,[n("div",Ze,[(g(!0),d(i,null,b(R(s).positions,a=>(g(),d("div",{key:a.symbol,class:"map-tile",style:f({flexGrow:a.allocation,backgroundColor:x()})},[n("span",Je,m(a.symbol),1),n("span",as,m(y())+"%",1)],4))),128))])])])]),n("aside",es,[t.value?(g(),d("div",ss,[n("div",ls,[n("div",ts,[n("span",ds,m(t.value.symbol),1),n("span",is,m(t.value.name),1)]),e[15]||(e[15]=n("div",{class:"badge-pill"},"Акции",-1))]),n("div",ns,[e[16]||(e[16]=p('<div class="chart-controls" data-v-72ef4ef1><button class="pill-btn active" data-v-72ef4ef1>Доходности</button><button class="pill-btn" data-v-72ef4ef1>Просадка</button><div class="spacer" data-v-72ef4ef1></div><select class="mini-select" data-v-72ef4ef1><option data-v-72ef4ef1>1W</option><option data-v-72ef4ef1>2W</option><option data-v-72ef4ef1>1M</option><option selected data-v-72ef4ef1>3M</option><option data-v-72ef4ef1>6M</option><option data-v-72ef4ef1>1Y</option><option data-v-72ef4ef1>2Y</option><option data-v-72ef4ef1>5Y</option></select></div>',1)),n("div",cs,[n("div",os,[(g(!0),d(i,null,b(w(t.value.symbol),(a,e)=>(g(),d("div",{key:e,class:"hist-bar",style:f({height:a+"%",background:t.value.color})},null,4))),128))])]),e[17]||(e[17]=p('<div class="metrics-grid-sm" data-v-72ef4ef1><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Годовая доходность</label><span class="text-green" data-v-72ef4ef1>+14.2%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Волатильность</label><span data-v-72ef4ef1>18.5%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Бэта (β)</label><span data-v-72ef4ef1>1.12</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Максимальная просадка</label><span class="text-red" data-v-72ef4ef1>-12.4%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>VaR (99%)</label><span data-v-72ef4ef1>-2.8%</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Эксцесс</label><span data-v-72ef4ef1>3.4</span></div><div class="metric-box" data-v-72ef4ef1><label data-v-72ef4ef1>Асимметрия</label><span data-v-72ef4ef1>5.2</span></div></div><div class="divider" data-v-72ef4ef1></div><div class="asset-actions" data-v-72ef4ef1><button class="btn btn-outline w-full" data-v-72ef4ef1>Симуляция</button></div>',3))])])):c("",!0),e[18]||(e[18]=p('<div class="card" data-v-72ef4ef1><div class="card-header" data-v-72ef4ef1><h3 data-v-72ef4ef1>Оптимизация портфеля</h3><button class="icon-btn-sm" title="Reset" data-v-72ef4ef1>↺</button></div><div class="card-body" data-v-72ef4ef1><div class="settings-form" data-v-72ef4ef1><div class="form-group" data-v-72ef4ef1><label class="form-label" data-v-72ef4ef1>Модель Оптимизации</label><div class="select-wrapper" data-v-72ef4ef1><select class="form-control" data-v-72ef4ef1><option data-v-72ef4ef1>Mean-Variance (Markowitz)</option><option data-v-72ef4ef1>Black-Litterman Model</option><option data-v-72ef4ef1>Risk Parity (ERC)</option><option data-v-72ef4ef1>Hierarchical Risk Parity</option></select><span class="select-arrow" data-v-72ef4ef1>▼</span></div></div><div class="form-group" data-v-72ef4ef1><div class="label-row" data-v-72ef4ef1><label class="form-label" data-v-72ef4ef1>Весовые Ограничения</label><span class="label-hint" data-v-72ef4ef1>Min - Max %</span></div><div class="range-inputs" data-v-72ef4ef1><div class="input-suffix" data-v-72ef4ef1><input type="number" value="0" class="input-box" data-v-72ef4ef1><span class="suffix" data-v-72ef4ef1>%</span></div><span class="separator" data-v-72ef4ef1>to</span><div class="input-suffix" data-v-72ef4ef1><input type="number" value="25" class="input-box" data-v-72ef4ef1><span class="suffix" data-v-72ef4ef1>%</span></div></div></div><div class="form-group" data-v-72ef4ef1><div class="label-row" data-v-72ef4ef1><label class="form-label" data-v-72ef4ef1>Целевая волатильность</label><span class="val-display" data-v-72ef4ef1>15%</span></div><div class="slider-container" data-v-72ef4ef1><input type="range" class="range-slider" min="5" max="30" value="15" data-v-72ef4ef1><div class="range-scale" data-v-72ef4ef1><span data-v-72ef4ef1>5%</span><span class="center-tick" data-v-72ef4ef1>15%</span><span data-v-72ef4ef1>30%</span></div></div></div><div class="form-group checkbox-group" data-v-72ef4ef1><label class="checkbox-container" data-v-72ef4ef1><input type="checkbox" checked data-v-72ef4ef1><div class="checkmark" data-v-72ef4ef1></div><span class="checkbox-label" data-v-72ef4ef1>Ребалансировать веса текущего портфеля</span></label></div><button class="btn btn-primary w-full mt-2" data-v-72ef4ef1>Запустить оптимизацию</button></div></div></div>',1))])])]))}}),[["__scopeId","data-v-72ef4ef1"]]),vs={key:0,class:"scrub-prefix"},us={class:"scrub-value"},ps={key:1,class:"scrub-suffix"},fs=ma(a({__name:"ScrubInput",props:{modelValue:{type:Number,required:!0},step:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},decimals:{type:Number,default:0},prefix:{type:String,default:""},suffix:{type:String,default:""},sensitivity:{type:Number,default:1}},emits:["update:modelValue","change"],setup(a,{emit:s}){const l=a,i=s,r=e(!1);let v=0,u=0;const p=k(()=>l.modelValue.toFixed(l.decimals)),f=a=>{r.value=!0,v=a.clientX,u=l.modelValue,document.body.style.cursor="ew-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",b),window.addEventListener("mouseup",h)},b=a=>{if(!r.value)return;const e=a.clientX-v;let s=u+e*l.sensitivity*l.step;s<l.min&&(s=l.min),s>l.max&&(s=l.max),i("update:modelValue",s),i("change",s)},h=()=>{r.value=!1,document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",h)};return t(()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",h)}),(e,s)=>(g(),d("div",{class:o(["scrub-container",{dragging:r.value}]),onMousedown:f},[a.prefix?(g(),d("span",vs,m(a.prefix),1)):c("",!0),n("span",us,m(p.value),1),a.suffix?(g(),d("span",ps,m(a.suffix),1)):c("",!0)],34))}}),[["__scopeId","data-v-900d5ddf"]]),bs={class:"page-container"},ms={class:"section-header"},hs={class:"header-actions"},gs={class:"mc-grid-layout"},ys={class:"controls-column"},ks={class:"card glass-panel settings-card"},xs={class:"controls-form"},ws={class:"input-group"},Cs={class:"input-group"},Ps={class:"input-group"},Ms={class:"row-2-col"},Ss={class:"input-group"},_s={class:"input-group"},Vs=["disabled"],Rs={key:0},Is={key:1},Ts={key:0,class:"card glass-panel stats-card"},Fs={class:"simple-list"},Us={class:"mono text-red"},Ds={class:"mono text-green"},As={class:"mono text-blue"},Ls={class:"viz-column"},Bs={class:"metrics-row"},Es={class:"kpi-card-mini"},Ys={class:"kpi-card-mini"},$s={class:"kpi-val text-red"},Ns={class:"kpi-card-mini"},Os={class:"kpi-val text-green"},zs={class:"kpi-card-mini"},Hs={class:"kpi-val text-blue"},qs={class:"text-sm text-muted"},js={class:"card glass-panel chart-panel"},Qs={class:"chart-header"},Gs={key:0,class:"live-badge"},Ws={key:0,class:"playback-controls"},Ks={key:0},Xs={key:1},Zs={class:"timeline-wrapper"},Js=["max"],al={class:"chart-container",ref:"chartContainer"},el={key:0,viewBox:"0 0 1000 400",preserveAspectRatio:"none",class:"main-svg"},sl=["y1","y2"],ll=["d"],tl=["d"],dl=["d"],il=["d"],nl=["d"],cl=["x1","x2"],ol={key:1,class:"empty-chart"},rl={key:0,class:"spinner-large"},vl={key:1},ul=ma(a({__name:"MonteCarlo",setup(a){const v=ga(),u=e(!1),p=s({startPrice:100,volatility:15.5,drift:8,days:252,paths:1e3,model:"gbm"}),h=e(0),y=e(!1);let k=null;const x=e(null),w=s({paths:[],displayPaths:[],medianPath:[],q05:[],q95:[],minY:0,maxY:200}),S=()=>{F(),U(),h.value>=p.days&&(h.value=p.days)},_=async()=>{if(u.value)return;u.value=!0,x.value=null,R();const a=v.addTask(`Monte Carlo (${p.paths} paths)`,"simulation");try{let e=0;const s=setInterval(()=>{e+=10,v.updateProgress(a,e),e>=100&&(clearInterval(s),F(),U(),u.value=!1,h.value=0,V())},150)}catch(e){v.failTask(a),u.value=!1}},V=()=>{y.value?R():(h.value>=p.days&&(h.value=0),y.value=!0,T())},R=()=>{y.value=!1,k&&cancelAnimationFrame(k)},I=()=>{R(),h.value=0},T=()=>{if(!y.value)return;const a=h.value+2;a>=p.days?(h.value=p.days,R()):(h.value=a,k=requestAnimationFrame(T))},F=()=>{const{startPrice:a,volatility:e,drift:s,days:l,paths:t}=p,d=1/252,i=s/100,n=e/100,c=[];for(let p=0;p<t;p++){const e=[a];let s=a;for(let a=1;a<=l;a++){const a=D(),l=(i-.5*n*n)*d,t=n*Math.sqrt(d)*a;s*=Math.exp(l+t),e.push(s)}c.push(e)}const o=l+1,r=[],v=[],u=[];let f=a,b=a;for(let p=0;p<o;p++){const a=c.map(a=>a[p]).sort((a,e)=>a-e),e=a[Math.floor(.5*t)],s=a[Math.floor(.05*t)],l=a[Math.floor(.95*t)];r.push(e),v.push(s),u.push(l),s<f&&(f=s),l>b&&(b=l)}w.paths=c,w.displayPaths=c.slice(0,50),w.medianPath=r,w.q05=v,w.q95=u,w.minY=.9*f,w.maxY=1.1*b,y.value||(h.value=l)},U=()=>{const a=w.paths.map(a=>a[a.length-1]);a.sort((a,e)=>a-e);const e=a.length,s=a.reduce((a,e)=>a+e,0)/e,l=a[Math.floor(.05*e)],t=a.filter(a=>a>p.startPrice).length;x.value={mean:s,min:a[0],max:a[e-1],median:a[Math.floor(.5*e)],var95:l,meanChange:((s-p.startPrice)/p.startPrice*100).toFixed(2),realizedVol:p.volatility,winProb:(t/e*100).toFixed(1)}},D=()=>{let a=0,e=0;for(;0===a;)a=Math.random();for(;0===e;)e=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*e)},A=a=>a/p.days*1e3,L=a=>{const e=w.maxY-w.minY;return 400-400*((a-w.minY)/e)},B=(a,e)=>{if(!a.length)return"";return"M "+a.slice(0,e+1).map((a,e)=>`${A(e).toFixed(1)},${L(a).toFixed(1)}`).join(" L ")},E=(a,e,s)=>{if(!a.length)return"";const l=a.slice(0,s+1),t=e.slice(0,s+1);let d="M "+l.map((a,e)=>`${A(e).toFixed(1)},${L(a).toFixed(1)}`).join(" L ");for(let i=t.length-1;i>=0;i--)d+=` L ${A(i).toFixed(1)},${L(t[i]).toFixed(1)}`;return d+=" Z",d},Y=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a);return t(()=>{k&&cancelAnimationFrame(k)}),l(()=>{}),(a,e)=>{return g(),d("div",bs,[n("div",ms,[e[6]||(e[6]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Симуляция траекторий методом Монте-Карло"),n("p",{class:"section-subtitle"},"Генерация стохастических сценариев и оценка хвостовых рисков")],-1)),n("div",hs,[n("span",{class:o(["status-badge",u.value?"pulse":""])},[n("span",{class:o(["dot",u.value?"bg-orange":"bg-green"])},null,2),C(" "+m(u.value?"Вычисление...":"Готов к запуску"),1)],2)])]),n("div",gs,[n("aside",ys,[n("div",ks,[e[13]||(e[13]=n("div",{class:"panel-header-sm"},[n("h3",null,"Параметры модели")],-1)),n("div",xs,[n("div",ws,[e[7]||(e[7]=n("label",{class:"lbl"},"Начальная цена (S₀)",-1)),r(fs,{modelValue:p.startPrice,"onUpdate:modelValue":e[0]||(e[0]=a=>p.startPrice=a),step:1,min:1,max:5e3,prefix:"$",onChange:S},null,8,["modelValue"])]),n("div",Cs,[e[8]||(e[8]=n("label",{class:"lbl"},"Волатильность (σ)",-1)),r(fs,{modelValue:p.volatility,"onUpdate:modelValue":e[1]||(e[1]=a=>p.volatility=a),step:.5,min:1,max:200,decimals:1,suffix:"%",onChange:S},null,8,["modelValue"])]),n("div",Ps,[e[9]||(e[9]=n("label",{class:"lbl"},"Ожидаемая доходность (μ)",-1)),r(fs,{modelValue:p.drift,"onUpdate:modelValue":e[2]||(e[2]=a=>p.drift=a),step:.5,min:-50,max:100,decimals:1,suffix:"%",onChange:S},null,8,["modelValue"])]),e[12]||(e[12]=n("div",{class:"divider"},null,-1)),n("div",Ms,[n("div",Ss,[e[10]||(e[10]=n("label",{class:"lbl"},"Горизонт (T)",-1)),P(n("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>p.days=a),type:"number",class:"glass-input",placeholder:"252"},null,512),[[M,p.days,void 0,{number:!0}]])]),n("div",_s,[e[11]||(e[11]=n("label",{class:"lbl"},"Количество путей (N)",-1)),P(n("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>p.paths=a),type:"number",step:"1000",class:"glass-input"},null,512),[[M,p.paths,void 0,{number:!0}]])])]),n("button",{onClick:_,disabled:u.value,class:"btn btn-primary-gradient btn-full-width"},[u.value?(g(),d("span",Is,"Расчет...")):(g(),d("span",Rs,"Запустить симуляцию"))],8,Vs)])]),x.value?(g(),d("div",Ts,[e[17]||(e[17]=n("div",{class:"panel-header-sm"},[n("h3",null,"Статистика прогона")],-1)),n("ul",Fs,[n("li",null,[e[14]||(e[14]=n("span",null,"Мин. значение",-1)),n("span",Us,m(Y(x.value.min)),1)]),n("li",null,[e[15]||(e[15]=n("span",null,"Макс. значение",-1)),n("span",Ds,m(Y(x.value.max)),1)]),n("li",null,[e[16]||(e[16]=n("span",null,"Медиана",-1)),n("span",As,m(Y(x.value.median)),1)])])])):c("",!0)]),n("main",Ls,[n("div",Bs,[n("div",Es,[e[18]||(e[18]=n("span",{class:"kpi-lbl"},"Математическое ожидание (E)",-1)),n("span",{class:o(["kpi-val",(s=x.value?.meanChange,("string"==typeof s?parseFloat(s):s)>0?"text-green":"text-red")])},m(x.value?Y(x.value.mean):"—"),3)]),n("div",Ys,[e[19]||(e[19]=n("span",{class:"kpi-lbl"},"VaR (95%)",-1)),n("span",$s,m(x.value?Y(x.value.var95):"—"),1)]),n("div",Ns,[e[20]||(e[20]=n("span",{class:"kpi-lbl"},"Вероятность роста",-1)),n("span",Os,m(x.value?x.value.winProb+"%":"—"),1)]),n("div",zs,[e[21]||(e[21]=n("span",{class:"kpi-lbl"},"Текущий день симуляции",-1)),n("span",Hs,[C(m(h.value)+" ",1),n("span",qs,"/ "+m(p.days),1)])])]),n("div",js,[n("div",Qs,[n("h3",null,[e[22]||(e[22]=C(" Траектории симуляции ",-1)),y.value?(g(),d("span",Gs,"● LIVE PLAYBACK")):c("",!0)]),w.paths.length?(g(),d("div",Ws,[n("button",{class:"icon-btn",onClick:V,title:"Play/Pause"},[y.value?(g(),d("span",Ks,"⏸")):(g(),d("span",Xs,"▶"))]),n("div",Zs,[P(n("input",{type:"range",min:"0",max:p.days,"onUpdate:modelValue":e[5]||(e[5]=a=>h.value=a),onInput:R,class:"timeline-slider"},null,40,Js),[[M,h.value,void 0,{number:!0}]]),n("div",{class:"timeline-track",style:f({width:h.value/p.days*100+"%"})},null,4)]),n("button",{class:"icon-btn",onClick:I,title:"Reset"},"↺")])):c("",!0)]),n("div",al,[w.paths.length>0?(g(),d("svg",el,[e[23]||(e[23]=n("line",{x1:"0",y1:"350",x2:"1000",y2:"350",stroke:"rgba(255,255,255,0.05)"},null,-1)),e[24]||(e[24]=n("line",{x1:"0",y1:"200",x2:"1000",y2:"200",stroke:"rgba(255,255,255,0.05)"},null,-1)),e[25]||(e[25]=n("line",{x1:"0",y1:"50",x2:"1000",y2:"50",stroke:"rgba(255,255,255,0.05)"},null,-1)),n("line",{x1:"0",y1:L(p.startPrice),x2:"1000",y2:L(p.startPrice),stroke:"rgba(255,255,255,0.3)","stroke-dasharray":"4"},null,8,sl),(g(!0),d(i,null,b(w.displayPaths,(a,e)=>(g(),d("path",{key:`path-${e}`,d:B(a,h.value),fill:"none",stroke:"rgba(59, 130, 246, 0.15)","stroke-width":"1"},null,8,ll))),128)),n("path",{d:E(w.q05,w.q95,h.value),fill:"rgba(59, 130, 246, 0.1)",stroke:"none"},null,8,tl),n("path",{d:B(w.medianPath,h.value),fill:"none",stroke:"#3b82f6","stroke-width":"3"},null,8,dl),n("path",{d:B(w.q05,h.value),fill:"none",stroke:"#f87171","stroke-width":"1.5","stroke-dasharray":"4"},null,8,il),n("path",{d:B(w.q95,h.value),fill:"none",stroke:"#34d399","stroke-width":"1.5","stroke-dasharray":"4"},null,8,nl),h.value>0?(g(),d("line",{key:0,x1:A(h.value),y1:"0",x2:A(h.value),y2:"400",stroke:"rgba(255,255,255,0.4)","stroke-dasharray":"2"},null,8,cl)):c("",!0)])):(g(),d("div",ol,[u.value?(g(),d("div",rl)):(g(),d("span",vl,"Запустите симуляцию для отображения графиков"))]))],512)])])])]);var s}}}),[["__scopeId","data-v-866551bd"]]),pl={class:"page-container"},fl={class:"section-header"},bl={class:"header-actions"},ml={class:"glass-panel-mini"},hl={class:"last-update"},gl=["disabled"],yl={key:0,width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kl={key:1,class:"spinner-mini"},xl={class:"kpi-cards-grid"},wl={class:"kpi-card"},Cl={class:"kpi-label"},Pl={class:"kpi-value text-red"},Ml={class:"kpi-sub"},Sl={class:"text-white font-bold"},_l={class:"kpi-card"},Vl={class:"kpi-value text-orange"},Rl={class:"dashboard-grid"},Il={class:"col-left"},Tl={class:"card glass-panel"},Fl={class:"risk-table-wrapper"},Ul={class:"simple-table"},Dl={class:"pl-0"},Al={class:"asset-row"},Ll={class:"sym"},Bl={class:"text-right mono"},El={class:"text-right mono text-red"},Yl={class:"text-right pr-0"},$l={class:"bar-cell"},Nl={class:"progress-bar"},Ol={class:"mono bar-val"},zl={class:"card glass-panel"},Hl={class:"panel-header"},ql=["disabled"],jl={class:"stress-list"},Ql={class:"stress-info"},Gl={class:"stress-name"},Wl={class:"stress-desc"},Kl={class:"stress-result"},Xl={class:"card glass-panel"},Zl={class:"correlation-matrix-grid"},Jl={class:"matrix-cell header"},at={class:"col-right"},et={class:"card glass-panel"},st={class:"factor-list"},lt={class:"lbl-group"},tt={class:"lbl"},dt={class:"sub-lbl"},it={class:"val-group"},nt=ma(a({__name:"GreekParameters",setup(a){const s=ga(),l=e("1d"),t=e(!1),c=e(!1),v=e((new Date).toLocaleTimeString()),u=e(99),h=k(()=>(1.645+(u.value-95)/4*.685)/2.33*-67500),y=e([{symbol:"SPY",weight:40,contribution:27e3,percentRisk:45,color:"#3b82f6"},{symbol:"QQQ",weight:30,contribution:21e3,percentRisk:35,color:"#8b5cf6"},{symbol:"GLD",weight:15,contribution:4500,percentRisk:7.5,color:"#fbbf24"},{symbol:"TLT",weight:15,contribution:7500,percentRisk:12.5,color:"#ef4444"}]),x=e([{id:1,name:"Финансовый Кризис 2008",description:"Повторение рыночного краха",impact:-452e3,impactPct:-.25},{id:2,name:"Скачок Инфляции",description:"Рост ставок +200 б.п.",impact:-125e3,impactPct:-.07},{id:3,name:"Падение Нефти",description:"Нефть Brent < $40",impact:-35e3,impactPct:-.02},{id:4,name:"Рост Волатильности",description:"VIX > 40",impact:-85e3,impactPct:-.045}]),w=e([{name:"Market Risk",index:"S&P 500",beta:.85},{name:"Interest Rates",index:"US 10Y Treasury",beta:-.42},{name:"Momentum",index:"MTUM ETF",beta:.25},{name:"Volatility",index:"VIX Index",beta:-.65},{name:"Commodities",index:"BCOM Index",beta:.12}]),M=e(["SPY","QQQ","TLT","GLD","BTC"]),S=e([[1,.92,-.35,.15,.45],[.92,1,-.42,.1,.55],[-.35,-.42,1,.25,-.15],[.15,.1,.25,1,.2],[.45,.55,-.15,.2,1]]),_=a=>"$"+Math.abs(a).toLocaleString("en-US",{maximumFractionDigits:0}),V=a=>{let e="rgba(255,255,255,0.02)",s="rgba(255,255,255,0.6)";if(1===a)e="rgba(255,255,255,0.1)",s="#fff";else if(a>0){e=`rgba(59, 130, 246, ${.5*a})`,s="#bfdbfe"}else if(a<0){e=`rgba(239, 68, 68, ${.5*Math.abs(a)})`,s="#fca5a5"}return{background:e,color:s}},R=async()=>{if(t.value)return;t.value=!0;const a=s.addTask("Updating Risk Metrics...","calculation");try{s.updateProgress(a,20),await new Promise(a=>setTimeout(a,600)),s.updateProgress(a,60),await new Promise(a=>setTimeout(a,400)),s.updateProgress(a,100),v.value=(new Date).toLocaleTimeString()}catch(e){s.failTask(a)}finally{t.value=!1}},T=async()=>{if(c.value)return;c.value=!0;const a=s.addTask("Running Factor Stress Tests...","simulation");try{for(let e=0;e<=100;e+=10)await new Promise(a=>setTimeout(a,150)),s.updateProgress(a,e)}catch(e){s.failTask(a)}finally{c.value=!1}};return(a,e)=>(g(),d("div",pl,[n("div",fl,[e[5]||(e[5]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Риск-метрики портфеля"),n("p",{class:"section-subtitle"},"Продвинутый анализ рисков, факторный анализ")],-1)),n("div",bl,[n("div",ml,[e[2]||(e[2]=n("span",{class:"lbl-mini"},"Уровень доверия:",-1)),r(fs,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),min:90,max:99.9,step:.1,decimals:1,suffix:"%",class:"text-accent"},null,8,["modelValue"])]),n("div",hl,"Данные на: "+m(v.value),1),P(n("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),class:"glass-select"},[...e[3]||(e[3]=[p('<option value="1d" data-v-7e21077b>Горизонт: 1 день</option><option value="10d" data-v-7e21077b>Горизонт: 10 дней</option><option value="1m" data-v-7e21077b>Горизонт: 1 месяц</option><option value="2m" data-v-7e21077b>Горизонт: 2 месяца</option><option value="6m" data-v-7e21077b>Горизонт: 6 месяцев</option><option value="1y" data-v-7e21077b>Горизонт: 1 год</option><option value="2y" data-v-7e21077b>Горизонт: 2 года</option><option value="5y" data-v-7e21077b>Горизонт: 5 лет</option>',8)])],512),[[I,l.value]]),n("button",{class:"btn btn-outline",onClick:R,disabled:t.value},[t.value?(g(),d("span",kl)):(g(),d("svg",yl,[...e[4]||(e[4]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),C(" "+m(t.value?"Расчет...":"Обновить"),1)],8,gl)])]),n("div",xl,[n("div",wl,[n("div",Cl,"VaR "+m(u.value)+"% (Value at Risk)",1),n("div",Pl,m(_(h.value)),1),n("div",Ml,[e[6]||(e[6]=n("span",{class:"text-muted"},"от капитала:",-1)),e[7]||(e[7]=C()),n("span",Sl,m((Math.abs(h.value)/24e5*100).toFixed(2))+"%",1)])]),n("div",_l,[e[8]||(e[8]=n("div",{class:"kpi-label"},"Expected Shortfall (CVaR)",-1)),n("div",Vl,m(_(1.25*h.value)),1),e[9]||(e[9]=n("div",{class:"kpi-sub"},[n("span",{class:"text-muted"},"средний хвост")],-1))]),e[10]||(e[10]=p('<div class="kpi-card" data-v-7e21077b><div class="kpi-label" data-v-7e21077b>Бэта портфеля (β)</div><div class="kpi-value text-gradient-blue" data-v-7e21077b>0.85</div><div class="kpi-sub" data-v-7e21077b><span class="text-muted" data-v-7e21077b>vs IMOEX</span></div></div><div class="kpi-card" data-v-7e21077b><div class="kpi-label" data-v-7e21077b>Коэффициент Шарпа</div><div class="kpi-value text-gradient-green" data-v-7e21077b>1.42</div><div class="kpi-sub" data-v-7e21077b><span class="text-muted" data-v-7e21077b>Коэффициент Сортино:</span> <span class="text-white" data-v-7e21077b>2.15</span></div></div>',2))]),n("div",Rl,[n("div",Il,[n("div",Tl,[e[13]||(e[13]=n("div",{class:"panel-header"},[n("h3",null,"Декомпозиция рисков"),n("div",{class:"badge-info"},"Marginal VaR")],-1)),n("div",Fl,[n("table",Ul,[e[11]||(e[11]=n("colgroup",null,[n("col",{style:{width:"25%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"25%"}}),n("col",{style:{width:"30%"}})],-1)),e[12]||(e[12]=n("thead",null,[n("tr",null,[n("th",{class:"text-left pl-0"},"Актив"),n("th",{class:"text-right"},"Вес"),n("th",{class:"text-right"},"Доля риска"),n("th",{class:"text-right pr-0"},"% от Риска")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(y.value,a=>(g(),d("tr",{key:a.symbol},[n("td",Dl,[n("div",Al,[n("span",{class:"dot",style:f({background:a.color})},null,4),n("span",Ll,m(a.symbol),1)])]),n("td",Bl,m(a.weight)+"%",1),n("td",El,"$"+m((a.contribution/1e3).toFixed(1))+"k",1),n("td",Yl,[n("div",$l,[n("div",Nl,[n("div",{class:"progress-fill",style:f({width:a.percentRisk+"%"})},null,4)]),n("span",Ol,m(a.percentRisk)+"%",1)])])]))),128))])])])]),n("div",zl,[n("div",Hl,[e[14]||(e[14]=n("h3",null,"Стресс-тестирование",-1)),n("button",{onClick:T,class:"btn-xs",disabled:c.value},m(c.value?"Моделирование...":"Запустить Тест"),9,ql)]),n("div",jl,[(g(!0),d(i,null,b(x.value,a=>(g(),d("div",{key:a.id,class:"stress-item"},[n("div",Ql,[n("span",Gl,m(a.name),1),n("span",Wl,m(a.description),1)]),n("div",Kl,[n("span",{class:o(["stress-val",a.impact>0?"text-green":"text-red"])},m(a.impact>0?"+":"")+m(_(a.impact)),3),n("span",{class:o(["stress-pct",a.impactPct>0?"text-green":"text-red"])},m(a.impactPct>0?"+":"")+m((100*a.impactPct).toFixed(2))+"% ",3)])]))),128))])]),n("div",Xl,[e[16]||(e[16]=n("div",{class:"panel-header"},[n("h3",null,"Матрица корреляции активов портфеля"),n("div",{class:"legend"},[n("span",{class:"dot-legend bg-blue"}),C(" Положительная "),n("span",{class:"dot-legend bg-red"}),C(" Отрицательная ")])],-1)),n("div",Zl,[e[15]||(e[15]=n("div",{class:"matrix-cell empty"},null,-1)),(g(!0),d(i,null,b(M.value,a=>(g(),d("div",{key:a,class:"matrix-cell header"},m(a),1))),128)),(g(!0),d(i,null,b(S.value,(a,e)=>(g(),d(i,{key:"row-"+e},[n("div",Jl,m(M.value[e]),1),(g(!0),d(i,null,b(a,(a,s)=>(g(),d("div",{key:e+"-"+s,class:"matrix-cell value",style:f(V(a))},m(a.toFixed(2)),5))),128))],64))),128))])])]),n("div",at,[n("div",et,[e[18]||(e[18]=n("div",{class:"panel-header"},[n("h3",null,"Факторный Анализ")],-1)),n("div",st,[(g(!0),d(i,null,b(w.value,a=>{return g(),d("div",{class:"list-row",key:a.name},[n("div",lt,[n("span",tt,m(a.name),1),n("span",dt,m(a.index),1)]),n("div",it,[n("span",{class:o(["val",(s=a.beta,Math.abs(s)>.5?"font-bold text-white":"text-muted")])},m(a.beta>0?"+":"")+m(a.beta.toFixed(2)),3),e[17]||(e[17]=n("span",{class:"diff text-muted"},"β",-1))])]);var s}),128))])]),e[19]||(e[19]=p('<div class="card glass-panel" data-v-7e21077b><div class="panel-header" data-v-7e21077b><h3 data-v-7e21077b>Анализ Просадок</h3></div><div class="metrics-kv-list" data-v-7e21077b><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Текущая просадка</span><span class="v text-red" data-v-7e21077b>-3.45%</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Макс. просадка</span><span class="v text-red font-bold" data-v-7e21077b>-12.40%</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Дней в просадке</span><span class="v" data-v-7e21077b>14 дней</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Фактор восстановления</span><span class="v text-green" data-v-7e21077b>3.2x</span></div></div></div><div class="card glass-panel" data-v-7e21077b><div class="panel-header" data-v-7e21077b><h3 data-v-7e21077b>Ликвидность</h3></div><div class="metrics-kv-list" data-v-7e21077b><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Ожидаемое время до ликвидации при VaR 95%</span><span class="v" data-v-7e21077b>1.2 дня</span></div><div class="kv-row" data-v-7e21077b><span class="k" data-v-7e21077b>Bid-Ask Spread Cost</span><span class="v text-orange" data-v-7e21077b>0.08%</span></div></div></div>',2))])])]))}}),[["__scopeId","data-v-7e21077b"]]),ct={class:"page-container"},ot={class:"section-header"},rt={class:"header-right"},vt={class:"sensitivity-control glass-panel-mini"},ut=["disabled"],pt={key:0,width:"14",height:"14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ft={key:1,class:"spinner-mini"},bt={class:"scenarios-grid"},mt=["onClick"],ht={class:"sc-header"},gt={class:"sc-name"},yt={class:"sc-desc"},kt={class:"sc-footer"},xt={class:"sc-prob"},wt={key:0,class:"dashboard-grid"},Ct={class:"col-left"},Pt={class:"card glass-panel"},Mt={class:"panel-header"},St={class:"impact-metrics-grid"},_t={class:"metric-box"},Vt={class:"val text-red"},Rt={class:"metric-box"},It={class:"metric-box"},Tt={class:"val text-white"},Ft={class:"metric-box"},Ut={class:"val text-orange"},Dt={class:"impact-bars-list"},At={class:"bar-label"},Lt={class:"bar-track"},Bt={class:"stats-grid-row"},Et={class:"stat-box"},Yt={class:"val-sm text-red"},$t={class:"stat-box"},Nt={class:"val-sm text-red"},Ot={class:"stat-box"},zt={class:"val-sm text-orange"},Ht={class:"col-right"},qt={class:"card glass-panel sticky-panel"},jt={class:"market-changes-list"},Qt={class:"m-key"},Gt={class:"info-block"},Wt={class:"text-xs text-muted"},Kt={class:"text-white"},Xt={class:"card glass-panel"},Zt={class:"table-wrapper"},Jt={class:"metrics-table"},ad=["onClick"],ed={class:"col-left"},sd={class:"sc-name-sm"},ld={class:"text-muted"},td={class:"text-orange"},dd=ma(a({__name:"StressTesting",setup(a){const s=ga(),l=e(!1),t=e(1),v=e([{id:1,name:"«Чёрный лебедь»",description:"Рыночный крах, подобный COVID-19",pnlImpact:-185e3,varChange:-45.5,duration:"1–3 дня",probability:.01,severity:"critical",marketChanges:{"Волатильность":"+25%","Доходность облигаций":"+150 б.п.","Корреляция":"+0.50","Спред":"+100 б.п."},assetImpact:{"Акции":-35,"Облигации":-12,"Товары":-25,"Валюта":-8}},{id:2,name:"Скачок волатильности",description:"Резкий рост ожидаемой волатильности (VIX)",pnlImpact:-67500,varChange:-18.2,duration:"1–5 дней",probability:.05,severity:"high",marketChanges:{VIX:"+20 пп","Размах торгов":"+15%","Ликвидность":"-10%"},assetImpact:{"Акции":-18,"Облигации":-5,"Опционы":-40,"Валюта":-3}},{id:3,name:"Рост ставок",description:"ЦБ неожиданно поднял ставку на 100 б.п.",pnlImpact:-45200,varChange:-12.5,duration:"1–10 дней",probability:.15,severity:"high",marketChanges:{"Ставка ЦБ":"+100 б.п.","Спреды":"+50 б.п.","Курс":"-5%"},assetImpact:{"Акции":-12,"Облигации":-22,"Недвижимость":-15,"Валюта":-6}},{id:4,name:"Коррекция рынка",description:"Умеренное снижение, обычная корректировка",pnlImpact:-12400,varChange:-5.2,duration:"5–20 дней",probability:.35,severity:"medium",marketChanges:{"Индекс":"-8%","Волатильность":"+10%","Спреды":"+20 б.п."},assetImpact:{"Акции":-8,"Облигации":2,"Товары":-5,"Валюта":-2}}]),u=e(v.value[0]),p=a=>u.value=a,h=a=>a*t.value,y=a=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(a),x=a=>(a/1e3).toFixed(0)+"k",w=a=>a.charAt(0).toUpperCase()+a.slice(1),P=k(()=>v.value.reduce((a,e)=>a+e.pnlImpact,0)/v.value.length),M=k(()=>Math.min(...v.value.map(a=>a.pnlImpact))),S=k(()=>v.value.reduce((a,e)=>a+e.pnlImpact*e.probability,0)),_=async()=>{if(l.value)return;l.value=!0;const a=s.addTask("Simulating Stress Scenarios...","simulation");try{for(let e=0;e<=100;e+=25)await new Promise(a=>setTimeout(a,300)),s.updateProgress(a,e)}catch(e){s.failTask(a)}finally{l.value=!1}};return(a,e)=>(g(),d("div",ct,[n("div",ot,[e[3]||(e[3]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Стресс-тестирование"),n("p",{class:"section-subtitle"},"Сценарии экстремальных рыночных условий")],-1)),n("div",rt,[n("div",vt,[e[1]||(e[1]=n("span",{class:"lbl"},"Множитель шока:",-1)),r(fs,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a),step:.1,min:.5,max:3,decimals:1,suffix:"x",class:"text-accent"},null,8,["modelValue"])]),n("button",{onClick:_,class:"btn btn-primary-gradient",disabled:l.value},[l.value?(g(),d("span",ft)):(g(),d("svg",pt,[...e[2]||(e[2]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"},null,-1),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),C(" "+m(l.value?"Тестирую...":"Запустить все"),1)],8,ut)])]),n("div",bt,[(g(!0),d(i,null,b(v.value,a=>(g(),d("div",{key:a.id,onClick:e=>p(a),class:o(["card scenario-card",{active:u.value?.id===a.id}])},[e[4]||(e[4]=n("div",{class:"card-glow"},null,-1)),n("div",ht,[n("span",gt,m(a.name),1),n("span",{class:o(["badge",a.severity])},m(a.severity),3)]),n("p",yt,m(a.description),1),n("div",kt,[n("span",{class:o(["sc-impact",h(a.pnlImpact)<0?"text-red":"text-green"])},m(x(h(a.pnlImpact))),3),n("span",xt,"Вероятность: "+m((100*a.probability).toFixed(0))+"%",1)])],10,mt))),128))]),u.value?(g(),d("div",wt,[n("div",Ct,[n("div",Pt,[n("div",Mt,[n("h3",null,"Влияние сценария: "+m(u.value.name),1)]),n("div",St,[n("div",_t,[e[5]||(e[5]=n("span",{class:"lbl"},"P&L Impact",-1)),n("span",Vt,m(y(h(u.value.pnlImpact))),1)]),n("div",Rt,[e[6]||(e[6]=n("span",{class:"lbl"},"Изменение VaR",-1)),n("span",{class:o(["val",u.value.varChange<0?"text-red":"text-green"])},m((u.value.varChange*t.value).toFixed(1))+"% ",3)]),n("div",It,[e[7]||(e[7]=n("span",{class:"lbl"},"Длительность",-1)),n("span",Tt,m(u.value.duration),1)]),n("div",Ft,[e[8]||(e[8]=n("span",{class:"lbl"},"Вероятность",-1)),n("span",Ut,m((100*u.value.probability).toFixed(1))+"%",1)])]),e[12]||(e[12]=n("div",{class:"divider"},null,-1)),e[13]||(e[13]=n("div",{class:"panel-header"},[n("h3",null,"Влияние на активы")],-1)),n("div",Dt,[(g(!0),d(i,null,b(u.value.assetImpact,(a,e)=>(g(),d("div",{key:e,class:"bar-row"},[n("span",At,m(e),1),n("div",Lt,[n("div",{class:o(["bar-fill",a<0?"bg-red":"bg-green"]),style:f({width:Math.min(100,Math.abs(a*t.value*1.5))+"%"})},null,6)]),n("span",{class:o(["bar-val",a<0?"text-red":"text-green"])},m(a>0?"+":"")+m((a*t.value).toFixed(1))+"% ",3)]))),128))]),e[14]||(e[14]=n("div",{class:"divider"},null,-1)),e[15]||(e[15]=n("div",{class:"panel-header"},[n("h3",null,"Статистика риска")],-1)),n("div",Bt,[n("div",Et,[e[9]||(e[9]=n("span",{class:"lbl-sm"},"Средний убыток",-1)),n("span",Yt,m(x(P.value*t.value)),1)]),n("div",$t,[e[10]||(e[10]=n("span",{class:"lbl-sm"},"Макс. просадка",-1)),n("span",Nt,m(x(M.value*t.value)),1)]),n("div",Ot,[e[11]||(e[11]=n("span",{class:"lbl-sm"},"Ожидаемый убыток",-1)),n("span",zt,m(x(S.value*t.value)),1)])])])]),n("aside",Ht,[n("div",qt,[e[18]||(e[18]=n("div",{class:"panel-header"},[n("h3",null,"Рыночные условия")],-1)),n("div",jt,[(g(!0),d(i,null,b(u.value.marketChanges,(a,e)=>(g(),d("div",{key:e,class:"market-row"},[n("span",Qt,m(w(e)),1),n("span",{class:o(["m-val",a.includes("-")?"text-red":"text-green"])},m(a),3)]))),128))]),e[19]||(e[19]=n("div",{class:"divider"},null,-1)),n("div",Gt,[n("p",Wt,[e[16]||(e[16]=C(" Данные пересчитаны с учетом коэффициента шока: ",-1)),n("b",Kt,m(t.value.toFixed(1))+"x",1),e[17]||(e[17]=C(". ",-1))])])])])])):c("",!0),n("div",Xt,[e[21]||(e[21]=n("div",{class:"panel-header"},[n("h3",null,"Сравнение сценариев")],-1)),n("div",Zt,[n("table",Jt,[e[20]||(e[20]=n("thead",null,[n("tr",null,[n("th",{class:"col-left"},"Сценарий"),n("th",null,"P&L"),n("th",null,"Изменение VaR"),n("th",null,"Длительность"),n("th",null,"Вероятность")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(v.value,a=>(g(),d("tr",{key:a.id,class:o(["hover-row",{"row-active":u.value?.id===a.id}]),onClick:e=>p(a)},[n("td",ed,[n("span",sd,m(a.name),1)]),n("td",{class:o(a.pnlImpact<0?"text-red":"text-green")},m(y(h(a.pnlImpact))),3),n("td",{class:o(a.varChange<0?"text-red":"text-green")},m((a.varChange*t.value).toFixed(1))+"% ",3),n("td",ld,m(a.duration),1),n("td",td,m((100*a.probability).toFixed(1))+"%",1)],10,ad))),128))])])])]),e[22]||(e[22]=n("div",{class:"footer-notes"},[n("div",{class:"note-item"},"Сценарии основаны на исторических данных"),n("div",{class:"note-item"},"Корреляции могут меняться в кризис"),n("div",{class:"note-item"},"Рекомендуется ежеквартальный пересмотр")],-1))]))}}),[["__scopeId","data-v-00c5b1a7"]]),id={class:"page-container"},nd={class:"section-header"},cd={class:"segmented-control"},od=["onClick"],rd={class:"dashboard-grid"},vd={class:"col-left"},ud={class:"card glass-panel"},pd={class:"table-wrapper"},fd={class:"heatmap-table"},bd={class:"col-month"},md={class:"col-right"},hd={class:"card glass-panel"},gd={class:"drawdown-list"},yd={class:"dd-info"},kd={class:"dd-period"},xd={class:"dd-rec"},wd={class:"dd-val text-red"},Cd=ma(a({__name:"Backtesting",setup(a){const s=e(["1M","3M","6M","YTD","1Y","All"]),l=e("YTD"),t=e(["2024","2025"]),c=e(["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]),r=e([{2024:"+2.1",2025:"+1.8"},{2024:"+3.4",2025:"-1.2"},{2024:"-0.5",2025:"+2.9"},{2024:"+1.7",2025:"+0.8"},{2024:"+2.3",2025:"-0.3"},{2024:"+1.9",2025:"+1.5"},{2024:"+2.8",2025:"+2.1"},{2024:"-1.1",2025:"+0.9"},{2024:"+3.2",2025:"+1.4"},{2024:"+2.5",2025:"+3.1"},{2024:"+1.8",2025:"+2.2"},{2024:"+4.1",2025:"+2.8"}]),v=[{period:"Март 23 — Май 23",amount:-14.2,recovery:"6 мес."},{period:"Сент 23 — Окт 23",amount:-8.5,recovery:"3 мес."},{period:"Фев 24 — Март 24",amount:-5.3,recovery:"2 мес."}],u=a=>{const e=parseFloat(a);return e>3?"bg-green-strong":e>0?"bg-green":e>-2?"bg-red-soft":"bg-red-strong"};return(a,e)=>(g(),d("div",id,[n("div",nd,[e[0]||(e[0]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Результаты бэктестинга"),n("p",{class:"section-subtitle"},"Анализ исторической производительности стратегии")],-1)),n("div",cd,[(g(!0),d(i,null,b(s.value,a=>(g(),d("button",{key:a,onClick:e=>l.value=a,class:o(["seg-btn",{active:l.value===a}])},m(a),11,od))),128))])]),e[5]||(e[5]=p('<div class="kpi-cards-grid" data-v-ff8fd6e5><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>Полная доходность</div><div class="kpi-value text-gradient-green" data-v-ff8fd6e5>+24.5%</div><div class="kpi-change text-green" data-v-ff8fd6e5>vs S&amp;P 500: +18.3%</div></div><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>CAGR (Годовая)</div><div class="kpi-value text-white" data-v-ff8fd6e5>18.2%</div><div class="kpi-change text-muted" data-v-ff8fd6e5>Безрисковая: 5.0%</div></div><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>Коэф. Шарпа</div><div class="kpi-value text-gradient-blue" data-v-ff8fd6e5>1.58</div><div class="kpi-change text-blue" data-v-ff8fd6e5>Высокая эфф.</div></div><div class="kpi-card" data-v-ff8fd6e5><div class="kpi-label" data-v-ff8fd6e5>Макс. Просадка</div><div class="kpi-value text-red" data-v-ff8fd6e5>-14.2%</div><div class="kpi-change text-red" data-v-ff8fd6e5>vs Рынок: -23.5%</div></div></div><div class="card glass-panel chart-panel" data-v-ff8fd6e5><div class="panel-header" data-v-ff8fd6e5><h3 data-v-ff8fd6e5>Накопленная доходность (Equity Curve)</h3><div class="chart-legend" data-v-ff8fd6e5><div class="legend-item" data-v-ff8fd6e5><span class="dot strategy" data-v-ff8fd6e5></span>Стратегия</div><div class="legend-item" data-v-ff8fd6e5><span class="dot benchmark" data-v-ff8fd6e5></span>S&amp;P 500</div></div></div><div class="chart-container" data-v-ff8fd6e5><div class="chart-mockup" data-v-ff8fd6e5><svg viewBox="0 0 1000 200" preserveAspectRatio="none" class="mock-chart" data-v-ff8fd6e5><line x1="0" y1="50" x2="1000" y2="50" stroke="rgba(255,255,255,0.05)" data-v-ff8fd6e5></line><line x1="0" y1="100" x2="1000" y2="100" stroke="rgba(255,255,255,0.05)" data-v-ff8fd6e5></line><line x1="0" y1="150" x2="1000" y2="150" stroke="rgba(255,255,255,0.05)" data-v-ff8fd6e5></line><path d="M0,200 Q100,190 200,180 T400,170 T600,140 T800,130 T1000,90" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2" stroke-dasharray="5,5" data-v-ff8fd6e5></path><defs data-v-ff8fd6e5><linearGradient id="fade" x1="0" y1="0" x2="0" y2="1" data-v-ff8fd6e5><stop offset="0%" stop-color="rgba(74, 222, 128, 0.2)" data-v-ff8fd6e5></stop><stop offset="100%" stop-color="rgba(74, 222, 128, 0)" data-v-ff8fd6e5></stop></linearGradient></defs><path d="M0,200 Q100,180 200,150 T400,160 T600,100 T800,80 T1000,20 V200 H0" fill="url(#fade)" stroke="none" data-v-ff8fd6e5></path><path d="M0,200 Q100,180 200,150 T400,160 T600,100 T800,80 T1000,20" fill="none" stroke="#4ade80" stroke-width="2" data-v-ff8fd6e5></path></svg></div></div></div>',2)),n("div",rd,[n("div",vd,[n("div",ud,[e[2]||(e[2]=n("div",{class:"panel-header"},[n("h3",null,"Месячная доходность")],-1)),n("div",pd,[n("table",fd,[n("thead",null,[n("tr",null,[e[1]||(e[1]=n("th",{class:"col-month"},"Месяц",-1)),(g(!0),d(i,null,b(t.value,a=>(g(),d("th",{key:a,class:"col-year"},m(a),1))),128))])]),n("tbody",null,[(g(!0),d(i,null,b(c.value,(a,e)=>(g(),d("tr",{key:a},[n("td",bd,m(a),1),(g(!0),d(i,null,b(t.value,s=>(g(),d("td",{key:`${a}-${s}`,class:"col-val"},[n("div",{class:o(["val-pill",u(r.value[e][s])])},m(r.value[e][s])+"% ",3)]))),128))]))),128))])])])])]),n("div",md,[e[4]||(e[4]=p('<div class="card glass-panel" data-v-ff8fd6e5><div class="panel-header" data-v-ff8fd6e5><h3 data-v-ff8fd6e5>Статистика сделок</h3></div><div class="stats-grid-mini" data-v-ff8fd6e5><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Всего сделок</span><span class="val" data-v-ff8fd6e5>243</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Win Rate</span><span class="val text-green" data-v-ff8fd6e5>64.2%</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Profit Factor</span><span class="val text-green" data-v-ff8fd6e5>2.34</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Ср. Прибыль</span><span class="val text-green" data-v-ff8fd6e5>+$245</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Ср. Убыток</span><span class="val text-red" data-v-ff8fd6e5>-$145</span></div><div class="stat-box" data-v-ff8fd6e5><span class="lbl" data-v-ff8fd6e5>Дней в поз.</span><span class="val" data-v-ff8fd6e5>8.4</span></div></div></div>',1)),n("div",hd,[e[3]||(e[3]=n("div",{class:"panel-header"},[n("h3",null,"Топ просадок")],-1)),n("div",gd,[(g(),d(i,null,b(v,(a,e)=>n("div",{key:e,class:"dd-item"},[n("div",yd,[n("span",kd,m(a.period),1),n("span",xd,"Восст: "+m(a.recovery),1)]),n("span",wd,m(a.amount)+"%",1)])),64))])])])])]))}}),[["__scopeId","data-v-ff8fd6e5"]]);const Pd={class:"reports-page"},Md={class:"reports-header"},Sd={class:"header-actions"},_d={key:0},Vd={key:1},Rd={class:"report-container-wrapper custom-scroll"},Id={id:"report-content",class:"a4-sheet"},Td={class:"rep-header"},Fd={class:"rep-meta"},Ud={class:"rep-date"},Dd=a({__name:"Reports",setup(a){const{exportToPdf:s,isExporting:l}=function(){const a=e(!1);return{exportToPdf:async(e,s="report.pdf")=>{a.value=!0;try{const a=await O(()=>import("./pdf-CDn_A7Xt.js").then(a=>a.h),[]),l=a.default||a,t=document.getElementById(e);if(!t)throw new Error(`Element #${e} not found`);const d={margin:[10,10,10,10],filename:s,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#0f172a"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};await l().set(d).from(t).save()}catch(l){console.error("PDF Export Error:",l),alert("Ошибка экспорта PDF. Убедитесь, что html2pdf.js установлен (npm install html2pdf.js)")}finally{a.value=!1}},isExporting:a}}(),t=k(()=>(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),i=()=>{s("report-content",`QuantPro_Report_${(new Date).toISOString().slice(0,10)}.pdf`)};return(a,e)=>(g(),d("div",Pd,[n("div",Md,[e[1]||(e[1]=n("div",{class:"header-left"},[n("h1",{class:"page-title"},"Аналитические отчеты"),n("p",{class:"page-subtitle"},"Ежедневная сводка основных изменений")],-1)),n("div",Sd,[n("button",{class:"btn-action",onClick:i},[R(l)?(g(),d("span",_d,"Генерация отчета...")):(g(),d("span",Vd,"Скачать в формате PDF")),e[0]||(e[0]=n("span",{class:"icon"},"⬇",-1))])])]),n("div",Rd,[n("div",Id,[n("div",Td,[e[2]||(e[2]=n("div",{class:"rep-logo"},"ОАФИиОСС",-1)),n("div",Fd,[n("div",Ud,m(t.value),1)])]),e[3]||(e[3]=p('<div class="rep-divider" data-v-95e03e11></div><h2 class="rep-main-title" data-v-95e03e11>Ежедневная оценка рисков</h2><section class="rep-section" data-v-95e03e11><h3 class="sec-title" data-v-95e03e11>1. Краткое резюме</h3><p class="sec-text" data-v-95e03e11> Портфель демонстрирует умеренную волатильность в текущем рыночном режиме. Показатель <strong data-v-95e03e11>Value-at-Risk (95%)</strong> остается в пределах установленных лимитов (-2.4%). Наблюдается slight negative skewness в распределении доходностей, что указывает на повышенный риск хвостовых событий. </p></section><section class="rep-section" data-v-95e03e11><h3 class="sec-title" data-v-95e03e11>2. Ключевые метрики</h3><div class="metrics-grid" data-v-95e03e11><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>Общий P&amp;L (YTD)</span><span class="m-value positive" data-v-95e03e11>+12.5%</span></div><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>Коэффициент Шарпа</span><span class="m-value" data-v-95e03e11>1.84</span></div><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>VaR (95%, 1d)</span><span class="m-value warning" data-v-95e03e11>-2.1%</span></div><div class="metric-box" data-v-95e03e11><span class="m-label" data-v-95e03e11>Beta (β)</span><span class="m-value" data-v-95e03e11>0.85</span></div></div></section><section class="rep-section" data-v-95e03e11><h3 class="sec-title" data-v-95e03e11>3. Анализ подверженности риску</h3><div class="chart-placeholder" data-v-95e03e11><div class="fake-chart-bars" data-v-95e03e11><div class="bar" style="height:40%;" data-v-95e03e11></div><div class="bar" style="height:70%;" data-v-95e03e11></div><div class="bar" style="height:50%;" data-v-95e03e11></div><div class="bar" style="height:85%;" data-v-95e03e11></div><div class="bar" style="height:60%;" data-v-95e03e11></div><div class="bar" style="height:90%;" data-v-95e03e11></div></div><div class="chart-label" data-v-95e03e11>Отраслевая структура портфеля</div></div></section><div class="rep-footer" data-v-95e03e11><div class="footer-line" data-v-95e03e11></div><div class="footer-info" data-v-95e03e11><span data-v-95e03e11>Конфиденциально</span></div></div>',6))])])]))}}),Ad=ma(Dd,[["__scopeId","data-v-95e03e11"]]),Ld={class:"page-container"},Bd={class:"section-header"},Ed=["disabled"],Yd={key:0},$d={key:1},Nd={class:"settings-layout"},Od={class:"settings-sidebar"},zd={class:"sidebar-menu glass-panel"},Hd=["onClick"],qd={class:"menu-label"},jd={key:0,class:"badge-dot"},Qd={class:"settings-content"},Gd={class:"settings-view"},Wd={class:"settings-block glass-panel"},Kd={class:"control-group"},Xd={class:"control-row"},Zd={class:"segmented-control"},Jd={class:"control-row"},ai={class:"control-right"},ei={class:"control-row"},si={class:"control-right"},li={class:"settings-view"},ti={class:"settings-block glass-panel"},di={class:"control-group"},ii={class:"control-row"},ni={class:"control-right"},ci={class:"control-row"},oi={class:"control-right"},ri={class:"control-row"},vi={class:"control-right"},ui={class:"control-group"},pi={class:"control-row"},fi={class:"switch"},bi={class:"control-row"},mi={class:"switch"},hi={class:"settings-view"},gi={class:"settings-block glass-panel"},yi={class:"control-group risk-limits"},ki={class:"control-row"},xi={class:"input-wrapper"},wi={class:"control-row"},Ci={class:"input-wrapper"},Pi={class:"control-row"},Mi={class:"input-wrapper"},Si={class:"control-group"},_i={class:"control-row"},Vi={class:"switch"},Ri={class:"settings-view"},Ii={class:"settings-block glass-panel"},Ti={class:"control-group api-group"},Fi={class:"control-row vertical"},Ui={class:"control-row vertical"},Di={class:"status-footer"},Ai={class:"settings-block glass-panel"},Li={class:"control-group api-group"},Bi={class:"control-row vertical"},Ei={class:"control-row vertical"},Yi={class:"status-footer"},$i={class:"settings-block glass-panel"},Ni={class:"control-group"},Oi={class:"control-row vertical"},zi={class:"control-row vertical"},Hi={class:"settings-block glass-panel mt-4"},qi={class:"services-list"},ji={class:"srv-left"},Qi={class:"srv-name"},Gi=a({__name:"Settings",setup(a){const l=e("general"),t=e(!0),r=e(!1),v=[{id:"general",name:"Общие"},{id:"models",name:"Модели"},{id:"risk",name:"Риск-менеджмент"},{id:"api",name:"API и Данные"}],u=s({cbonds:{status:"idle"},rudata:{status:"idle"}}),f=s({general:{theme:"dark",language:"ru",currency:"RUB"},models:{portfolioModel:"markowitz",varModel:"parametric",varConfidence:"0.95",useRollingWindow:!0,exponentialWeighting:!1},risk:{maxVaR:5,maxConcentration:25,minSharpeRatio:1.2,enableStressTesting:!0},api:{cbondsLogin:"",cbondsPassword:"",rudataLogin:"",rudataPassword:"",bloombergKey:"",webhookUrl:""},connectedServices:[{id:1,name:"Cbonds",connected:!1},{id:2,name:"RuData",connected:!1},{id:3,name:"Bloomberg",connected:!1},{id:4,name:"MOEX",connected:!1}]}),h=a=>{const e=u[a].status;return"checking"===e?{text:"Проверка...",class:"text-blue"}:"success"===e?{text:"Подключено успешно",class:"text-green"}:"error"===e?{text:"Ошибка авторизации",class:"text-red"}:{text:"Не проверено",class:"text-muted"}},y=a=>{u[a].status="checking",setTimeout(()=>{if(f.api[`${a}Login`]&&f.api[`${a}Password`]){u[a].status="success";const e=f.connectedServices.find(e=>e.name.toLowerCase().includes(a));e&&(e.connected=!0)}else u[a].status="error"},1200)},k=()=>{t.value=!1,setTimeout(()=>t.value=!0,2e3)};return T(f,()=>{t.value=!0},{deep:!0}),(a,e)=>(g(),d("div",Ld,[n("div",Bd,[e[22]||(e[22]=n("div",{class:"header-left"},[n("h1",{class:"section-title"},"Настройки"),n("p",{class:"section-subtitle"},"Настройки моделей и интерфейса")],-1)),n("button",{onClick:k,class:o(["btn btn-save",{"has-changes":t.value}]),disabled:!t.value},[t.value?(g(),d("span",Yd,"Сохранить изменения")):(g(),d("span",$d,"Сохранено"))],10,Ed)]),n("div",Nd,[n("div",Od,[n("div",zd,[(g(),d(i,null,b(v,a=>n("button",{key:a.id,onClick:e=>l.value=a.id,class:o(["menu-item",{active:l.value===a.id}])},[n("span",qd,m(a.name),1),"api"===a.id&&r.value?(g(),d("span",jd)):c("",!0)],10,Hd)),64))])]),n("div",Qd,[P(n("div",Gd,[n("div",Wd,[e[30]||(e[30]=n("h3",{class:"block-title"},"Интерфейс",-1)),n("div",Kd,[n("div",Xd,[e[23]||(e[23]=n("label",null,"Тема оформления",-1)),n("div",Zd,[n("button",{class:o({active:"dark"===f.general.theme}),onClick:e[0]||(e[0]=a=>f.general.theme="dark")},"Тёмная тема",2),n("button",{class:o({active:"light"===f.general.theme}),onClick:e[1]||(e[1]=a=>f.general.theme="light")},"Светлая тема",2),n("button",{class:o({active:"auto"===f.general.theme}),onClick:e[2]||(e[2]=a=>f.general.theme="auto")},"Как в системе",2)])]),e[28]||(e[28]=n("div",{class:"divider"},null,-1)),n("div",Jd,[e[25]||(e[25]=n("label",null,"Язык",-1)),n("div",ai,[P(n("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>f.general.language=a),class:"glass-select"},[...e[24]||(e[24]=[p('<option value="ru" data-v-54d774f5>Русский</option><option value="en" data-v-54d774f5>English</option><option value="de" data-v-54d774f5>Deutsch</option><option value="ch" data-v-54d774f5>中國人</option><option value="ja" data-v-54d774f5>日本語</option><option value="qa" data-v-54d774f5>Қазақ</option>',6)])],512),[[I,f.general.language]])])]),e[29]||(e[29]=n("div",{class:"divider"},null,-1)),n("div",ei,[e[27]||(e[27]=n("label",null,"Валюта портфеля",-1)),n("div",si,[P(n("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>f.general.currency=a),class:"glass-select"},[...e[26]||(e[26]=[p('<option value="RUB" data-v-54d774f5>RUB</option><option value="USD" data-v-54d774f5>USD</option><option value="EUR" data-v-54d774f5>EUR</option><option value="CNY" data-v-54d774f5>CNY</option><option value="CHF" data-v-54d774f5>CHF</option><option value="GBP" data-v-54d774f5>GBP</option><option value="JPY" data-v-54d774f5>JPY</option><option value="AED" data-v-54d774f5>AED</option><option value="QAR" data-v-54d774f5>QAR</option><option value="HKD" data-v-54d774f5>HKD</option>',10)])],512),[[I,f.general.currency]])])])])])],512),[[F,"general"===l.value]]),P(n("div",li,[n("div",ti,[e[44]||(e[44]=n("h3",{class:"block-title"},"Оптимизация и VaR",-1)),n("div",di,[n("div",ii,[e[32]||(e[32]=n("div",{class:"label-group"},[n("label",null,"Модель оптимизации"),n("span",{class:"sub-label"},"Метод расчета весов")],-1)),n("div",ni,[P(n("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>f.models.portfolioModel=a),class:"glass-select"},[...e[31]||(e[31]=[n("option",{value:"markowitz"},"Markowitz (Mean-Variance)",-1),n("option",{value:"black-litterman"},"Black-Litterman",-1),n("option",{value:"risk-parity"},"Risk Parity",-1),n("option",{value:"hrp"},"HRP (Hierarchical)",-1)])],512),[[I,f.models.portfolioModel]])])]),e[37]||(e[37]=n("div",{class:"divider"},null,-1)),n("div",ci,[e[34]||(e[34]=n("div",{class:"label-group"},[n("label",null,"Модель VaR"),n("span",{class:"sub-label"},"Оценка хвостового риска")],-1)),n("div",oi,[P(n("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>f.models.varModel=a),class:"glass-select"},[...e[33]||(e[33]=[n("option",{value:"historical"},"Историческая",-1),n("option",{value:"parametric"},"Параметрическая",-1),n("option",{value:"cornish"},"Cornish-Fisher",-1),n("option",{value:"gpd"},"EVT (GPD)",-1)])],512),[[I,f.models.varModel]])])]),e[38]||(e[38]=n("div",{class:"divider"},null,-1)),n("div",ri,[e[36]||(e[36]=n("label",null,"Confidence Level",-1)),n("div",vi,[P(n("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>f.models.varConfidence=a),class:"glass-select"},[...e[35]||(e[35]=[n("option",{value:"0.90"},"90%",-1),n("option",{value:"0.95"},"95%",-1),n("option",{value:"0.99"},"99%",-1)])],512),[[I,f.models.varConfidence]])])])]),e[45]||(e[45]=n("h3",{class:"block-title mt-4"},"Параметры данных",-1)),n("div",ui,[n("div",pi,[e[40]||(e[40]=n("label",null,"Скользящее окно (Rolling Window)",-1)),n("label",fi,[P(n("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>f.models.useRollingWindow=a)},null,512),[[U,f.models.useRollingWindow]]),e[39]||(e[39]=n("span",{class:"slider"},null,-1))])]),e[43]||(e[43]=n("div",{class:"divider"},null,-1)),n("div",bi,[e[42]||(e[42]=n("label",null,"Экспоненциальное взвешивание (EWMA)",-1)),n("label",mi,[P(n("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=a=>f.models.exponentialWeighting=a)},null,512),[[U,f.models.exponentialWeighting]]),e[41]||(e[41]=n("span",{class:"slider"},null,-1))])])])])],512),[[F,"models"===l.value]]),P(n("div",hi,[n("div",gi,[e[55]||(e[55]=n("h3",{class:"block-title"},"Лимиты",-1)),n("div",yi,[n("div",ki,[e[47]||(e[47]=n("label",null,"Макс. VaR портфеля",-1)),n("div",xi,[P(n("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=a=>f.risk.maxVaR=a),class:"glass-input"},null,512),[[M,f.risk.maxVaR,void 0,{number:!0}]]),e[46]||(e[46]=n("span",{class:"unit"},"%",-1))])]),e[51]||(e[51]=n("div",{class:"divider"},null,-1)),n("div",wi,[e[49]||(e[49]=n("label",null,"Макс. концентрация (1 актив)",-1)),n("div",Ci,[P(n("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=a=>f.risk.maxConcentration=a),class:"glass-input"},null,512),[[M,f.risk.maxConcentration,void 0,{number:!0}]]),e[48]||(e[48]=n("span",{class:"unit"},"%",-1))])]),e[52]||(e[52]=n("div",{class:"divider"},null,-1)),n("div",Pi,[e[50]||(e[50]=n("label",null,"Мин. коэффициент Шарпа",-1)),n("div",Mi,[P(n("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=a=>f.risk.minSharpeRatio=a),class:"glass-input",step:"0.1"},null,512),[[M,f.risk.minSharpeRatio,void 0,{number:!0}]])])])]),e[56]||(e[56]=n("h3",{class:"block-title mt-4"},"Автоматизация",-1)),n("div",Si,[n("div",_i,[e[54]||(e[54]=n("label",null,"Стресс-тестирование",-1)),n("label",Vi,[P(n("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=a=>f.risk.enableStressTesting=a)},null,512),[[U,f.risk.enableStressTesting]]),e[53]||(e[53]=n("span",{class:"slider"},null,-1))])])])])],512),[[F,"risk"===l.value]]),P(n("div",Ri,[n("div",Ii,[e[60]||(e[60]=n("h3",{class:"block-title"},"Cbonds API",-1)),n("div",Ti,[n("div",Fi,[e[57]||(e[57]=n("label",null,"Логин",-1)),P(n("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=a=>f.api.cbondsLogin=a),class:"glass-input full",placeholder:"username@company.com"},null,512),[[M,f.api.cbondsLogin]])]),e[59]||(e[59]=n("div",{class:"divider"},null,-1)),n("div",Ui,[e[58]||(e[58]=n("label",null,"Пароль",-1)),P(n("input",{type:"password","onUpdate:modelValue":e[15]||(e[15]=a=>f.api.cbondsPassword=a),class:"glass-input full",placeholder:"••••••••"},null,512),[[M,f.api.cbondsPassword]])])]),n("div",Di,[n("button",{class:"btn-xs",onClick:e[16]||(e[16]=a=>y("cbonds"))},"Проверить подключение"),n("span",{class:o(["status-text",h("cbonds").class])},m(h("cbonds").text),3)])]),n("div",Ai,[e[64]||(e[64]=n("h3",{class:"block-title"},"RuData / Interfax",-1)),n("div",Li,[n("div",Bi,[e[61]||(e[61]=n("label",null,"Логин",-1)),P(n("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=a=>f.api.rudataLogin=a),class:"glass-input full",placeholder:"login"},null,512),[[M,f.api.rudataLogin]])]),e[63]||(e[63]=n("div",{class:"divider"},null,-1)),n("div",Ei,[e[62]||(e[62]=n("label",null,"Пароль",-1)),P(n("input",{type:"password","onUpdate:modelValue":e[18]||(e[18]=a=>f.api.rudataPassword=a),class:"glass-input full",placeholder:"••••••••"},null,512),[[M,f.api.rudataPassword]])])]),n("div",Yi,[n("button",{class:"btn-xs",onClick:e[19]||(e[19]=a=>y("rudata"))},"Проверить подключение"),n("span",{class:o(["status-text",h("rudata").class])},m(h("rudata").text),3)])]),n("div",$i,[e[68]||(e[68]=n("h3",{class:"block-title"},"Глобальные Провайдеры",-1)),n("div",Ni,[n("div",Oi,[e[65]||(e[65]=n("label",null,"Bloomberg API Key",-1)),P(n("input",{type:"password","onUpdate:modelValue":e[20]||(e[20]=a=>f.api.bloombergKey=a),placeholder:"••••••••••••••••",class:"glass-input full"},null,512),[[M,f.api.bloombergKey]])]),e[67]||(e[67]=n("div",{class:"divider"},null,-1)),n("div",zi,[e[66]||(e[66]=n("label",null,"Webhook URL (Alerts)",-1)),P(n("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=a=>f.api.webhookUrl=a),placeholder:"https://hooks.slack.com/...",class:"glass-input full"},null,512),[[M,f.api.webhookUrl]])])])]),n("div",Hi,[e[69]||(e[69]=n("h3",{class:"block-title"},"Статус подключений",-1)),n("div",qi,[(g(!0),d(i,null,b(f.connectedServices,a=>(g(),d("div",{key:a.id,class:"service-item"},[n("div",ji,[n("span",Qi,m(a.name),1)]),n("span",{class:o(["status-indicator",{connected:a.connected}])},m(a.connected?"Активно":"Отключено"),3)]))),128))])])],512),[[F,"api"===l.value]])])])]))}}),Wi=ma(Gi,[["__scopeId","data-v-54d774f5"]]),Ki={class:"page-container"},Xi={class:"section-header"},Zi={class:"header-actions"},Ji={class:"status-pill"},an={class:"dashboard-grid"},en={class:"left-panel"},sn={class:"card glass-panel mb-4"},ln={class:"controls-form"},tn={class:"input-group"},dn={class:"input-group"},nn={class:"input-group"},cn=["disabled"],on={key:0},rn={key:1,class:"flex-center"},vn={key:0,class:"card glass-panel"},un={class:"m-val"},pn={class:"m-lbl"},fn={key:1,class:"card glass-panel mt-4"},bn={class:"stats-list"},mn={class:"stat-head"},hn={class:"s-name"},gn={class:"stat-metrics"},yn={class:"text-muted"},kn={class:"main-panel"},xn={class:"card glass-panel chart-card"},wn={class:"chart-header"},Cn={key:0,class:"live-badge"},Pn={key:0,class:"playback-controls"},Mn={key:0},Sn={key:1},_n={class:"timeline-wrapper"},Vn=["max"],Rn={class:"chart-container"},In={key:0,viewBox:"0 0 800 250",preserveAspectRatio:"none",class:"regime-svg"},Tn=["x","width","fill"],Fn=["d"],Un=["x1","x2"],Dn={class:"card glass-panel chart-card mt-4"},An={class:"chart-container"},Ln={key:0,viewBox:"0 0 800 250",preserveAspectRatio:"none",class:"regime-svg"},Bn=["y1","y2"],En=["d"],Yn=["cx","cy","fill"],$n=["x1","x2"],Nn={class:"card glass-panel chart-card mt-4"},On={class:"chart-container"},zn={key:0,viewBox:"0 0 800 200",preserveAspectRatio:"none",class:"regime-svg"},Hn=["y1","y2"],qn=["y"],jn=["y"],Qn=["y"],Gn=["cx","cy","fill"],Wn=ma(a({__name:"RegimeAnalysis",setup(a){const s=ga(),v=e("SPY"),u=e(3),p=e(1),h=e(!1),y=e(null),x=e([]),w=e([]),S=e(0),_=e(!1);let V=null;const R=async()=>{if(h.value)return;h.value=!0,U();const a=s.addTask(`Обучение HMM на ${v.value}...`,"simulation");try{s.updateProgress(a,15),await new Promise(a=>setTimeout(a,500));for(let e=30;e<=90;e+=15)await new Promise(a=>setTimeout(a,200)),s.updateProgress(a,e);L(),s.updateProgress(a,100),S.value=0,T()}catch(e){s.failTask(a)}finally{h.value=!1}},T=()=>{_.value?U():(S.value>=x.value.length-1&&(S.value=0),_.value=!0,A())},U=()=>{_.value=!1,V&&cancelAnimationFrame(V)},D=()=>{U(),S.value=0},A=()=>{if(!_.value)return;const a=S.value+2;a>=x.value.length?(S.value=x.value.length-1,U()):(S.value=a,V=requestAnimationFrame(A))},L=()=>{const a=u.value,e=[];for(let i=0;i<a;i++){const s=new Array(a).fill(.05);s[i]=1-.05*(a-1),e.push(s)}y.value=e;const s=[];let l=100,t=0,d=.1;for(let i=0;i<250;i++){const a=Math.random(),e=y.value[t]||y.value[0];let i=0;for(let s=0;s<e.length;s++)if(i+=e[s],a<i){t=s;break}let n=0,c=0;0===t?(n=2e-4,c=.008*p.value):1===t?(n=.001,c=.012*p.value):(n=-.002,c=.025*p.value);const o=n+2*(Math.random()-.5)*c;l*=1+o,d=.9*d+Math.abs(o)*Math.sqrt(252)*.1,s.push({price:l,regime:t,vol:d})}x.value=s,S.value=s.length-1,w.value=[{ret:"8.5",vol:(12*p.value).toFixed(1)},{ret:"22.0",vol:(18.5*p.value).toFixed(1)},{ret:"-15.4",vol:(45.2*p.value).toFixed(1)}].slice(0,u.value)},B=k(()=>800/(x.value.length||1)),E=a=>a*B.value,Y=a=>{let e=(a-0)/.8;return e>1&&(e=1),e<0&&(e=0),250-230*e-10},$=a=>200-200/(u.value+1)*(a+1),N=k(()=>{if(!x.value.length)return"";const a=x.value.slice(0,S.value+1),e=x.value.map(a=>a.price),s=Math.min(...e),l=Math.max(...e);return"M "+a.map((a,e)=>`${E(e).toFixed(1)},${((a,e,s)=>250-(a-e)/(s-e)*230-10)(a.price,s,l).toFixed(1)}`).join(" L ")}),O=k(()=>{if(!x.value.length)return"";return"M "+x.value.slice(0,S.value+1).map((a,e)=>`${E(e).toFixed(1)},${Y(a.vol).toFixed(1)}`).join(" L ")}),z=a=>0===a?"Stable":1===a?"Growth":"Stress",H=a=>1===a?"#4ade80":2===a?"#f87171":"#3b82f6",q=a=>1===a?"bg-green":2===a?"bg-red":"bg-blue",j=k(()=>{if(!x.value.length)return"Unknown";const a=Math.min(S.value,x.value.length-1);return z(x.value[a].regime)}),Q=k(()=>{if(!x.value.length)return"bg-grey";const a=Math.min(S.value,x.value.length-1);return q(x.value[a].regime)});return t(()=>{V&&cancelAnimationFrame(V)}),l(()=>{}),(a,e)=>(g(),d("div",Ki,[n("div",Xi,[e[4]||(e[4]=n("div",null,[n("h1",{class:"section-title"},"Выявление скрытых рыночных режимов"),n("p",{class:"section-subtitle"},"Классификация режимов скрытой марковской цепи и анализ волатильности")],-1)),n("div",Zi,[n("div",Ji,[n("span",{class:o(["dot",Q.value])},null,2),C(" Текущий режим: "+m(j.value),1)])])]),n("div",an,[n("aside",en,[n("div",sn,[e[11]||(e[11]=n("div",{class:"panel-header-sm"},[n("h3",null,"Параметры модели")],-1)),n("div",ln,[n("div",tn,[e[6]||(e[6]=n("label",{class:"lbl"},"Актив",-1)),P(n("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),class:"glass-select"},[...e[5]||(e[5]=[n("option",{value:"SPY"},"S&P 500 (SPY)",-1),n("option",{value:"QQQ"},"Nasdaq 100 (QQQ)",-1),n("option",{value:"IWM"},"Russell 2000 (IWM)",-1),n("option",{value:"BTC"},"Bitcoin (BTC)",-1)])],512),[[I,v.value]])]),n("div",dn,[e[7]||(e[7]=n("label",{class:"lbl"},"Количество скрытых режимов",-1)),r(fs,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),min:2,max:5,step:1,class:"text-accent"},null,8,["modelValue"])]),e[10]||(e[10]=n("div",{class:"divider"},null,-1)),n("div",nn,[e[8]||(e[8]=n("label",{class:"lbl"},"Мультипликатор шока по режиму",-1)),r(fs,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value=a),min:.5,max:3,step:.1,decimals:1,suffix:"x"},null,8,["modelValue"])]),n("button",{onClick:R,disabled:h.value,class:"btn btn-primary-gradient w-full mt-2"},[h.value?(g(),d("span",rn,[...e[9]||(e[9]=[n("span",{class:"spinner-mini mr-2"},null,-1),C(" Вычисляется... ",-1)])])):(g(),d("span",on,"Запустить анализ"))],8,cn)])]),y.value?(g(),d("div",vn,[e[12]||(e[12]=n("div",{class:"panel-header-sm"},[n("h3",null,"Матрица переходов")],-1)),n("div",{class:"matrix-grid",style:f({gridTemplateColumns:`repeat(${u.value}, 1fr)`})},[(g(!0),d(i,null,b(y.value,(a,e)=>(g(),d("div",{key:e,class:"matrix-row-group"},[(g(!0),d(i,null,b(a,(a,s)=>(g(),d("div",{key:s,class:"matrix-cell",style:f({backgroundColor:`rgba(59, 130, 246, ${.8*a})`})},[n("span",un,m((100*a).toFixed(0))+"%",1),n("span",pn,"S"+m(e)+"→S"+m(s),1)],4))),128))]))),128))],4)])):c("",!0),w.value.length?(g(),d("div",fn,[e[13]||(e[13]=n("div",{class:"panel-header-sm"},[n("h3",null,"Статистики режимов")],-1)),n("div",bn,[(g(!0),d(i,null,b(w.value,(a,e)=>(g(),d("div",{class:"stat-item",key:e},[n("div",mn,[n("span",{class:o(["dot",q(e)])},null,2),n("span",hn,m(z(e)),1)]),n("div",gn,[n("span",null,"μ: "+m(a.ret)+"%",1),n("span",yn,"σ: "+m(a.vol)+"%",1)])]))),128))])])):c("",!0)]),n("main",kn,[n("div",xn,[n("div",wn,[n("h3",null,[e[14]||(e[14]=C(" Режимно-зависимое изменение цены актива ",-1)),_.value?(g(),d("span",Cn,"● LIVE PLAYBACK")):c("",!0)]),x.value.length?(g(),d("div",Pn,[n("button",{class:"icon-btn",onClick:T,title:"Play/Pause"},[_.value?(g(),d("span",Mn,"⏸")):(g(),d("span",Sn,"▶"))]),n("div",_n,[P(n("input",{type:"range",min:"0",max:x.value.length-1,"onUpdate:modelValue":e[3]||(e[3]=a=>S.value=a),onInput:U,class:"timeline-slider"},null,40,Vn),[[M,S.value,void 0,{number:!0}]]),n("div",{class:"timeline-track",style:f({width:S.value/(x.value.length-1)*100+"%"})},null,4)]),n("button",{class:"icon-btn",onClick:D,title:"Reset"},"↺")])):c("",!0)]),n("div",Rn,[x.value.length?(g(),d("svg",In,[(g(!0),d(i,null,b(x.value,(a,e)=>{return P((g(),d("rect",{key:"bg-"+e,x:E(e),y:"0",width:B.value,height:"250",fill:(s=a.regime,l=.15,1===s?`rgba(74, 222, 128, ${l})`:2===s?`rgba(248, 113, 113, ${l})`:`rgba(59, 130, 246, ${l})`)},null,8,Tn)),[[F,e<=S.value]]);var s,l}),128)),n("path",{d:N.value,fill:"none",stroke:"#fff","stroke-width":"1.5"},null,8,Fn),S.value<x.value.length-1?(g(),d("line",{key:0,x1:E(S.value),y1:"0",x2:E(S.value),y2:"250",stroke:"rgba(255,255,255,0.5)","stroke-dasharray":"2"},null,8,Un)):c("",!0)])):c("",!0)])]),n("div",Dn,[e[15]||(e[15]=n("div",{class:"chart-header"},[n("h3",null,"Скользящая волатильность (20-дневное окно)")],-1)),n("div",An,[x.value.length?(g(),d("svg",Ln,[(g(),d(i,null,b(5,a=>n("line",{key:a,x1:"0",y1:50*a,x2:"800",y2:50*a,stroke:"rgba(255,255,255,0.05)"},null,8,Bn)),64)),n("path",{d:O.value,fill:"none",stroke:"rgba(255,255,255,0.5)","stroke-width":"1"},null,8,En),(g(!0),d(i,null,b(x.value,(a,e)=>P((g(),d("circle",{key:"v-"+e,cx:E(e),cy:Y(a.vol),r:"2",fill:H(a.regime)},null,8,Yn)),[[F,e<=S.value]])),128)),S.value<x.value.length-1?(g(),d("line",{key:0,x1:E(S.value),y1:"0",x2:E(S.value),y2:"250",stroke:"rgba(255,255,255,0.3)","stroke-dasharray":"2"},null,8,$n)):c("",!0)])):c("",!0)])]),n("div",Nn,[e[16]||(e[16]=n("div",{class:"chart-header"},[n("h3",null,"Предсказанные скрытые состояния")],-1)),n("div",On,[x.value.length?(g(),d("svg",zn,[(g(),d(i,null,b([0,1,2],a=>n("line",{key:"g-"+a,x1:"0",y1:$(a),x2:"800",y2:$(a),stroke:"rgba(255,255,255,0.05)","stroke-dasharray":"4"},null,8,Hn)),64)),n("text",{x:"10",y:$(0)-10,fill:"rgba(255,255,255,0.3)","font-size":"10"},"Stable (0)",8,qn),n("text",{x:"10",y:$(1)-10,fill:"rgba(255,255,255,0.3)","font-size":"10"},"Growth (1)",8,jn),n("text",{x:"10",y:$(2)-10,fill:"rgba(255,255,255,0.3)","font-size":"10"},"Stress (2)",8,Qn),(g(!0),d(i,null,b(x.value,(a,e)=>P((g(),d("circle",{key:"s-"+e,cx:E(e),cy:$(a.regime),r:"3",fill:H(a.regime),opacity:"0.8"},null,8,Gn)),[[F,e<=S.value]])),128))])):c("",!0)])])])])]))}}),[["__scopeId","data-v-cfb61ffe"]]),Kn={class:"page-container"},Xn=ma(a({__name:"RegimeDetails",setup:a=>(a,e)=>(g(),d("div",Kn,[...e[0]||(e[0]=[p('<div class="section-header" data-v-0178c154><div data-v-0178c154><h1 class="section-title" data-v-0178c154>Детальный анализ режимов</h1><p class="section-subtitle" data-v-0178c154>Метрики устойчивости, матрицы переходов и сценарное прогнозирование</p></div><div class="header-controls" data-v-0178c154><span class="date-badge" data-v-0178c154>Data: 01.11.2025</span></div></div><div class="grid-3 mb-6" data-v-0178c154><div class="card glass-panel regime-card border-blue" data-v-0178c154><div class="card-head" data-v-0178c154><span class="dot bg-blue" data-v-0178c154></span><h3 data-v-0178c154>Состояние 0: Стабильность</h3></div><div class="card-body" data-v-0178c154><p class="desc" data-v-0178c154>Динамическое равновесие без ярко выраженного направления. Рынок стабилизируется, волатильность минимальна.</p><div class="metrics-table" data-v-0178c154><div class="m-row" data-v-0178c154><span data-v-0178c154>Количество дней</span> <strong data-v-0178c154>272</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Доля периода</span> <strong data-v-0178c154>70.8%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ср. доходность</span> <strong class="text-blue" data-v-0178c154>+0.005%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Волатильность</span> <strong data-v-0178c154>0.375%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Устойчивость</span> <strong data-v-0178c154>0.9632</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ожид. длительность</span> <strong data-v-0178c154>27.2 дня</strong></div></div></div></div><div class="card glass-panel regime-card border-red" data-v-0178c154><div class="card-head" data-v-0178c154><span class="dot bg-red" data-v-0178c154></span><h3 data-v-0178c154>Состояние 1: Падение</h3></div><div class="card-body" data-v-0178c154><p class="desc" data-v-0178c154>Фаза понижательного тренда с высокой волатильностью. &quot;Липкое&quot; состояние с короткими отскоками.</p><div class="metrics-table" data-v-0178c154><div class="m-row" data-v-0178c154><span data-v-0178c154>Количество дней</span> <strong data-v-0178c154>60</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Доля периода</span> <strong data-v-0178c154>15.6%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ср. доходность</span> <strong class="text-red" data-v-0178c154>-0.039%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Волатильность</span> <strong data-v-0178c154>0.652%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Устойчивость</span> <strong data-v-0178c154>0.6667</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ожид. длительность</span> <strong data-v-0178c154>3.0 дня</strong></div></div></div></div><div class="card glass-panel regime-card border-green" data-v-0178c154><div class="card-head" data-v-0178c154><span class="dot bg-green" data-v-0178c154></span><h3 data-v-0178c154>Состояние 2: Рост</h3></div><div class="card-body" data-v-0178c154><p class="desc" data-v-0178c154>Периоды возрастающего тренда. Систематический рост стоимости облигаций с умеренными колебаниями.</p><div class="metrics-table" data-v-0178c154><div class="m-row" data-v-0178c154><span data-v-0178c154>Количество дней</span> <strong data-v-0178c154>52</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Доля периода</span> <strong data-v-0178c154>13.5%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ср. доходность</span> <strong class="text-green" data-v-0178c154>+0.036%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Волатильность</span> <strong data-v-0178c154>0.479%</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Устойчивость</span> <strong data-v-0178c154>0.6471</strong></div><div class="m-row" data-v-0178c154><span data-v-0178c154>Ожид. длительность</span> <strong data-v-0178c154>2.8 дня</strong></div></div></div></div></div><div class="grid-2 mb-6" data-v-0178c154><div class="card glass-panel" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Матрица переходов</h3></div><div class="heatmap-container" data-v-0178c154><div class="heatmap-grid" data-v-0178c154><div class="h-label" data-v-0178c154>From \\ To</div><div class="h-col-header text-blue" data-v-0178c154>Стаб</div><div class="h-col-header text-red" data-v-0178c154>Падение</div><div class="h-col-header text-green" data-v-0178c154>Рост</div><div class="h-row-header text-blue" data-v-0178c154>Стаб</div><div class="h-cell" style="background:rgba(59, 130, 246, 0.96);" data-v-0178c154>0.9632</div><div class="h-cell" style="background:rgba(248, 113, 113, 0.02);" data-v-0178c154>0.0221</div><div class="h-cell" style="background:rgba(74, 222, 128, 0.01);" data-v-0178c154>0.0147</div><div class="h-row-header text-red" data-v-0178c154>Падение</div><div class="h-cell" style="background:rgba(59, 130, 246, 0.08);" data-v-0178c154>0.0833</div><div class="h-cell" style="background:rgba(248, 113, 113, 0.66);" data-v-0178c154>0.6667</div><div class="h-cell" style="background:rgba(74, 222, 128, 0.25);" data-v-0178c154>0.2500</div><div class="h-row-header text-green" data-v-0178c154>Рост</div><div class="h-cell" style="background:rgba(59, 130, 246, 0.07);" data-v-0178c154>0.0784</div><div class="h-cell" style="background:rgba(248, 113, 113, 0.27);" data-v-0178c154>0.2745</div><div class="h-cell" style="background:rgba(74, 222, 128, 0.64);" data-v-0178c154>0.6471</div></div><div class="analysis-note mt-4" data-v-0178c154><p data-v-0178c154>• <strong data-v-0178c154>Стабильность</strong> имеет наивысшую инерцию (0.96).<br data-v-0178c154>• Из <strong data-v-0178c154>Падения</strong> выход в Рост (25%) вероятнее, чем в Стабильность (8%).</p></div></div></div><div class="card glass-panel flex-col" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Прогноз вероятностей</h3><span class="sub" data-v-0178c154>Начальное состояние: Рост</span></div><div class="forecast-table-wrapper" data-v-0178c154><table class="simple-table" data-v-0178c154><thead data-v-0178c154><tr data-v-0178c154><th data-v-0178c154>Горизонт</th><th class="text-blue" data-v-0178c154>P(Стаб)</th><th class="text-red" data-v-0178c154>P(Пад)</th><th class="text-green" data-v-0178c154>P(Рост)</th></tr></thead><tbody data-v-0178c154><tr data-v-0178c154><td data-v-0178c154>1 день</td><td data-v-0178c154>7.84%</td><td data-v-0178c154>27.45%</td><td data-v-0178c154>64.71%</td></tr><tr data-v-0178c154><td data-v-0178c154>5 дней</td><td data-v-0178c154>31.74%</td><td data-v-0178c154>35.18%</td><td data-v-0178c154>33.08%</td></tr><tr data-v-0178c154><td data-v-0178c154>10 дней</td><td data-v-0178c154>48.98%</td><td data-v-0178c154>26.79%</td><td data-v-0178c154>24.23%</td></tr><tr data-v-0178c154><td data-v-0178c154>20 дней</td><td data-v-0178c154>63.13%</td><td data-v-0178c154>19.51%</td><td data-v-0178c154>17.36%</td></tr><tr class="stationary" data-v-0178c154><td data-v-0178c154>∞ (Стационарное состояние)</td><td data-v-0178c154>70.8%</td><td data-v-0178c154>15.6%</td><td data-v-0178c154>13.5%</td></tr></tbody></table></div><div class="chart-mini mt-4" data-v-0178c154><h4 data-v-0178c154>Сходимость к стационарному состоянию</h4><svg viewBox="0 0 400 100" class="svg-curves" data-v-0178c154><path d="M0,90 Q50,80 100,50 T400,30" fill="none" stroke="#3b82f6" stroke-width="2" data-v-0178c154></path><path d="M0,10 Q50,40 100,60 T400,85" fill="none" stroke="#4ade80" stroke-width="2" data-v-0178c154></path></svg></div></div></div><div class="grid-2 mb-6" data-v-0178c154><div class="card glass-panel" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Распределение доходностей по режимам</h3></div><div class="chart-container-rect" data-v-0178c154><svg viewBox="0 0 600 250" class="svg-chart" data-v-0178c154><line x1="50" y1="220" x2="550" y2="220" stroke="#555" data-v-0178c154></line><line x1="300" y1="20" x2="300" y2="220" stroke="#444" stroke-dasharray="4" data-v-0178c154></line><path d="M150,220 Q300,-100 450,220" fill="rgba(59, 130, 246, 0.2)" stroke="#3b82f6" stroke-width="2" data-v-0178c154></path><path d="M50,220 Q200,50 400,220" fill="rgba(248, 113, 113, 0.2)" stroke="#f87171" stroke-width="2" data-v-0178c154></path><path d="M200,220 Q380,50 500,220" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2" data-v-0178c154></path><text x="310" y="30" fill="#3b82f6" font-size="10" data-v-0178c154>Стабильность (Low σ)</text><text x="100" y="100" fill="#f87171" font-size="10" data-v-0178c154>Падение (Negative μ)</text><text x="450" y="100" fill="#4ade80" font-size="10" data-v-0178c154>Рост (Positive μ)</text></svg></div><p class="chart-caption" data-v-0178c154>Распределение изменений доходностей. Падение имеет &quot;толстый хвост&quot; слева.</p></div><div class="card glass-panel" data-v-0178c154><div class="panel-header" data-v-0178c154><h3 data-v-0178c154>Характеристики режимов</h3></div><div class="chart-container-rect" data-v-0178c154><svg viewBox="0 0 500 250" class="svg-chart" data-v-0178c154><rect x="50" y="150" width="40" height="50" fill="#3b82f6" opacity="0.8" data-v-0178c154></rect><rect x="100" y="195" width="40" height="5" fill="#3b82f6" opacity="0.4" data-v-0178c154></rect><rect x="200" y="50" width="40" height="150" fill="#f87171" opacity="0.8" data-v-0178c154></rect><rect x="250" y="200" width="40" height="40" fill="#f87171" opacity="0.4" data-v-0178c154></rect><rect x="350" y="100" width="40" height="100" fill="#4ade80" opacity="0.8" data-v-0178c154></rect><rect x="400" y="160" width="40" height="40" fill="#4ade80" opacity="0.4" data-v-0178c154></rect><text x="75" y="240" fill="#aaa" text-anchor="middle" font-size="12" data-v-0178c154>Стабильность</text><text x="245" y="240" fill="#aaa" text-anchor="middle" font-size="12" data-v-0178c154>Падение</text><text x="395" y="240" fill="#aaa" text-anchor="middle" font-size="12" data-v-0178c154>Рост</text><rect x="350" y="20" width="10" height="10" fill="#fff" opacity="0.8" data-v-0178c154></rect> <text x="370" y="30" fill="#fff" font-size="10" data-v-0178c154>Волатильность</text><rect x="350" y="40" width="10" height="10" fill="#fff" opacity="0.4" data-v-0178c154></rect> <text x="370" y="50" fill="#fff" font-size="10" data-v-0178c154>Доходность (Abs)</text></svg></div></div></div>',4)])]))}),[["__scopeId","data-v-0178c154"]]),Zn={class:"page-container"},Jn={class:"analysis-grid"},ac={class:"charts-column"},ec={class:"card glass-panel chart-container"},sc={class:"chart-area big-chart"},lc={viewBox:"0 0 1000 300",preserveAspectRatio:"none",class:"svg-chart"},tc=["y1","y2"],dc=["d","stroke"],ic=["d"],nc={class:"card glass-panel chart-container"},cc={class:"chart-area big-chart"},oc={viewBox:"0 0 1000 300",preserveAspectRatio:"none",class:"svg-chart"},rc=["y1","y2"],vc=["d"],uc=["d"],pc=["d"],fc=ma(a({__name:"YieldAnalysis",setup(a){const s=e([]),t=e([]),c=e({US10Y:[],US02Y:[]}),o=()=>{const a=[],e=[];for(let s=0;s<50;s++){const s=[],l=[0];let t=0;for(let a=0;a<250;a++){let e=2*(Math.random()-.5);a>220&&Math.random()>.8&&(e*=8),s.push(e),t+=e,l.push(t)}a.push(s),e.push(l)}s.value=a,t.value=e;const l=a=>{const e=[0];let s=0;for(let l=0;l<250;l++)s+=Math.random()-.5+a,e.push(s);return e};c.value={US10Y:l(.1),US02Y:l(-.05)}},r=(a,e,s)=>{if(!a||0===a.length)return"";return"M "+a.map((l,t)=>{return`${(e=>e/(a.length-1)*1e3)(t).toFixed(1)},${(d=l,300-(d-s)/(e-s)*300).toFixed(1)}`;var d}).join(" L ")};return l(()=>{o()}),(a,e)=>(g(),d("div",Zn,[n("div",{class:"section-header"},[e[1]||(e[1]=n("div",null,[n("h1",{class:"section-title"},"Анализ кривых доходности"),n("p",{class:"section-subtitle"},"Динамика рынка и стресс-сценарии")],-1)),n("div",{class:"header-controls"},[n("button",{class:"btn-refresh",onClick:o},[...e[0]||(e[0]=[n("span",{class:"icon"},"↻",-1),C(" Обновить ",-1)])])])]),n("div",Jn,[n("div",ac,[n("div",ec,[e[4]||(e[4]=p('<div class="panel-header" data-v-fec75330><h3 data-v-fec75330>Ежедневные изменения (%)</h3><div class="legend" data-v-fec75330><span class="l-item faded" data-v-fec75330><span class="dot bg-gray" data-v-fec75330></span> Кластеры волатильности</span><span class="l-item" data-v-fec75330><span class="dot bg-green" data-v-fec75330></span> Выбросы</span></div></div>',1)),n("div",sc,[(g(),d("svg",lc,[(g(),d(i,null,b(6,a=>n("line",{key:"g1-"+a,x1:"0",y1:50*a,x2:"1000",y2:50*a,stroke:"rgba(255,255,255,0.05)"},null,8,tc)),64)),e[2]||(e[2]=n("line",{x1:"0",y1:"150",x2:"1000",y2:"150",stroke:"rgba(255,255,255,0.2)","stroke-dasharray":"4"},null,-1)),(g(!0),d(i,null,b(s.value,(a,e)=>(g(),d("path",{key:"d-"+e,d:r(a,10,-10),fill:"none",stroke:`hsla(${Math.floor(360*Math.random())}, 60%, 70%, 0.4)`,"stroke-width":"0.8",opacity:"0.6"},null,8,dc))),128)),n("path",{d:r(s.value[48],10,-10),fill:"none",stroke:"#4ade80","stroke-width":"1.5"},null,8,ic)])),e[3]||(e[3]=n("div",{class:"chart-label"},"График 1: Изменения доходностей (%)",-1))])]),n("div",nc,[e[7]||(e[7]=p('<div class="panel-header" data-v-fec75330><h3 data-v-fec75330>Накопленные изменения (%)</h3><div class="legend" data-v-fec75330><span class="l-item" data-v-fec75330><span class="dot bg-blue" data-v-fec75330></span> US10Y</span><span class="l-item" data-v-fec75330><span class="dot bg-purple" data-v-fec75330></span> US02Y</span></div></div>',1)),n("div",cc,[(g(),d("svg",oc,[(g(),d(i,null,b(6,a=>n("line",{key:"g2-"+a,x1:"0",y1:50*a,x2:"1000",y2:50*a,stroke:"rgba(255,255,255,0.05)"},null,8,rc)),64)),e[5]||(e[5]=n("line",{x1:"0",y1:"150",x2:"1000",y2:"150",stroke:"rgba(255,255,255,0.2)","stroke-dasharray":"4"},null,-1)),(g(!0),d(i,null,b(t.value,(a,e)=>(g(),d("path",{key:"c-"+e,d:r(a,40,-40),fill:"none",stroke:"rgba(255,255,255,0.08)","stroke-width":"1"},null,8,vc))),128)),n("path",{d:r(c.value.US10Y,40,-40),fill:"none",stroke:"#3b82f6","stroke-width":"2.5"},null,8,uc),n("path",{d:r(c.value.US02Y,40,-40),fill:"none",stroke:"#a855f7","stroke-width":"2.5"},null,8,pc)])),e[6]||(e[6]=n("div",{class:"chart-label"},"График 2: Накопленный итог (%)",-1))])])]),e[8]||(e[8]=p('<aside class="stats-column" data-v-fec75330><div class="card glass-panel h-full sticky-panel" data-v-fec75330><div class="panel-header-sm" data-v-fec75330><h3 data-v-fec75330>Статистика волатильности</h3></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Максимальный дневной всплеск</span><span class="val text-red" data-v-fec75330>+8.4%</span></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Возврат к среднему</span><span class="val" data-v-fec75330>0.45</span></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Эксцесс</span><span class="val text-orange" data-v-fec75330>5.2</span></div><div class="divider" data-v-fec75330></div><div class="panel-header-sm" data-v-fec75330><h3 data-v-fec75330>Параметры</h3></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Количество облигаций</span><span class="val" data-v-fec75330>50</span></div><div class="stat-row" data-v-fec75330><span class="lbl" data-v-fec75330>Временной горизонт</span><span class="val" data-v-fec75330>18M</span></div><div class="divider" data-v-fec75330></div><div class="info-block" data-v-fec75330><p data-v-fec75330><strong data-v-fec75330>График 1:</strong> Показывает &quot;шум&quot; и кластеры волатильности. Всплеск в конце графика (зеленая линия) указывает на шоковое событие. </p><p class="mt-2" data-v-fec75330><strong data-v-fec75330>График 2:</strong> Показывает долгосрочный тренд, который формируется из этих ежедневных изменений. </p></div></div></aside>',1))])]))}}),[["__scopeId","data-v-fec75330"]]),bc={class:"bond-valuation-page"},mc={class:"page-header"},hc=["disabled"],gc={class:"card"},yc={class:"card-body"},kc={class:"params-grid"},xc={class:"form-group"},wc={class:"form-group"},Cc={class:"form-group"},Pc={class:"form-group"},Mc={key:0,class:"alert alert-danger"},Sc={key:1,class:"results-grid"},_c={class:"card"},Vc={class:"card-body"},Rc={class:"info-row"},Ic={class:"value"},Tc={class:"info-row"},Fc={class:"value"},Uc={class:"info-row"},Dc={class:"value"},Ac={class:"info-row"},Lc={class:"value"},Bc={class:"info-row"},Ec={class:"value"},Yc={class:"info-row"},$c={class:"value"},Nc={class:"card"},Oc={class:"card-body"},zc={class:"metric-large"},Hc={class:"metric-value text-gradient-blue"},qc={class:"metrics-row"},jc={class:"metric"},Qc={class:"metric-value"},Gc={class:"metric"},Wc={class:"metric-value text-gradient-green"},Kc={class:"info-row"},Xc={class:"value"},Zc={class:"info-row"},Jc={class:"value"},ao={key:2,class:"card table-card"},eo={class:"card-header"},so={class:"badge"},lo={class:"card-body"},to={class:"table-wrapper"},io={class:"data-table"},no={class:"mono"},co={class:"mono"},oo={class:"mono"},ro={class:"mono positive"},vo={key:3,class:"card table-card"},uo={class:"card-header"},po={class:"badge"},fo={class:"card-body"},bo={class:"table-wrapper"},mo={class:"data-table"},ho={class:"mono"},go=ma(a({__name:"BondValuation",setup(a){const s=e({secid:"RU000A10AU99",valuationDate:"2026-01-01",discountYield:14,dayCount:365}),t=e(null),r=e(!1),v=e(""),u=async()=>{r.value=!0,v.value="",t.value=null;try{const a=await fetch("http://localhost:8000/api/bond/valuation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secid:s.value.secid,valuation_date:s.value.valuationDate,discount_yield:s.value.discountYield/100,day_count:s.value.dayCount})});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const e=await a.json();t.value=e}catch(a){v.value=a.message||"Ошибка при расчёте облигации",console.error(a)}finally{r.value=!1}},p=(a,e=2)=>a.toLocaleString("ru-RU",{minimumFractionDigits:e,maximumFractionDigits:e}),f=a=>new Date(a).toLocaleDateString("ru-RU");return l(()=>{}),(a,e)=>(g(),d("div",bc,[n("div",mc,[e[4]||(e[4]=n("div",null,[n("h1",null,"Оценка облигаций"),n("p",{class:"subtitle"},"DCF-модель с данными MOEX ISS API")],-1)),n("button",{class:"btn btn-primary",onClick:u,disabled:r.value},m(r.value?"Загрузка...":"Рассчитать"),9,hc)]),n("div",gc,[e[10]||(e[10]=n("div",{class:"card-header"},[n("h3",null,"Параметры оценки")],-1)),n("div",yc,[n("div",kc,[n("div",xc,[e[5]||(e[5]=n("label",null,"ISIN оцениваемой облигации",-1)),P(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.secid=a),type:"text",class:"form-control",placeholder:"RU000A10AU99"},null,512),[[M,s.value.secid]])]),n("div",wc,[e[6]||(e[6]=n("label",null,"Дата оценки",-1)),P(n("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.valuationDate=a),type:"date",class:"form-control"},null,512),[[M,s.value.valuationDate]])]),n("div",Cc,[e[7]||(e[7]=n("label",null,"Доходность (аналога/индекса) %",-1)),P(n("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.discountYield=a),type:"number",step:"0.01",class:"form-control",placeholder:"14.0"},null,512),[[M,s.value.discountYield,void 0,{number:!0}]])]),n("div",Pc,[e[9]||(e[9]=n("label",null,"База расчета",-1)),P(n("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.dayCount=a),class:"form-control"},[...e[8]||(e[8]=[n("option",{value:365},"365 (Actual/365)",-1),n("option",{value:360},"360 (30/360)",-1)])],512),[[I,s.value.dayCount,void 0,{number:!0}]])])])])]),v.value?(g(),d("div",Mc,[e[11]||(e[11]=n("span",null,"⚠️",-1)),n("span",null,m(v.value),1)])):c("",!0),t.value?(g(),d("div",Sc,[n("div",_c,[e[18]||(e[18]=n("div",{class:"card-header"},[n("h3",null,"Параметры облигации")],-1)),n("div",Vc,[n("div",Rc,[e[12]||(e[12]=n("span",{class:"label"},"SECID:",-1)),n("span",Ic,m(t.value.secid),1)]),n("div",Tc,[e[13]||(e[13]=n("span",{class:"label"},"Номинал:",-1)),n("span",Fc,m(p(t.value.faceValue))+" ₽",1)]),n("div",Uc,[e[14]||(e[14]=n("span",{class:"label"},"Купон:",-1)),n("span",Dc,m(t.value.couponPercent)+"% годовых",1)]),n("div",Ac,[e[15]||(e[15]=n("span",{class:"label"},"Дата выпуска:",-1)),n("span",Lc,m(f(t.value.issueDate)),1)]),n("div",Bc,[e[16]||(e[16]=n("span",{class:"label"},"Дата погашения:",-1)),n("span",Ec,m(f(t.value.maturityDate)),1)]),n("div",Yc,[e[17]||(e[17]=n("span",{class:"label"},"Периодичность:",-1)),n("span",$c,m(t.value.paymentsPerYear)+" в год",1)])])]),n("div",Nc,[e[24]||(e[24]=n("div",{class:"card-header"},[n("h3",null,"Результаты оценки")],-1)),n("div",Oc,[n("div",zc,[e[19]||(e[19]=n("div",{class:"metric-label"},"Dirty Price (с НКД)",-1)),n("div",Hc,m(p(t.value.dirtyPrice,4))+" ₽ ",1)]),n("div",qc,[n("div",jc,[e[20]||(e[20]=n("div",{class:"metric-label"},"НКД",-1)),n("div",Qc,m(p(t.value.accruedInterest,4)),1)]),n("div",Gc,[e[21]||(e[21]=n("div",{class:"metric-label"},"Clean Price",-1)),n("div",Wc,m(p(t.value.cleanPrice,4)),1)])]),n("div",Kc,[e[22]||(e[22]=n("span",{class:"label"},"Цена в % от номинала:",-1)),n("span",Xc,m(p(t.value.pricePercent,3))+"%",1)]),n("div",Zc,[e[23]||(e[23]=n("span",{class:"label"},"Дюрация:",-1)),n("span",Jc,m(p(t.value.duration,4))+" лет",1)])])])])):c("",!0),t.value&&t.value.cashFlows?(g(),d("div",ao,[n("div",eo,[e[25]||(e[25]=n("h3",null,"Денежные потоки (дисконтированные)",-1)),n("span",so,m(t.value.cashFlows.length)+" платежей",1)]),n("div",lo,[n("div",to,[n("table",io,[e[27]||(e[27]=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"Дата"),n("th",null,"t (лет)"),n("th",null,"CF (₽)"),n("th",null,"DF"),n("th",null,"PV (₽)")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(t.value.cashFlows,(a,e)=>(g(),d("tr",{key:e},[n("td",null,m(e+1),1),n("td",null,m(f(a.date)),1),n("td",no,m(p(a.t,4)),1),n("td",co,m(p(a.cf,2)),1),n("td",oo,m(p(a.df,6)),1),n("td",{class:o(["mono",a.pv>0?"positive":""])},m(p(a.pv,4)),3)]))),128))]),n("tfoot",null,[n("tr",null,[e[26]||(e[26]=n("td",{colspan:"5",class:"text-right"},[n("strong",null,"Итого (Dirty Price):")],-1)),n("td",ro,[n("strong",null,m(p(t.value.dirtyPrice,4)),1)])])])])])])])):c("",!0),t.value&&t.value.allCoupons?(g(),d("div",vo,[n("div",uo,[e[28]||(e[28]=n("h3",null,"Полное расписание купонов",-1)),n("span",po,m(t.value.allCoupons.length)+" купонов",1)]),n("div",fo,[n("div",bo,[n("table",mo,[e[29]||(e[29]=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"Дата купона"),n("th",null,"Сумма (₽)"),n("th",null,"Статус")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(t.value.allCoupons,(a,e)=>(g(),d("tr",{key:e},[n("td",null,m(e+1),1),n("td",null,m(f(a.date)),1),n("td",ho,m(p(a.value,2)),1),n("td",null,[n("span",{class:o(["status-badge",a.isPaid?"paid":"future"])},m(a.isPaid?"✓ Выплачен":"◷ Будущий"),3)])]))),128))])])])])])):c("",!0)]))}}),[["__scopeId","data-v-45bcd34c"]]),yo={class:"bond-report-page"},ko={class:"page-header"},xo=["disabled"],wo={class:"card"},Co={class:"card-body"},Po={class:"params-grid"},Mo={class:"form-group"},So={class:"form-group"},_o={class:"form-group"},Vo={class:"form-group"},Ro=["disabled"],Io={key:0,class:"alert alert-danger"},To={key:1,class:"card"},Fo={class:"card-body"},Uo={class:"report-config"},Do={class:"config-section"},Ao={class:"checkbox-group"},Lo={class:"checkbox-label"},Bo={class:"checkbox-label"},Eo={class:"checkbox-label"},Yo={class:"checkbox-label"},$o={class:"checkbox-label"},No={class:"checkbox-label"},Oo={class:"config-section"},zo={class:"form-row"},Ho={class:"form-group"},qo={class:"form-group"},jo={class:"form-row"},Qo={class:"form-group"},Go={key:2,class:"card preview-card"},Wo={class:"card-body report-preview"},Ko={key:0,class:"report-section"},Xo={class:"summary-box"},Zo={key:1,class:"report-section"},Jo={class:"report-table"},ar={class:"value"},er={class:"value"},sr={class:"value"},lr={class:"value"},tr={class:"value"},dr={class:"value"},ir={key:2,class:"report-section"},nr={class:"report-table"},cr={class:"value"},or={class:"value"},rr={class:"value"},vr={class:"value"},ur={class:"value"},pr={key:3,class:"report-section"},fr={class:"table-scroll"},br={class:"report-table cf-table"},mr={class:"mono"},hr={class:"mono"},gr={class:"mono"},yr={class:"mono"},kr={class:"mono"},xr={key:4,class:"report-section"},wr={class:"table-scroll"},Cr={class:"report-table coupon-table"},Pr={class:"mono"},Mr={key:5,class:"report-section"},Sr={class:"report-table"},_r={class:"value"},Vr={class:"value"},Rr={class:"value"},Ir={class:"value"},Tr={key:0},Fr={class:"value"},Ur={class:"report-footer"},Dr={key:0},Ar={key:1},Lr={key:3,class:"action-bar"},Br=["disabled"],Er=ma(a({__name:"BondReport",setup(a){const s=e({secid:"RU000A10AU99",valuationDate:(new Date).toISOString().split("T")[0],discountYield:14,dayCount:365}),l=e(null),t=e(!1),o=e(""),r=e({includeExec:!0,includeBondInfo:!0,includeValuation:!0,includeCashFlows:!0,includeCoupons:!0,includeMetadata:!0,author:"Аналитик",company:"Компания",notes:""}),v=async()=>{t.value=!0,o.value="",l.value=null;try{const a=await fetch("http://localhost:8000/api/bond/valuation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secid:s.value.secid,valuation_date:s.value.valuationDate,discount_yield:s.value.discountYield/100,day_count:s.value.dayCount})});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const e=await a.json();l.value=e}catch(a){o.value=a.message||"Ошибка при расчёте облигации",console.error(a)}finally{t.value=!1}},u=()=>{l.value=null},p=async()=>{if(l.value)try{t.value=!0,window.print()}catch(a){o.value="Ошибка при генерации отчета"}finally{t.value=!1}},f=()=>{window.print()},h=async()=>{const a=document.querySelector(".report-preview");if(a)try{const e=a.innerText;await navigator.clipboard.writeText(e),alert("Отчет скопирован в буфер обмена")}catch(e){o.value="Ошибка при копировании"}},y=(a,e=2)=>a.toLocaleString("ru-RU",{minimumFractionDigits:e,maximumFractionDigits:e}),k=a=>new Date(a+"T00:00:00").toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return(a,e)=>(g(),d("div",yo,[n("div",ko,[e[13]||(e[13]=n("div",null,[n("h1",null,"Отчет по оценке облигаций"),n("p",{class:"subtitle"},"Формирование аналитического отчёта (DCF)")],-1)),n("button",{class:"btn btn-primary",onClick:p,disabled:t.value||!l.value},m(t.value?"Генерация...":"📄 Скачать PDF"),9,xo)]),n("div",wo,[e[19]||(e[19]=n("div",{class:"card-header"},[n("h3",null,"Шаг 1: Загрузка данных из оценки")],-1)),n("div",Co,[n("div",Po,[n("div",Mo,[e[14]||(e[14]=n("label",null,"Выберите облигацию (ISIN)",-1)),P(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.secid=a),type:"text",class:"form-control",placeholder:"RU000A10AU99",onChange:u},null,544),[[M,s.value.secid]])]),n("div",So,[e[15]||(e[15]=n("label",null,"Дата оценки",-1)),P(n("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.valuationDate=a),type:"date",class:"form-control",onChange:u},null,544),[[M,s.value.valuationDate]])]),n("div",_o,[e[16]||(e[16]=n("label",null,"Доходность %",-1)),P(n("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.discountYield=a),type:"number",step:"0.01",class:"form-control",placeholder:"14.0",onChange:u},null,544),[[M,s.value.discountYield,void 0,{number:!0}]])]),n("div",Vo,[e[18]||(e[18]=n("label",null,"База расчета",-1)),P(n("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.dayCount=a),class:"form-control",onChange:u},[...e[17]||(e[17]=[n("option",{value:365},"365 (Actual/365)",-1),n("option",{value:360},"360 (30/360)",-1)])],544),[[I,s.value.dayCount,void 0,{number:!0}]])])]),n("button",{class:"btn btn-secondary",onClick:v,disabled:t.value,style:{"margin-top":"12px",width:"100%"}},m(t.value?"Загрузка...":"Загрузить оценку"),9,Ro)])]),o.value?(g(),d("div",Io,[e[20]||(e[20]=n("span",null,"⚠️",-1)),n("span",null,m(o.value),1)])):c("",!0),l.value?(g(),d("div",To,[e[32]||(e[32]=n("div",{class:"card-header"},[n("h3",null,"Шаг 2: Конфигурация отчёта")],-1)),n("div",Fo,[n("div",Uo,[n("div",Do,[e[27]||(e[27]=n("h4",null,"Содержание отчета",-1)),n("div",Ao,[n("label",Lo,[P(n("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.includeExec=a),type:"checkbox"},null,512),[[U,r.value.includeExec]]),e[21]||(e[21]=n("span",null,"Резюме (Executive Summary)",-1))]),n("label",Bo,[P(n("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.value.includeBondInfo=a),type:"checkbox"},null,512),[[U,r.value.includeBondInfo]]),e[22]||(e[22]=n("span",null,"Параметры облигации",-1))]),n("label",Eo,[P(n("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>r.value.includeValuation=a),type:"checkbox"},null,512),[[U,r.value.includeValuation]]),e[23]||(e[23]=n("span",null,"Результаты оценки (Dirty/Clean Price)",-1))]),n("label",Yo,[P(n("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>r.value.includeCashFlows=a),type:"checkbox"},null,512),[[U,r.value.includeCashFlows]]),e[24]||(e[24]=n("span",null,"Таблица денежных потоков",-1))]),n("label",$o,[P(n("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>r.value.includeCoupons=a),type:"checkbox"},null,512),[[U,r.value.includeCoupons]]),e[25]||(e[25]=n("span",null,"График купонов",-1))]),n("label",No,[P(n("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>r.value.includeMetadata=a),type:"checkbox"},null,512),[[U,r.value.includeMetadata]]),e[26]||(e[26]=n("span",null,"Метаданные (дата, бэйс)",-1))])])]),n("div",Oo,[e[31]||(e[31]=n("h4",null,"Параметры отчета",-1)),n("div",zo,[n("div",Ho,[e[28]||(e[28]=n("label",null,"Автор отчета",-1)),P(n("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>r.value.author=a),type:"text",class:"form-control",placeholder:"Имя аналитика"},null,512),[[M,r.value.author]])]),n("div",qo,[e[29]||(e[29]=n("label",null,"Компания",-1)),P(n("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>r.value.company=a),type:"text",class:"form-control",placeholder:"Компания/Фонд"},null,512),[[M,r.value.company]])])]),n("div",jo,[n("div",Qo,[e[30]||(e[30]=n("label",null,"Дополнительные примечания",-1)),P(n("textarea",{"onUpdate:modelValue":e[12]||(e[12]=a=>r.value.notes=a),class:"form-control",rows:"4",placeholder:"Комментарии, допущения, ограничения модели..."},null,512),[[M,r.value.notes]])])])])])])])):c("",!0),l.value?(g(),d("div",Go,[e[68]||(e[68]=n("div",{class:"card-header"},[n("h3",null,"Шаг 3: Предпросмотр отчета")],-1)),n("div",Wo,[r.value.includeExec?(g(),d("div",Ko,[e[39]||(e[39]=n("h2",{class:"section-title"},"Резюме (Executive Summary)",-1)),n("div",Xo,[n("p",null,[e[33]||(e[33]=n("strong",null,"Облигация:",-1)),C(" "+m(l.value.secid),1)]),n("p",null,[e[34]||(e[34]=n("strong",null,"Номинал:",-1)),C(" "+m(y(l.value.faceValue))+" ₽",1)]),n("p",null,[e[35]||(e[35]=n("strong",null,"Справедливая стоимость (Dirty Price):",-1)),C(" "+m(y(l.value.dirtyPrice,4))+" ₽ ("+m(y(l.value.pricePercent,2))+"% от номинала)",1)]),n("p",null,[e[36]||(e[36]=n("strong",null,"Чистая цена (Clean Price):",-1)),C(" "+m(y(l.value.cleanPrice,4))+" ₽",1)]),n("p",null,[e[37]||(e[37]=n("strong",null,"Дюрация:",-1)),C(" "+m(y(l.value.duration,4))+" лет",1)]),n("p",null,[e[38]||(e[38]=n("strong",null,"Дата оценки:",-1)),C(" "+m(k(s.value.valuationDate)),1)])])])):c("",!0),r.value.includeBondInfo?(g(),d("div",Zo,[e[46]||(e[46]=n("h2",{class:"section-title"},"Параметры облигации",-1)),n("table",Jo,[n("tr",null,[e[40]||(e[40]=n("td",{class:"label"},"SECID/ISIN:",-1)),n("td",ar,m(l.value.secid),1)]),n("tr",null,[e[41]||(e[41]=n("td",{class:"label"},"Номинал:",-1)),n("td",er,m(y(l.value.faceValue))+" ₽",1)]),n("tr",null,[e[42]||(e[42]=n("td",{class:"label"},"Купон:",-1)),n("td",sr,m(y(l.value.couponPercent,3))+"% годовых",1)]),n("tr",null,[e[43]||(e[43]=n("td",{class:"label"},"Дата выпуска:",-1)),n("td",lr,m(k(l.value.issueDate)),1)]),n("tr",null,[e[44]||(e[44]=n("td",{class:"label"},"Дата погашения:",-1)),n("td",tr,m(k(l.value.maturityDate)),1)]),n("tr",null,[e[45]||(e[45]=n("td",{class:"label"},"Периодичность выплат:",-1)),n("td",dr,m(l.value.paymentsPerYear)+" раз(а) в год",1)])])])):c("",!0),r.value.includeValuation?(g(),d("div",ir,[e[52]||(e[52]=n("h2",{class:"section-title"},"Результаты оценки",-1)),n("table",nr,[n("tr",null,[e[47]||(e[47]=n("td",{class:"label"},"Dirty Price (с НКД):",-1)),n("td",cr,m(y(l.value.dirtyPrice,4))+" ₽",1)]),n("tr",null,[e[48]||(e[48]=n("td",{class:"label"},"Накопленный купонный доход (НКД):",-1)),n("td",or,m(y(l.value.accruedInterest,4))+" ₽",1)]),n("tr",null,[e[49]||(e[49]=n("td",{class:"label"},"Clean Price (без НКД):",-1)),n("td",rr,m(y(l.value.cleanPrice,4))+" ₽",1)]),n("tr",null,[e[50]||(e[50]=n("td",{class:"label"},"Цена в % от номинала:",-1)),n("td",vr,m(y(l.value.pricePercent,3))+"%",1)]),n("tr",null,[e[51]||(e[51]=n("td",{class:"label"},"Дюрация Маколея:",-1)),n("td",ur,m(y(l.value.duration,4))+" лет",1)])])])):c("",!0),r.value.includeCashFlows&&l.value.cashFlows?(g(),d("div",pr,[e[55]||(e[55]=n("h2",{class:"section-title"},"Денежные потоки (DCF)",-1)),e[56]||(e[56]=n("p",{class:"section-desc"},"Таблица дисконтированных денежных потоков. Сумма приведённых стоимостей равна Dirty Price.",-1)),n("div",fr,[n("table",br,[e[54]||(e[54]=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"Дата"),n("th",null,"t (лет)"),n("th",null,"CF (₽)"),n("th",null,"DF"),n("th",null,"PV (₽)")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(l.value.cashFlows,(a,e)=>(g(),d("tr",{key:e},[n("td",null,m(e+1),1),n("td",null,m(k(a.date)),1),n("td",mr,m(y(a.t,4)),1),n("td",hr,m(y(a.cf,2)),1),n("td",gr,m(y(a.df,6)),1),n("td",yr,m(y(a.pv,4)),1)]))),128))]),n("tfoot",null,[n("tr",null,[e[53]||(e[53]=n("td",{colspan:"5",class:"text-right"},[n("strong",null,"Итого (Dirty Price):")],-1)),n("td",kr,[n("strong",null,m(y(l.value.dirtyPrice,4)),1)])])])])])])):c("",!0),r.value.includeCoupons&&l.value.allCoupons?(g(),d("div",xr,[e[58]||(e[58]=n("h2",{class:"section-title"},"График купонных выплат",-1)),e[59]||(e[59]=n("p",{class:"section-desc"},"Полное расписание выплат купонов и номинала.",-1)),n("div",wr,[n("table",Cr,[e[57]||(e[57]=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"Дата купона"),n("th",null,"Сумма (₽)"),n("th",null,"Статус")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(l.value.allCoupons,(a,e)=>(g(),d("tr",{key:e},[n("td",null,m(e+1),1),n("td",null,m(k(a.date)),1),n("td",Pr,m(y(a.value,2)),1),n("td",null,m(a.isPaid?"✓ Выплачен":"◷ Будущий"),1)]))),128))])])])])):c("",!0),r.value.includeMetadata?(g(),d("div",Mr,[e[65]||(e[65]=n("h2",{class:"section-title"},"Метаданные модели",-1)),n("table",Sr,[n("tr",null,[e[60]||(e[60]=n("td",{class:"label"},"Дата оценки:",-1)),n("td",_r,m(k(s.value.valuationDate)),1)]),n("tr",null,[e[61]||(e[61]=n("td",{class:"label"},"Дисконтная ставка (YTM):",-1)),n("td",Vr,m(y(s.value.discountYield,3))+"%",1)]),n("tr",null,[e[62]||(e[62]=n("td",{class:"label"},"База расчета дней:",-1)),n("td",Rr,m(s.value.dayCount)+" дней",1)]),n("tr",null,[e[63]||(e[63]=n("td",{class:"label"},"Количество денежных потоков:",-1)),n("td",Ir,m(l.value.cashFlows.length),1)]),r.value.notes?(g(),d("tr",Tr,[e[64]||(e[64]=n("td",{class:"label"},"Примечания:",-1)),n("td",Fr,m(r.value.notes),1)])):c("",!0)])])):c("",!0),n("div",Ur,[r.value.author?(g(),d("p",Dr,[e[66]||(e[66]=n("strong",null,"Автор:",-1)),C(" "+m(r.value.author),1)])):c("",!0),r.value.company?(g(),d("p",Ar,[e[67]||(e[67]=n("strong",null,"Компания:",-1)),C(" "+m(r.value.company),1)])):c("",!0),n("p",null,[n("small",null,"Отчет сформирован: "+m((new Date).toLocaleString("ru-RU")),1)])])])])):c("",!0),l.value?(g(),d("div",Lr,[n("button",{class:"btn btn-primary",onClick:p,disabled:t.value},m(t.value?"Генерация PDF...":"📄 Скачать отчет PDF"),9,Br),n("button",{class:"btn btn-secondary",onClick:f}," 🖨️ Печать "),n("button",{class:"btn btn-secondary",onClick:h}," 📋 Копировать в буфер ")])):c("",!0)]))}}),[["__scopeId","data-v-a636050a"]]);z.register(...H);const Yr={class:"zcyc-page"},$r={class:"page-header"},Nr=["disabled"],Or={class:"card"},zr={class:"card-body"},Hr={class:"params-grid"},qr={class:"form-group"},jr=["max"],Qr={class:"form-group"},Gr={class:"period-search-wrapper"},Wr={key:0,class:"period-suggestions"},Kr=["onClick"],Xr={class:"suggestion-term"},Zr={class:"suggestion-rate"},Jr={class:"form-hint"},av={key:0,class:"alert alert-danger"},ev={key:1,class:"card period-result-card"},sv={class:"card-body period-result-body"},lv={class:"result-grid"},tv={class:"result-item"},dv={class:"result-value"},iv={class:"result-item"},nv={class:"result-value text-gradient-blue"},cv={class:"result-item"},ov={class:"result-value"},rv={class:"badge-type"},vv={class:"result-item"},uv={class:"result-value mono"},pv={key:2,class:"stats-grid"},fv={class:"stat-card"},bv={class:"stat-value"},mv={class:"stat-card"},hv={class:"stat-value"},gv={class:"stat-card"},yv={class:"stat-value text-gradient-blue"},kv={class:"stat-card"},xv={class:"stat-value text-gradient-green"},wv={class:"stat-card"},Cv={class:"stat-value"},Pv={class:"stat-card"},Mv={class:"stat-value mono"},Sv={key:3,class:"card chart-card"},_v={class:"card-body chart-body"},Vv={key:4,class:"card table-card"},Rv={class:"card-header"},Iv={class:"badge"},Tv={class:"card-body"},Fv={class:"table-wrapper"},Uv={class:"data-table"},Dv={class:"mono"},Av={class:"mono text-gradient-blue"},Lv={class:"badge-type"},Bv={key:5,class:"card info-card"},Ev={class:"page-container center-content"},Yv={class:"card glass-panel not-found-card"},$v={class:"content-wrapper"},Nv={class:"actions"},Ov={class:"suggestions"},zv={class:"links-row"},Hv=[{path:"/",name:"Home",component:Xa,meta:{title:"Главная",icon:"🏠",bare:!0}},{path:"/",component:za,children:[{path:"dashboard",component:ue,name:"Сводный дашборд по портфельному анализу",meta:{title:"Дашборд",icon:"📊"}},{path:"portfolio",component:rs,name:"Портфель",meta:{title:"Портфель",icon:"💼"}},{path:"monte-carlo",component:ul,name:"Монте-Карло",meta:{title:"Monte Carlo",icon:"🎲"}},{path:"greeks",component:nt,name:"Риск-метрики",meta:{title:"Греческие параметры",icon:"🎯",badge:"3"}},{path:"stress",component:dd,name:"Стресс-тестирование",meta:{title:"Стресс-тестирование",icon:"⚡"},alias:"stress-testing"},{path:"backtest",component:Cd,name:"Бэктестинг",meta:{title:"Бэктестинг",icon:"📉"}},{path:"reports",component:Ad,name:"Отчёты",meta:{title:"Отчёты",icon:"📋"}},{path:"settings",component:Wi,name:"Настройки",meta:{title:"Настройки",icon:"⚙️"},alias:"parameters"},{path:"regimes",component:Wn,name:"Анализ режимов",meta:{title:"Рыночные режимы",icon:"🌊"}},{path:"fixed-income",component:fc,name:"Доходности облигаций",meta:{title:"Доходность облигаций",icon:"📈"}},{path:"regime-details",component:Xn,name:"Режимная аналитика",meta:{title:"HMM Аналитика",icon:"🔬"}},{path:"bond-valuation",component:go,name:"BondValuation",meta:{title:"Оценка облигаций",icon:"💰"}},{path:"bond-report",component:Er,name:"BondReport",meta:{title:"Отчёт по облигациям",icon:"📄"}},{path:"zcyc",component:ma(a({__name:"ZCYCViewer",setup(a){const s=e({date:(new Date).toISOString().split("T")[0]}),t=e(null),r=e(!1),v=e(""),u=e(null),f=e(null),h=e(""),y=e(null),x=e(!1),w=(new Date).toISOString().split("T")[0],S=k(()=>{if(!h.value||!t.value)return[];const a=parseFloat(h.value);return isNaN(a)?[]:t.value.data.map(e=>({...e,diff:Math.abs(e.term-a)})).sort((a,e)=>a.diff-e.diff).slice(0,10).map(({diff:a,...e})=>e)}),_=async()=>{r.value=!0,v.value="",t.value=null,y.value=null;try{const a=new URL("http://127.0.0.1:8000/api/zcyc");s.value.date&&a.searchParams.append("date",s.value.date);const e=await fetch(a.toString());if(!e.ok){const a=await e.json();throw new Error(a.message||`HTTP ${e.status}`)}const l=await e.json();t.value=l,await new Promise(a=>setTimeout(a,0)),T(l)}catch(a){v.value=a.message||"Ошибка при загрузке КБД",console.error(a)}finally{r.value=!1}},V=()=>{x.value=h.value.length>0},I=()=>{if(!h.value||!t.value)return void(y.value=null);const a=parseFloat(h.value);if(isNaN(a))return void(y.value=null);if(a<t.value.min_term||a>t.value.max_term)return v.value=`Период должен быть в диапазоне ${U(t.value.min_term,4)} – ${U(t.value.max_term,2)} лет`,void(y.value=null);const e=(a=>{if(!t.value||t.value.data.length<2)return null;const e=t.value.data,s=e.find(e=>Math.abs(e.term-a)<1e-4);if(s)return s.value;let l=null,d=null;for(let t=0;t<e.length;t++)e[t].term<=a&&(!l||e[t].term>l.term)&&(l=e[t]),e[t].term>=a&&(!d||e[t].term<d.term)&&(d=e[t]);if(!l)return e[0].value;if(!d)return e[e.length-1].value;if(!l||!d||l===d)return l?.value||null;const i=(a-l.term)/(d.term-l.term);return l.value+i*(d.value-l.value)})(a);null!==e?(v.value="",y.value={term:a,value:e}):(v.value="Ошибка при интерполяции",y.value=null)},T=a=>{if(!u.value)return;f.value&&f.value.destroy();const e=u.value.getContext("2d");e&&(f.value=new z(e,{type:"line",data:{labels:a.data.map(a=>`${a.term.toFixed(2)}y`),datasets:[{label:"Ставка КБД (%)",data:a.data.map(a=>a.value),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2.5,fill:!0,tension:.35,pointRadius:4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#ffffff",pointBorderWidth:1.5,pointHoverRadius:6,pointHoverBackgroundColor:"#1e40af"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{boxWidth:12,padding:15,font:{size:14,weight:600},color:"#9ca3af"}},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:13,weight:600},bodyFont:{size:12},borderColor:"#3b82f6",borderWidth:1,titleColor:"#3b82f6",bodyColor:"#e5e7eb",displayColors:!1,callbacks:{label:a=>`Ставка: ${Number(a.parsed.y).toFixed(3)}%`}}},scales:{y:{beginAtZero:!1,min:10,max:16,ticks:{stepSize:.5},grid:{color:"rgba(255, 255, 255, 0.08)",drawBorder:!1,lineWidth:1},ticks:{color:"#9ca3af",font:{size:12},callback:a=>`${Number(a).toFixed(1)}%`,padding:10},title:{display:!0,text:"Ставка, % годовых",font:{weight:"bold",size:14},color:"#9ca3af",padding:12}},x:{grid:{display:!1,drawBorder:!1},ticks:{color:"#9ca3af",font:{size:12},padding:10,maxRotation:0},title:{display:!0,text:"Срок до погашения",font:{weight:"bold",size:14},color:"#9ca3af",padding:12}}}}}))},F=a=>a<=.5?"Ночной":a<=1?"Краткосрочный":a<=3?"Среднесрочный":a<=5?"Долгосрочный":"Очень долгосрочный",U=(a,e=2)=>a.toLocaleString("ru-RU",{minimumFractionDigits:e,maximumFractionDigits:e}),A=a=>new Date(a+"T00:00:00").toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return l(()=>{_()}),(a,e)=>(g(),d("div",Yr,[n("div",$r,[e[2]||(e[2]=n("div",null,[n("h1",null,"КБД (Zero-Coupon Yield Curve)"),n("p",{class:"subtitle"},"Кривая бескупонных доходностей от MOEX ISS API")],-1)),n("button",{class:"btn btn-primary",onClick:_,disabled:r.value},m(r.value?"Загрузка...":"Загрузить КБД"),9,Nr)]),n("div",Or,[e[6]||(e[6]=n("div",{class:"card-header"},[n("h3",null,"Параметры загрузки")],-1)),n("div",zr,[n("div",Hr,[n("div",qr,[e[3]||(e[3]=n("label",null,"Дата расчёта",-1)),P(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.date=a),type:"date",class:"form-control",max:R(w)},null,8,jr),[[M,s.value.date]]),e[4]||(e[4]=n("small",{class:"form-hint"},"Если дата недоступна, система найдёт последнюю доступную",-1))]),n("div",Qr,[e[5]||(e[5]=n("label",null,"Поиск периода (срок в годах)",-1)),n("div",Gr,[P(n("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>h.value=a),type:"number",step:"0.01",class:"form-control period-input",placeholder:"Введите срок (например 2.23)",onInput:V,onChange:I,onKeydown:D(I,["enter"])},null,544),[[M,h.value]]),x.value&&S.value.length>0?(g(),d("div",Wr,[(g(!0),d(i,null,b(S.value.slice(0,5),(a,e)=>(g(),d("div",{key:e,class:"suggestion-item",onClick:e=>(a=>{a&&(y.value=a,h.value=U(a.term,4),x.value=!1)})(a)},[n("span",Xr,m(U(a.term,4))+" лет",1),n("span",Zr,m(U(a.value,3))+"%",1)],8,Kr))),128))])):c("",!0)]),n("small",Jr,m(y.value?`Поиск: ${U(y.value.term,4)} лет → ${U(y.value.value,4)}% (интерполяция)`:"Введите срок и нажмите Enter или потеряйте фокус"),1)])])])]),v.value?(g(),d("div",av,[e[7]||(e[7]=n("span",null,"⚠️",-1)),n("span",null,m(v.value),1)])):c("",!0),y.value&&t.value?(g(),d("div",ev,[e[14]||(e[14]=n("div",{class:"card-header"},[n("h3",null,"📊 Результат поиска периода (интерполяция)")],-1)),n("div",sv,[n("div",lv,[n("div",tv,[e[9]||(e[9]=n("div",{class:"result-label"},"Запрошенный период",-1)),n("div",dv,[C(m(U(y.value.term,4))+" ",1),e[8]||(e[8]=n("span",{class:"unit"},"лет",-1))])]),n("div",iv,[e[11]||(e[11]=n("div",{class:"result-label"},"Интерполированная доходность",-1)),n("div",nv,[C(m(U(y.value.value,4))+" ",1),e[10]||(e[10]=n("span",{class:"unit"},"%",-1))])]),n("div",cv,[e[12]||(e[12]=n("div",{class:"result-label"},"Классификация",-1)),n("div",ov,[n("span",rv,m(F(y.value.term)),1)])]),n("div",vv,[e[13]||(e[13]=n("div",{class:"result-label"},"На дату",-1)),n("div",uv,m(A(t.value.date)),1)])])])])):c("",!0),t.value?(g(),d("div",pv,[n("div",fv,[e[15]||(e[15]=n("div",{class:"stat-label"},"Дата КБД",-1)),n("div",bv,m(A(t.value.date)),1)]),n("div",mv,[e[16]||(e[16]=n("div",{class:"stat-label"},"Точек на кривой",-1)),n("div",hv,m(t.value.count),1)]),n("div",gv,[e[17]||(e[17]=n("div",{class:"stat-label"},"Минимальная ставка",-1)),n("div",yv,m(U(t.value.min_rate,3))+"%",1)]),n("div",kv,[e[18]||(e[18]=n("div",{class:"stat-label"},"Максимальная ставка",-1)),n("div",xv,m(U(t.value.max_rate,3))+"%",1)]),n("div",wv,[e[19]||(e[19]=n("div",{class:"stat-label"},"Средняя ставка",-1)),n("div",Cv,m(U(t.value.mean_rate,3))+"%",1)]),n("div",Pv,[e[20]||(e[20]=n("div",{class:"stat-label"},"Диапазон сроков",-1)),n("div",Mv,m(U(t.value.min_term,4))+" – "+m(U(t.value.max_term,2))+" лет",1)])])):c("",!0),t.value?(g(),d("div",Sv,[e[21]||(e[21]=n("div",{class:"card-header"},[n("h3",null,"Визуализация КБД")],-1)),n("div",_v,[n("canvas",{ref_key:"chartCanvas",ref:u,class:"chart-canvas"},null,512)])])):c("",!0),t.value&&t.value.data?(g(),d("div",Vv,[n("div",Rv,[e[22]||(e[22]=n("h3",null,"Таблица данных КБД",-1)),n("span",Iv,m(t.value.data.length)+" точек",1)]),n("div",Tv,[n("div",Fv,[n("table",Uv,[e[23]||(e[23]=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"Срок (годы)"),n("th",null,"Ставка (%)"),n("th",null,"Тип")])],-1)),n("tbody",null,[(g(!0),d(i,null,b(t.value.data,(a,e)=>{return g(),d("tr",{key:e,class:o((s=a.term,{"short-term":s<=1,"medium-term":s>1&&s<=3,"long-term":s>3}))},[n("td",null,m(e+1),1),n("td",Dv,m(U(a.term,4)),1),n("td",Av,m(U(a.value,4)),1),n("td",null,[n("span",Lv,m(F(a.term)),1)])],2);var s}),128))])])])])])):c("",!0),t.value?(g(),d("div",Bv,[...e[24]||(e[24]=[p('<div class="card-header" data-v-d0f6cb1d><h3 data-v-d0f6cb1d>ℹ️ Информация</h3></div><div class="card-body" data-v-d0f6cb1d><p class="info-text" data-v-d0f6cb1d><strong data-v-d0f6cb1d>КБД (Кривая бескупонных доходностей)</strong> — это зависимость доходности до погашения бескупонных облигаций от сроков до их погашения. Используется для оценки облигаций с купонами и как основа для построения других кривых доходности. </p><p class="info-text" data-v-d0f6cb1d><strong data-v-d0f6cb1d>Источник:</strong> MOEX ISS API (engines/stock/zcyc.json) </p><p class="info-text" data-v-d0f6cb1d><strong data-v-d0f6cb1d>Автоматический fallback:</strong> Если на выбранную дату нет расчётов (выходной/праздник), система автоматически найдёт последнюю доступную дату в течение 7 дней назад. </p><p class="info-text" data-v-d0f6cb1d><strong data-v-d0f6cb1d>Интерполяция периода:</strong> Введите любой срок в годах (например 2.23, 5.5, 10.1). Если срок не совпадает ни с одной точкой кривой, система автоматически вычислит доходность методом линейной интерполяции между двумя ближайшими точками. </p></div>',2)])])):c("",!0)]))}}),[["__scopeId","data-v-d0f6cb1d"]]),name:"ZCYCViewer",meta:{title:"ZCYC",icon:"📈"}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:ma(a({__name:"NotFound",setup(a){const e=()=>{window.history.back()};return(a,s)=>{const l=v("router-link");return g(),d("div",Ev,[n("div",Yv,[s[8]||(s[8]=n("div",{class:"glow-bg"},null,-1)),n("div",$v,[s[6]||(s[6]=p('<div class="error-code-container" data-v-2359607e><span class="error-code" data-v-2359607e>404</span><div class="scan-line" data-v-2359607e></div></div><h1 class="error-title" data-v-2359607e>Страница не найдена</h1><p class="error-desc" data-v-2359607e> Похоже, вы вышли за пределы известной вселенной или доступных данных. </p>',3)),n("div",Nv,[r(l,{to:"/",class:"btn btn-primary-gradient"},{default:u(()=>[...s[0]||(s[0]=[n("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),C(" Вернуться на Дашборд ",-1)])]),_:1}),n("button",{onClick:e,class:"btn btn-outline"},[...s[1]||(s[1]=[n("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),C(" Назад ",-1)])])]),s[7]||(s[7]=n("div",{class:"divider"},null,-1)),n("div",Ov,[s[5]||(s[5]=n("span",{class:"suggestions-lbl"},"Быстрый переход:",-1)),n("div",zv,[r(l,{to:"/risk-metrics",class:"link-pill"},{default:u(()=>[...s[2]||(s[2]=[C("Риск-метрики",-1)])]),_:1}),r(l,{to:"/monte-carlo",class:"link-pill"},{default:u(()=>[...s[3]||(s[3]=[C("Монте-Карло",-1)])]),_:1}),r(l,{to:"/stress-testing",class:"link-pill"},{default:u(()=>[...s[4]||(s[4]=[C("Стресс-тесты",-1)])]),_:1})])])])])])}}}),[["__scopeId","data-v-2359607e"]]),meta:{title:"404"}}],qv=A({history:L("/stochastic-dashbord-v1/"),routes:Hv});qv.beforeEach((a,e,s)=>{const l=a.meta?.title||"QuantPro";document.title=`${l} | Risk Management`,s()});const jv=y("theme",()=>{const a=e("dark"),s=a=>{const e=document.documentElement;e.style.colorScheme=a,"light"===a?(e.classList.add("light-theme"),e.classList.remove("dark-theme")):(e.classList.add("dark-theme"),e.classList.remove("light-theme"))};return{theme:a,initTheme:()=>{const e=localStorage.getItem("theme")||"dark";a.value=e,s(e)},toggleTheme:()=>{a.value="dark"===a.value?"light":"dark",localStorage.setItem("theme",a.value),console.log("🎨 Theme changed to:",a.value),s(a.value)}}}),Qv={class:"palette-header"},Gv=["onKeydown"],Wv={class:"palette-body custom-scroll"},Kv={key:0,class:"no-results"},Xv={class:"group-title"},Zv=["onClick","onMouseenter"],Jv={class:"cmd-left"},au={class:"cmd-icon"},eu={class:"cmd-label"},su={key:0,class:"cmd-desc"},lu={key:0,class:"cmd-shortcut"},tu=a({__name:"CommandPalette",setup(a){const s=_(),v=e(!1),p=e(""),f=e(null),h=e(null),y=[{id:"nav-home",label:"Go to Home",group:"Navigation",icon:"🏠",action:()=>s.push("/")},{id:"nav-dash",label:"Go to Dashboard",group:"Navigation",icon:"📊",action:()=>s.push("/dashboard")},{id:"nav-port",label:"Go to Portfolio",group:"Navigation",icon:"💼",action:()=>s.push("/portfolio")},{id:"nav-opt",label:"Option Pricing",group:"Navigation",icon:"ƒ",desc:"Calc fair value",action:()=>s.push("/pricing/options")},{id:"nav-hmm",label:"Market Regimes",group:"Navigation",icon:"🌊",action:()=>s.push("/regimes")},{id:"nav-rep",label:"Reports",group:"Navigation",icon:"📋",action:()=>s.push("/reports")},{id:"act-mc",label:"Run Monte Carlo",group:"Actions",icon:"🎲",desc:"Start simulation",action:()=>console.log("Running MC...")},{id:"act-recalc",label:"Recalculate Greeks",group:"Actions",icon:"∑",action:()=>console.log("Recalc Greeks...")},{id:"act-pdf",label:"Export PDF",group:"Actions",icon:"📄",action:()=>console.log("Exporting...")},{id:"sys-theme",label:"Toggle Theme",group:"System",icon:"🌗",shortcut:"Cmd+T",action:()=>console.log("Toggle theme")},{id:"sys-set",label:"Settings",group:"System",icon:"⚙️",action:()=>s.push("/settings")}],S=k(()=>{if(!p.value)return y;const a=p.value.toLowerCase();return y.filter(e=>e.label.toLowerCase().includes(a)||e.group.toLowerCase().includes(a)||e.desc?.toLowerCase().includes(a))}),V=k(()=>{const a={};return S.value.forEach(e=>{a[e.group]||(a[e.group]=[]),a[e.group].push(e)}),a}),R=k(()=>Object.values(V.value).flat());T(S,a=>{a.length>0?h.value=a[0].id:h.value=null});const I=()=>{v.value=!1},F=a=>{a.action(),I()},U=()=>{const a=R.value.find(a=>a.id===h.value);a&&F(a)},A=a=>{const e=R.value,s=e.findIndex(a=>a.id===h.value);-1!==s&&(h.value="down"===a?e[s+1]?.id||e[0].id:e[s-1]?.id||e[e.length-1].id)},L=a=>{(a.metaKey||a.ctrlKey)&&"k"===a.key&&(a.preventDefault(),v.value?I():(v.value=!0,p.value="",h.value=R.value[0]?.id||null,E(()=>f.value?.focus())))};return l(()=>window.addEventListener("keydown",L)),t(()=>window.removeEventListener("keydown",L)),(a,e)=>(g(),x(B,{to:"body"},[r(w,{name:"fade"},{default:u(()=>[v.value?(g(),d("div",{key:0,class:"palette-backdrop",onClick:I},[n("div",{class:"palette-modal",onClick:e[3]||(e[3]=Y(()=>{},["stop"]))},[n("div",Qv,[e[4]||(e[4]=n("span",{class:"search-icon"},[n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("circle",{cx:"11",cy:"11",r:"8"}),n("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),P(n("input",{ref_key:"searchInput",ref:f,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),type:"text",placeholder:"Type a command or search...",class:"palette-input",onKeydown:[e[1]||(e[1]=D(Y(a=>A("down"),["prevent"]),["down"])),e[2]||(e[2]=D(Y(a=>A("up"),["prevent"]),["up"])),D(Y(U,["prevent"]),["enter"]),D(I,["esc"])]},null,40,Gv),[[M,p.value]]),e[5]||(e[5]=n("span",{class:"esc-badge"},"ESC",-1))]),n("div",Wv,[0===S.value.length?(g(),d("div",Kv," No matching commands found. ")):(g(!0),d(i,{key:1},b(V.value,(a,e)=>(g(),d("div",{key:e,class:"command-group"},[n("div",Xv,m(e),1),(g(!0),d(i,null,b(a,a=>(g(),d("button",{key:a.id,class:o(["command-item",{selected:h.value===a.id}]),onClick:e=>F(a),onMouseenter:e=>h.value=a.id},[n("div",Jv,[n("span",au,m(a.icon),1),n("span",eu,[C(m(a.label)+" ",1),a.desc?(g(),d("span",su,"— "+m(a.desc),1)):c("",!0)])]),a.shortcut?(g(),d("div",lu,m(a.shortcut),1)):c("",!0)],42,Zv))),128))]))),128))]),e[6]||(e[6]=n("div",{class:"palette-footer"},[n("div",{class:"footer-item"},[n("span",null,"↵"),C(" to select")]),n("div",{class:"footer-item"},[n("span",null,"↑↓"),C(" to navigate")])],-1))])])):c("",!0)]),_:1})]))}}),du=ma(tu,[["__scopeId","data-v-7c5538ab"]]),iu=a({__name:"App",setup(a){const e=jv();return l(()=>{e.initTheme()}),(a,e)=>{const s=v("router-view");return g(),d(i,null,[r(du),r(s)],64)}}}),nu=y("theme",()=>{const a=e("dark"),s={"--color-bg-primary":"#050505","--color-bg-secondary":"#0a0a0a","--color-bg-tertiary":"#141414","--color-bg-glass":"rgba(20, 20, 20, 0.65)","--color-bg-glass-light":"rgba(255, 255, 255, 0.05)","--color-accent-primary":"#ffffff","--color-accent-secondary":"#737373","--color-accent-success":"#22c55e","--color-accent-warning":"#f59e0b","--color-accent-danger":"#ef4444","--color-text-primary":"#fafafa","--color-text-secondary":"#a3a3a3","--color-text-tertiary":"#525252","--color-border":"rgba(255, 255, 255, 0.08)","--color-border-hover":"rgba(255, 255, 255, 0.15)","--shadow-sm":"0 0 0 1px rgba(255,255,255,0.05)","--shadow-md":"0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255,255,255,0.05)","--shadow-lg":"0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255,255,255,0.05)"},l=()=>{a.value="dark",(()=>{const a=document.documentElement;Object.entries(s).forEach(([e,s])=>{a.style.setProperty(e,s)}),a.classList.add("dark"),a.style.colorScheme="dark"})()};return{theme:a,initTheme:l,toggleTheme:()=>{l()}}}),cu=$(iu),ou=N();cu.use(ou),cu.use(qv);nu().initTheme(),cu.mount("#app");
