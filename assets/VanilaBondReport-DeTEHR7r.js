import{d as e,v as a,u as l,r as s,o as t,R as i,c as n,e as u,t as o,j as r,x as d,y as c,n as p,I as v,f as g,F as y,i as _,p as m,q as h}from"./vendor-DLyKmMu8.js";import{C as b}from"./auto-DlDBEVoY.js";import{u as f,w as k}from"./xlsx-Dmkey_AY.js";import{f as x,a as F}from"./bondReportService-BwKJxX67.js";import{_ as S}from"./index-Ba4DjugF.js";const C={class:"page-container"},I={class:"section-header"},w={class:"header-left"},R={key:0,class:"section-title"},$={key:1,class:"section-title"},U={key:2,class:"section-subtitle"},z={class:"text-accent"},D={key:3,class:"section-subtitle"},V={class:"text-accent"},A={class:"header-actions"},M={class:"glass-pill"},N=["disabled"],T={class:"glass-pill"},P=["disabled"],W={key:0,class:"state-section"},Y={class:"glass-card"},G={key:1,class:"state-section"},E={class:"glass-card error"},O={key:2,class:"state-section"},j={key:3,class:"report-content"},B={class:"grid-2"},X={class:"glass-card"},J={class:"info-table"},L={class:"value"},q={key:1},H={class:"value mono"},K={class:"value"},Z={key:1},Q={class:"value"},ee={key:1},ae={class:"value"},le={key:1},se={class:"value mono"},te={key:1},ie={class:"glass-card"},ne={class:"info-table"},ue={class:"value mono"},oe={key:1},re={class:"value mono"},de={key:1},ce={class:"value"},pe={key:1},ve={key:0,class:"accent"},ge={key:1},ye={class:"value mono"},_e={key:1},me={class:"value mono"},he={class:"value"},be={key:0,class:"accent"},fe={key:1},ke={class:"value"},xe={class:"value"},Fe={class:"grid-3"},Se={class:"glass-card"},Ce={key:0,class:"ratings-list"},Ie={class:"agency"},we={class:"grade"},Re={class:"date mono"},$e={key:1,class:"muted"},Ue={class:"glass-card"},ze={key:0,class:"ratings-list"},De={class:"agency"},Ve={class:"rating-info"},Ae={class:"grade"},Me={key:0,class:"outlook"},Ne={class:"date mono"},Te={key:1,class:"muted"},Pe={class:"glass-card"},We={key:0,class:"ratings-list"},Ye={class:"agency"},Ge={class:"grade"},Ee={class:"date mono"},Oe={key:1,class:"muted"},je={class:"grid-3"},Be={class:"glass-card"},Xe={class:"card-header"},Je={key:0,class:"status-badge fulfilled"},Le={key:1,class:"status-badge inactive"},qe={class:"metric-list"},He={class:"metric"},Ke={class:"val"},Ze={class:"metric"},Qe={class:"val"},ea={class:"metric"},aa={class:"val"},la={class:"metric"},sa={class:"val"},ta={key:0,class:"status-badge fulfilled"},ia={key:1},na={class:"glass-card"},ua={class:"metric-list"},oa={class:"metric"},ra={class:"val accent"},da={key:1},ca={class:"metric"},pa={class:"val accent"},va={key:1},ga={class:"metric"},ya={class:"val mono"},_a={key:1},ma={key:0},ha={class:"metric"},ba={class:"val mono"},fa={key:1},ka={class:"metric"},xa={class:"val mono"},Fa={class:"metric"},Sa={class:"val mono"},Ca={class:"glass-card"},Ia={class:"metric-list"},wa={class:"metric"},Ra={class:"val"},$a={key:1},Ua={class:"metric"},za={class:"val"},Da={key:1},Va={class:"metric"},Aa={class:"val"},Ma={key:1},Na={class:"metric"},Ta={class:"val"},Pa={key:1},Wa={class:"glass-card full-width"},Ya={class:"chart-header"},Ga={class:"chart-container tall"},Ea={class:"glass-card full-width"},Oa={class:"chart-header"},ja={class:"chart-container tall"},Ba={class:"glass-card full-width"},Xa={class:"comparison-section"},Ja={class:"comparison-table"},La={class:"mono"},qa={class:"mono"},Ha={class:"mono"},Ka={class:"highlight-row"},Za={class:"mono accent"},Qa={class:"mono"},el={class:"mono"},al={class:"chart-container indices-chart"},ll={class:"glass-card full-width"},sl={class:"analogous-input-section"},tl={class:"glass-pill"},il=["disabled"],nl={key:0,class:"analogs-list"},ul={class:"analog-isin mono"},ol={class:"analog-name"},rl=["onClick"],dl={class:"chart-container tall"},cl={key:0,class:"glass-card full-width"},pl={class:"card-header"},vl={class:"muted"},gl={class:"schedule-table-wrap"},yl={class:"schedule-table"},_l={class:"mono"},ml={class:"mono"},hl={class:"mono"},bl={key:1,class:"glass-card full-width"},fl={class:"card-header"},kl={class:"muted"},xl={class:"schedule-table-wrap"},Fl={class:"schedule-table"},Sl={class:"mono"},Cl={class:"mono"},Il={class:"mono"},wl={class:"glass-card full-width"},Rl={key:0,class:"events-list"},$l={class:"event-date mono"},Ul={class:"event-description"},zl={key:1,class:"muted"},Dl=S(e({__name:"VanilaBondReport",setup(e){const S=l(),Dl=m(),Vl=a(()=>S.params.isin||""),Al=s(Vl.value),Ml=a(()=>{if(!Wl.value?.indices)return null;const e=Wl.value.indices;return e.gov_less_1y??e.gov_1_3y??e.gov_3_5y??e.gov_5plus??null}),Nl=s(!1),Tl=s("–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."),Pl=s(null),Wl=s(null),Yl=s((new Date).toISOString().split("T")[0]),Gl=s(!1),El=s(null),Ol=s(""),jl=s(!1),Bl=s([]),Xl=s(!1),Jl=s(null),Ll=s(null),ql=s(null),Hl=s(null);let Kl=null,Zl=null,Ql=null,es=null;const as=async e=>{if(e){Nl.value=!0,Tl.value="–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å MOEX ISS...",Pl.value=null,Wl.value=null;try{Tl.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å MOEX ISS, ZCYC –∏ RuData...";const a=await x(e,Yl.value);Wl.value=a,setTimeout(()=>ls(),100)}catch(a){Pl.value=a.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö",console.error("Bond report error:",a)}finally{Nl.value=!1}}},ls=()=>{if(Kl&&Kl.destroy(),Zl&&Zl.destroy(),Ql&&Ql.destroy(),es&&es.destroy(),Jl.value?.getContext("2d")&&Wl.value?.price_history?.length){const e=Wl.value.price_history,a=e.map(e=>{const a=new Date(e.date);return`${String(a.getDate()).padStart(2,"0")}.${String(a.getMonth()+1).padStart(2,"0")}.${a.getFullYear()}`}),l=e.map(e=>e.price);Kl=new b(Jl.value.getContext("2d"),{type:"line",data:{labels:a,datasets:[{label:"–¶–µ–Ω–∞, %",data:l,borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.08)",fill:!0,tension:.4,pointRadius:0,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},filler:{propagate:!0}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11},maxTicksLimit:12}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11}},title:{display:!0,text:"–¶–µ–Ω–∞, %",color:"rgba(255,255,255,0.5)",font:{size:11}}}}}})}if(Ll.value?.getContext("2d")&&Wl.value?.yield_history?.length){const e=Wl.value.yield_history,a=e.map(e=>{const a=new Date(e.date);return`${String(a.getDate()).padStart(2,"0")}.${String(a.getMonth()+1).padStart(2,"0")}.${a.getFullYear()}`});Zl=new b(Ll.value.getContext("2d"),{type:"line",data:{labels:a,datasets:[{label:`${Wl.value?.pricing?.yield_type||"YTM"}, %`,data:e.map(e=>e.ytm),borderColor:"#38bdf8",backgroundColor:"rgba(56, 189, 248, 0.08)",fill:!0,tension:.4,pointRadius:0,borderWidth:2,yAxisID:"y"},{label:"G-curve, %",data:e.map(e=>e.gcurve),borderColor:"#f59e0b",backgroundColor:"transparent",fill:!1,tension:.4,pointRadius:0,borderWidth:2,borderDash:[5,5],yAxisID:"y"},{label:"G-spread, bps",data:e.map(e=>e.gspread),borderColor:"#9ca3af",backgroundColor:"transparent",fill:!1,tension:.4,pointRadius:0,borderWidth:2,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,labels:{color:"rgba(255,255,255,0.6)",font:{size:11},usePointStyle:!0},position:"top"}},scales:{y:{type:"linear",position:"left",grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11}},title:{display:!0,text:"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, %",color:"rgba(255,255,255,0.5)",font:{size:11}}},y1:{type:"linear",position:"right",grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11}},title:{display:!0,text:"G-spread, bps",color:"rgba(255,255,255,0.5)",font:{size:11}}},x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11},maxTicksLimit:12}}}}})}if(ql.value?.getContext("2d")&&Wl.value?.indices&&Wl.value?.pricing){const e=Wl.value.indices,a=Wl.value.pricing.ytm_pct??100*(Wl.value.pricing.ytm||0),l=[{label:"–ò–Ω–¥–µ–∫—Å –≥–æ—Å. –æ–±–ª–∏–≥–∞—Ü–∏–π",value:100*(e.gov_less_1y??e.gov_1_3y??e.gov_3_5y??e.gov_5plus??0),color:"#9ca3af"},{label:"–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–ê–ê–ê)",value:100*(e.corp_aaa||0),color:"#9ca3af"},{label:"–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–ê–ê)",value:100*(e.corp_aa||0),color:"#9ca3af"},{label:`–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è (${Wl.value.pricing.yield_type||"YTM"})`,value:a,color:"#ef4444"},{label:"–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–ê)",value:100*(e.corp_a||0),color:"#9ca3af"},{label:"–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–í–í–í)",value:100*(e.corp_bbb||0),color:"#9ca3af"}].filter(e=>e.value>0);Ql=new b(ql.value.getContext("2d"),{type:"scatter",data:{datasets:l.map((e,a)=>({label:e.label,data:[{x:e.value,y:0}],backgroundColor:e.label.startsWith("–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è")?"rgba(239, 68, 68, 0)":e.color,borderColor:e.label.startsWith("–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è")?"rgba(239, 68, 68, 0)":e.color,pointRadius:e.label.startsWith("–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è")?1:10,pointHoverRadius:e.label.startsWith("–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è")?14:12,showLine:!1}))},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},plugins:{legend:{display:!1},tooltip:{enabled:!0,displayColors:!1,backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"rgba(255, 255, 255, 1)",bodyColor:"rgba(255, 255, 255, 0.9)",borderColor:"rgba(255, 255, 255, 0.3)",borderWidth:1,padding:14,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},cornerRadius:8,callbacks:{title:e=>l[e[0].datasetIndex]?.label||"",label:e=>`–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: ${l[e.datasetIndex]?.value.toFixed(2)}%`}}},scales:{x:{type:"linear",position:"bottom",grid:{color:"rgba(255,255,255,0.05)",display:!0},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11},stepSize:1},title:{display:!0,text:"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, %",color:"rgba(255,255,255,0.5)",font:{size:11}}},y:{type:"linear",min:-.5,max:.5,display:!1,grid:{display:!1},ticks:{display:!1}}}},plugins:[{id:"indicesTimeline",afterDraw:e=>{const a=e.ctx,l=e.chartArea,s=(l.top+l.bottom)/2;a.save(),a.fillStyle="rgba(245, 245, 220, 0.3)",a.fillRect(l.left,s-20,l.right-l.left,40),a.restore()}},{id:"blinkingRedPoint",afterDraw:e=>{const a=e.ctx,s=l.findIndex(e=>e.label.startsWith("–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è"));if(s<0)return;const t=e.getDatasetMeta(s);if(!t?.data?.length)return;const i=t.data[0].getProps(["x","y"],!0),n=Date.now()/1e3,u=.5*Math.sin(3*n)+.5,o=.5+.5*u,r=10+4*u,d=a.createRadialGradient(i.x,i.y,0,i.x,i.y,2*r);d.addColorStop(0,`rgba(239, 68, 68, ${.4*o})`),d.addColorStop(.5,`rgba(239, 68, 68, ${.2*o})`),d.addColorStop(1,"rgba(239, 68, 68, 0)"),a.save(),a.fillStyle=d,a.beginPath(),a.arc(i.x,i.y,2*r,0,2*Math.PI),a.fill(),a.fillStyle=`rgba(239, 68, 68, ${o})`,a.strokeStyle=`rgba(255, 255, 255, ${.9*o})`,a.lineWidth=2,a.beginPath(),a.arc(i.x,i.y,r,0,2*Math.PI),a.fill(),a.stroke(),a.restore()}}]});let s=null,t=!0;const i=()=>{if(Ql&&t)try{Ql.draw(),t&&(s=requestAnimationFrame(i))}catch(e){t=!1}};if(i(),Ql){const e=Ql;e.__animationFrameId=s,e.__stopAnimation=()=>{t=!1,"number"==typeof e.__animationFrameId&&cancelAnimationFrame(e.__animationFrameId)}}}if(Hl.value?.getContext("2d")&&Wl.value?.risk_indicators&&Wl.value?.pricing){const e=Bl.value.filter(e=>void 0!==e.duration&&void 0!==e.yield),a=Wl.value.risk_indicators.duration||0,l=100*(Wl.value.pricing.ytm||0),s=Wl.value.issuer||"–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è",t=[];e.length>0&&t.push({label:"–û–±–ª–∏–≥–∞—Ü–∏–∏-–∞–Ω–∞–ª–æ–≥–∏",data:e.map(e=>({x:e.duration,y:e.yield})),backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"#60a5fa",pointRadius:8,pointStyle:"diamond",borderWidth:2}),t.push({label:s,data:[{x:a,y:l}],backgroundColor:"#ef4444",borderColor:"#ef4444",pointRadius:10,pointStyle:"diamond",borderWidth:2,pointHoverRadius:12}),es=new b(Hl.value.getContext("2d"),{type:"scatter",data:{datasets:t},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},plugins:{legend:{display:!0,labels:{color:"rgba(255,255,255,0.6)",font:{size:11},usePointStyle:!0},position:"top"}},scales:{x:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11}},title:{display:!0,text:"–î—é—Ä–∞—Ü–∏—è, –ª–µ—Ç",color:"rgba(255,255,255,0.5)",font:{size:11}}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)",font:{size:11}},title:{display:!0,text:"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∫ –æ—Ñ–µ—Ä—Ç–µ/–ø–æ–≥–∞—à–µ–Ω–∏—é, %",color:"rgba(255,255,255,0.5)",font:{size:11}}}}},plugins:[{id:"blinkingPoint",afterDraw:e=>{const a=e.ctx,l=e.data.datasets.length-1,s=e.getDatasetMeta(l);if(!s?.data?.length)return;const t=s.data[0].getProps(["x","y"],!0),i=Date.now()/1e3,n=.5*Math.sin(3*i)+.5,u=.4+.6*n,o=10+5*n,r=a.createRadialGradient(t.x,t.y,0,t.x,t.y,2.5*o);r.addColorStop(0,`rgba(239, 68, 68, ${.5*u})`),r.addColorStop(.4,`rgba(239, 68, 68, ${.2*u})`),r.addColorStop(1,"rgba(239, 68, 68, 0)"),a.save(),a.fillStyle=r,a.beginPath(),a.arc(t.x,t.y,2.5*o,0,2*Math.PI),a.fill(),a.fillStyle=`rgba(239, 68, 68, ${u})`,a.strokeStyle=`rgba(255, 255, 255, ${.8*u})`,a.lineWidth=2,a.beginPath(),a.arc(t.x,t.y,o,0,2*Math.PI),a.fill(),a.stroke(),a.restore()}}]});let i=null,n=!0;const u=()=>{if(es&&n)try{es.draw(),n&&(i=requestAnimationFrame(u))}catch(e){n=!1}};if(u(),es){const e=es;e.__animationFrameId=i,e.__stopAnimation=()=>{n=!1,"number"==typeof e.__animationFrameId&&cancelAnimationFrame(e.__animationFrameId)}}}},ss=()=>{Gl.value=!Gl.value,Gl.value&&Wl.value?(El.value=JSON.parse(JSON.stringify(Wl.value)),El.value&&!El.value.issue_info&&(El.value.issue_info={issue_date:null,maturity_date:null,coupon_rate:null,coupon_per_year:null}),El.value&&!El.value.pricing&&(El.value.pricing={clean_price_pct:0,ytm:0,g_spread_bps:0,g_curve_yield:0}),El.value&&!El.value.risk_indicators&&(El.value.risk_indicators={duration:0,mod_duration:0,convexity:0,dv01:0})):!Gl.value&&El.value&&(Wl.value=JSON.parse(JSON.stringify(El.value)))},ts=()=>{Wl.value?.isin&&as(Wl.value.isin)},is=()=>{const e=Gl.value&&El.value?El.value:Wl.value;if(e)try{const a=[];a.push(["–û—Ç—á–µ—Ç –ø–æ –æ–±–ª–∏–≥–∞—Ü–∏–∏"]),a.push(["–î–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏:",Yl.value]),a.push(["ISIN:",e.isin]),a.push([]),a.push(["–û–ë–©–ò–ï –°–í–ï–î–ï–ù–ò–Ø"]),a.push(["–≠–º–∏—Ç–µ–Ω—Ç",e.issuer||""]),a.push(["ISIN",e.isin]),a.push(["–°—Ç—Ä–∞–Ω–∞",e.risk_country||""]),a.push(["–°–µ–∫—Ç–æ—Ä",e.sector||""]),a.push(["–û—Ç—Ä–∞—Å–ª—å",e.industry||""]),a.push(["–û–±—ä—ë–º",e.outstanding_amount||""]),a.push([]),a.push(["–ü–ê–†–ê–ú–ï–¢–†–´ –í–´–ü–£–°–ö–ê"]),a.push(["–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",e.issue_info?.issue_date||""]),a.push(["–î–∞—Ç–∞ –ø–æ–≥–∞—à–µ–Ω–∏—è",e.issue_info?.maturity_date||""]),a.push(["–°—Ç–∞–≤–∫–∞ –∫—É–ø–æ–Ω–∞",e.issue_info?.coupon_rate?(100*e.issue_info.coupon_rate).toFixed(2)+"%":""]),a.push(["–ö—É–ø–æ–Ω–æ–≤ –≤ –≥–æ–¥",e.issue_info?.coupon_per_year||""]),a.push([]),a.push(["–ö–û–¢–ò–†–û–í–ö–ê –ò –î–û–•–û–î–ù–û–°–¢–¨"]),a.push(["–ß–∏—Å—Ç–∞—è —Ü–µ–Ω–∞",e.pricing?.clean_price_pct?e.pricing.clean_price_pct.toFixed(2)+"%":""]),a.push(["YTM",e.pricing?.ytm?(100*e.pricing.ytm).toFixed(2)+"%":""]),a.push(["G-spread",e.pricing?.g_spread_bps?e.pricing.g_spread_bps+" bps":""]),a.push(["G-curve",e.pricing?.g_curve_yield?(100*e.pricing.g_curve_yield).toFixed(2)+"%":""]),a.push(["–ù–ö–î",null!=e.nkd?e.nkd.toFixed(2):""]),a.push(["–¢–µ–∫—É—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CY)",null!=e.current_yield?e.current_yield.toFixed(2)+"%":""]),a.push([]),a.push(["–†–ò–°–ö-–ú–ï–¢–†–ò–ö–ò"]),a.push(["–ú–æ–¥. –¥—é—Ä–∞—Ü–∏—è",e.risk_indicators?.mod_duration?.toFixed(4)||""]),a.push(["–î—é—Ä–∞—Ü–∏—è",e.risk_indicators?.duration?.toFixed(4)||""]),a.push(["–í—ã–ø—É–∫–ª–æ—Å—Ç—å",e.risk_indicators?.convexity?.toFixed(2)||""]),a.push(["DV01",e.risk_indicators?.dv01||""]),a.push([]),e.indices&&(a.push(["–°–†–ê–í–ù–ï–ù–ò–ï –° –ò–ù–î–ï–ö–°–ê–ú–ò"]),e.indices.gov_less_1y&&a.push(["–ò–Ω–¥–µ–∫—Å –≥–æ—Å. –æ–±–ª–∏–≥–∞—Ü–∏–π (–º–µ–Ω–µ–µ –≥–æ–¥–∞)",(100*e.indices.gov_less_1y).toFixed(2)+"%"]),e.indices.corp_aaa&&a.push(["–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–ê–ê–ê)",(100*e.indices.corp_aaa).toFixed(2)+"%"]),e.indices.corp_aa&&a.push(["–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–ê–ê)",(100*e.indices.corp_aa).toFixed(2)+"%"]),a.push([`–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è (${e.pricing?.yield_type||"YTM"})`,e.pricing?.ytm_pct?e.pricing.ytm_pct.toFixed(2)+"%":e.pricing?.ytm?(100*e.pricing.ytm).toFixed(2)+"%":""]),e.indices.corp_a&&a.push(["–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–ê)",(100*e.indices.corp_a).toFixed(2)+"%"]),e.indices.corp_bbb&&a.push(["–ò–Ω–¥–µ–∫—Å –∫–æ—Ä–ø. –æ–±–ª–∏–≥–∞—Ü–∏–π (–í–í–í)",(100*e.indices.corp_bbb).toFixed(2)+"%"]),a.push([])),e.ratings?.issue?.length&&(a.push(["–†–ï–ô–¢–ò–ù–ì –≠–ú–ò–°–°–ò–ò"]),a.push(["–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ","–†–µ–π—Ç–∏–Ω–≥","–î–∞—Ç–∞"]),e.ratings.issue.forEach(e=>a.push([e.agency,e.rating,e.date||""])),a.push([])),e.ratings?.issuer?.length&&(a.push(["–†–ï–ô–¢–ò–ù–ì –≠–ú–ò–¢–ï–ù–¢–ê"]),a.push(["–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ","–†–µ–π—Ç–∏–Ω–≥","–ü—Ä–æ–≥–Ω–æ–∑","–î–∞—Ç–∞"]),e.ratings.issuer.forEach(e=>a.push([e.agency,e.rating,e.outlook||"",e.date||""])),a.push([])),e.coupon_schedule?.length&&(a.push(["–ö–£–ü–û–ù–ù–û–ï –†–ê–°–ü–ò–°–ê–ù–ò–ï"]),a.push(["–î–∞—Ç–∞","–°—Ç–∞–≤–∫–∞, %","–°—É–º–º–∞, —Ä—É–±."]),e.coupon_schedule.forEach(e=>a.push([e.date||"",e.valueprc?.toFixed(2)||"",e.value?.toFixed(2)||""])),a.push([])),e.amortization_schedule?.length&&(a.push(["–ì–†–ê–§–ò–ö –ê–ú–û–†–¢–ò–ó–ê–¶–ò–ò"]),a.push(["–î–∞—Ç–∞","% –æ—Ç –Ω–æ–º–∏–Ω–∞–ª–∞","–°—É–º–º–∞, —Ä—É–±."]),e.amortization_schedule.forEach(e=>a.push([e.date||"",e.valueprc?.toFixed(2)||"",e.value?.toFixed(2)||""])),a.push([])),e.corporate_events?.length&&(a.push(["–ö–û–†–ü–û–†–ê–¢–ò–í–ù–´–ï –°–û–ë–´–¢–ò–Ø"]),a.push(["–î–∞—Ç–∞","–û–ø–∏—Å–∞–Ω–∏–µ"]),e.corporate_events.forEach(e=>a.push([e.date||"",e.description])));const l=f.aoa_to_sheet(a),s=f.book_new();f.book_append_sheet(s,l,"–û—Ç—á–µ—Ç"),l["!cols"]=[{wch:40},{wch:30}];const t=`Bond_Report_${e.isin}_${Yl.value}.xlsx`;k(s,t)}catch(a){console.error("Export error:",a),alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ: ${a.message}`)}},ns=()=>{Al.value?.trim()&&(Dl.push({params:{isin:Al.value}}),as(Al.value))},us=e=>e?new Intl.NumberFormat("ru-RU").format(e):"‚Äî",os=e=>{if(!e)return"‚Äî";try{const a=new Date(e);return`${String(a.getDate()).padStart(2,"0")}.${String(a.getMonth()+1).padStart(2,"0")}.${a.getFullYear()}`}catch{return e}},rs=async()=>{if(!Ol.value?.trim())return;const e=Ol.value.trim().toUpperCase();if(Bl.value.some(a=>a.isin===e))return Pl.value="–û–±–ª–∏–≥–∞—Ü–∏—è —Å —Ç–∞–∫–∏–º ISIN —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞",void setTimeout(()=>{Pl.value=null},3e3);jl.value=!0,Bl.value.push({isin:e,name:void 0,duration:void 0,yield:void 0}),Ol.value="";try{const a=await F(e,Yl.value),l=Bl.value.findIndex(a=>a.isin===e);-1!==l&&(a?Bl.value[l]={isin:e,name:a.name,duration:a.duration,yield:a.yield}:Bl.value[l].name=`${e} (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)`),Wl.value&&(Wl.value.analogous_bonds=Bl.value.filter(e=>void 0!==e.duration&&void 0!==e.yield).map(e=>({name:e.name||e.isin,duration:e.duration,yield:e.yield})),setTimeout(()=>{es&&es.destroy(),ls()},100))}catch(a){const l=Bl.value.findIndex(a=>a.isin===e);-1!==l&&Bl.value.splice(l,1),Pl.value=`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ ISIN ${e}`,setTimeout(()=>{Pl.value=null},3e3)}finally{jl.value=!1}},ds=e=>{const a="price"===e?Jl.value:Ll.value;if(!a)return;const l=document.createElement("a");l.href=a.toDataURL("image/png"),l.download=`bond-${e}-${(new Date).toISOString().split("T")[0]}.png`,l.click()};return t(()=>as(Vl.value||"RU000A103943")),i(()=>{if(Kl&&Kl.destroy(),Zl&&Zl.destroy(),Ql){const e=Ql.__stopAnimation;"function"==typeof e&&e(),Ql.destroy()}if(es){const e=es.__stopAnimation;"function"==typeof e&&e(),es.destroy()}}),(e,a)=>(h(),n("div",C,[u("div",I,[u("div",w,[Wl.value?(h(),n("h1",R,o(Wl.value.issuer)+", "+o(Wl.value.isin),1)):(h(),n("h1",$,"Vanilla Bond Report")),Wl.value?(h(),n("p",U,[a[23]||(a[23]=r(" –ü–∞—Å–ø–æ—Ä—Ç –≤—ã–ø—É—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ ISIN: ",-1)),u("span",z,o(Wl.value.isin),1)])):(h(),n("p",D,[a[24]||(a[24]=r(" –ü–∞—Å–ø–æ—Ä—Ç –≤—ã–ø—É—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ ISIN: ",-1)),u("span",V,o(Vl.value||"‚Äî"),1)]))]),u("div",A,[u("div",M,[a[25]||(a[25]=u("label",{class:"lbl-mini"},"–î–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏:",-1)),d(u("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>Yl.value=e),type:"date",class:"date-input-small",onChange:ts},null,544),[[c,Yl.value]])]),u("button",{onClick:ss,class:p(["btn-toggle-edit",{active:Gl.value}])},o(Gl.value?"‚úì –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è":"‚úé –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"),3),u("button",{onClick:is,class:"btn-export-excel",disabled:!Wl.value}," üìä Excel ",8,N),u("div",T,[a[26]||(a[26]=u("label",{class:"lbl-mini"},"ISIN:",-1)),d(u("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>Al.value=e),type:"text",class:"search-input",placeholder:"RU000A103943",onKeyup:v(ns,["enter"])},null,544),[[c,Al.value]]),u("button",{class:"btn-search",onClick:ns,disabled:!Al.value},"üîç",8,P)])])]),Nl.value?(h(),n("section",W,[u("div",Y,[a[27]||(a[27]=u("span",{class:"spinner"},null,-1)),r(" "+o(Tl.value),1)])])):Pl.value?(h(),n("section",G,[u("div",E,"‚ö† "+o(Pl.value),1)])):Wl.value?(h(),n("section",j,[u("div",B,[u("div",X,[a[35]||(a[35]=u("div",{class:"card-header"},[u("h3",null,"–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è")],-1)),u("table",J,[u("tr",null,[a[29]||(a[29]=u("td",{class:"label"},"–≠–º–∏—Ç–µ–Ω—Ç",-1)),u("td",L,[Gl.value&&El.value?d((h(),n("input",{key:0,"onUpdate:modelValue":a[2]||(a[2]=e=>El.value.issuer=e),type:"text",class:"edit-input"},null,512)),[[c,El.value.issuer]]):(h(),n("span",q,o(Wl.value.issuer),1))])]),u("tr",null,[a[30]||(a[30]=u("td",{class:"label"},"ISIN",-1)),u("td",H,o(Wl.value.isin),1)]),u("tr",null,[a[31]||(a[31]=u("td",{class:"label"},"–°—Ç—Ä–∞–Ω–∞",-1)),u("td",K,[Gl.value&&El.value?d((h(),n("input",{key:0,"onUpdate:modelValue":a[3]||(a[3]=e=>El.value.risk_country=e),type:"text",class:"edit-input"},null,512)),[[c,El.value.risk_country]]):(h(),n("span",Z,o(Wl.value.risk_country||"‚Äî"),1))])]),u("tr",null,[a[32]||(a[32]=u("td",{class:"label"},"–°–µ–∫—Ç–æ—Ä",-1)),u("td",Q,[Gl.value&&El.value?d((h(),n("input",{key:0,"onUpdate:modelValue":a[4]||(a[4]=e=>El.value.sector=e),type:"text",class:"edit-input"},null,512)),[[c,El.value.sector]]):(h(),n("span",ee,o(Wl.value.sector||"‚Äî"),1))])]),u("tr",null,[a[33]||(a[33]=u("td",{class:"label"},"–û—Ç—Ä–∞—Å–ª—å",-1)),u("td",ae,[Gl.value&&El.value?d((h(),n("input",{key:0,"onUpdate:modelValue":a[5]||(a[5]=e=>El.value.industry=e),type:"text",class:"edit-input"},null,512)),[[c,El.value.industry]]):(h(),n("span",le,o(Wl.value.industry||"‚Äî"),1))])]),u("tr",null,[a[34]||(a[34]=u("td",{class:"label"},"–û–±—ä—ë–º",-1)),u("td",se,[Gl.value&&El.value?d((h(),n("input",{key:0,"onUpdate:modelValue":a[6]||(a[6]=e=>El.value.outstanding_amount=e),type:"number",class:"edit-input"},null,512)),[[c,El.value.outstanding_amount,void 0,{number:!0}]]):(h(),n("span",te,o(us(Wl.value.outstanding_amount)||"‚Äî"),1))])])])]),u("div",ie,[a[44]||(a[44]=u("div",{class:"card-header"},[u("h3",null,"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–ø—É—Å–∫–∞")],-1)),u("table",ne,[u("tr",null,[a[36]||(a[36]=u("td",{class:"label"},"–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",-1)),u("td",ue,[Gl.value&&El.value?.issue_info?d((h(),n("input",{key:0,"onUpdate:modelValue":a[7]||(a[7]=e=>El.value.issue_info.issue_date=e),type:"date",class:"edit-input"},null,512)),[[c,El.value.issue_info.issue_date]]):(h(),n("span",oe,o(os(Wl.value.issue_info?.issue_date)),1))])]),u("tr",null,[a[37]||(a[37]=u("td",{class:"label"},"–î–∞—Ç–∞ –ø–æ–≥–∞—à–µ–Ω–∏—è",-1)),u("td",re,[Gl.value&&El.value?.issue_info?d((h(),n("input",{key:0,"onUpdate:modelValue":a[8]||(a[8]=e=>El.value.issue_info.maturity_date=e),type:"date",class:"edit-input"},null,512)),[[c,El.value.issue_info.maturity_date]]):(h(),n("span",de,o(os(Wl.value.issue_info?.maturity_date)),1))])]),u("tr",null,[a[38]||(a[38]=u("td",{class:"label"},"–°—Ç–∞–≤–∫–∞ –∫—É–ø–æ–Ω–∞",-1)),u("td",ce,[Gl.value&&El.value?.issue_info?d((h(),n("input",{key:0,"onUpdate:modelValue":a[9]||(a[9]=e=>El.value.issue_info.coupon_rate=e),type:"number",step:"0.01",class:"edit-input",placeholder:"0.00"},null,512)),[[c,El.value.issue_info.coupon_rate,void 0,{number:!0}]]):(h(),n("span",pe,[null!==Wl.value.issue_info?.coupon_rate&&void 0!==Wl.value.issue_info?.coupon_rate?(h(),n("span",ve,o((100*(Wl.value.issue_info?.coupon_rate||0)).toFixed(2))+"%",1)):(h(),n("span",ge,"‚Äî"))]))])]),u("tr",null,[a[39]||(a[39]=u("td",{class:"label"},"–ö—É–ø–æ–Ω–æ–≤ –≤ –≥–æ–¥",-1)),u("td",ye,[Gl.value&&El.value?.issue_info?d((h(),n("input",{key:0,"onUpdate:modelValue":a[10]||(a[10]=e=>El.value.issue_info.coupon_per_year=e),type:"number",class:"edit-input"},null,512)),[[c,El.value.issue_info.coupon_per_year,void 0,{number:!0}]]):(h(),n("span",_e,o(Wl.value.issue_info?.coupon_per_year??"‚Äî"),1))])]),u("tr",null,[a[40]||(a[40]=u("td",{class:"label"},"–ù–æ–º–∏–Ω–∞–ª",-1)),u("td",me,o(Wl.value.issue_info?.nominal?us(Wl.value.issue_info.nominal):"‚Äî"),1)]),u("tr",null,[a[41]||(a[41]=u("td",{class:"label"},"–û—Ñ–µ—Ä—Ç–∞",-1)),u("td",he,[Wl.value.issue_info?.offer&&"–ù–µ—Ç"!==Wl.value.issue_info.offer.type?(h(),n("span",be,o(Wl.value.issue_info.offer.type)+" ‚Äî "+o(os(Wl.value.issue_info.offer.date)),1)):(h(),n("span",fe,"–ù–µ—Ç"))])]),u("tr",null,[a[42]||(a[42]=u("td",{class:"label"},"–£—Ä–æ–≤–µ–Ω—å –ª–∏—Å—Ç–∏–Ω–≥–∞",-1)),u("td",ke,o(Wl.value.listing_level?Wl.value.listing_level+" —É—Ä–æ–≤–µ–Ω—å":"‚Äî"),1)]),u("tr",null,[a[43]||(a[43]=u("td",{class:"label"},"–í–∞–ª—é—Ç–∞",-1)),u("td",xe,o(Wl.value.currency||"‚Äî"),1)])])])]),u("div",Fe,[u("div",Se,[a[45]||(a[45]=u("div",{class:"card-header"},[u("h3",null,"–†–µ–π—Ç–∏–Ω–≥ —ç–º–∏—Å—Å–∏–∏")],-1)),Wl.value.ratings?.issue?.length?(h(),n("div",Ce,[(h(!0),n(y,null,_(Wl.value.ratings.issue,(e,a)=>(h(),n("div",{key:a,class:"rating-item"},[u("span",Ie,o(e.agency),1),u("span",we,o(e.rating),1),u("span",Re,o(os(e.date)),1)]))),128))])):(h(),n("p",$e,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"))]),u("div",Ue,[a[46]||(a[46]=u("div",{class:"card-header"},[u("h3",null,"–†–µ–π—Ç–∏–Ω–≥ —ç–º–∏—Ç–µ–Ω—Ç–∞")],-1)),Wl.value.ratings?.issuer?.length?(h(),n("div",ze,[(h(!0),n(y,null,_(Wl.value.ratings.issuer,(e,a)=>(h(),n("div",{key:a,class:"rating-item"},[u("span",De,o(e.agency),1),u("div",Ve,[u("span",Ae,o(e.rating),1),e.outlook?(h(),n("span",Me,o(e.outlook),1)):g("",!0)]),u("span",Ne,o(os(e.date)),1)]))),128))])):(h(),n("p",Te,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"))]),u("div",Pe,[a[47]||(a[47]=u("div",{class:"card-header"},[u("h3",null,"–†–µ–π—Ç–∏–Ω–≥ –≥–∞—Ä–∞–Ω—Ç–∞")],-1)),Wl.value.ratings?.guarantor?.length?(h(),n("div",We,[(h(!0),n(y,null,_(Wl.value.ratings.guarantor,(e,a)=>(h(),n("div",{key:a,class:"rating-item"},[u("span",Ye,o(e.agency),1),u("span",Ge,o(e.rating),1),u("span",Ee,o(os(e.date)),1)]))),128))])):(h(),n("p",Oe,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"))])]),u("div",je,[u("div",Be,[u("div",Xe,[a[48]||(a[48]=u("h3",null,"–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä—ã–Ω–∫–∞",-1)),Wl.value.market_activity?.is_active?(h(),n("span",Je,"–ê–ö–¢–ò–í–ù–´–ô")):(h(),n("span",Le,"–ù–ï–ê–ö–¢–ò–í–ù–´–ô"))]),u("div",qe,[u("div",He,[a[49]||(a[49]=u("span",null,"–ö–æ–ª-–≤–æ —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–Ω–µ–π",-1)),u("span",Ke,o(Wl.value.market_activity?.trading_days??"‚Äî"),1)]),u("div",Ze,[a[50]||(a[50]=u("span",null,"–ö–æ–ª-–≤–æ —Å–¥–µ–ª–æ–∫",-1)),u("span",Qe,o(Wl.value.market_activity?.trades??"‚Äî"),1)]),u("div",ea,[a[51]||(a[51]=u("span",null,"–û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤/–≤—ã–ø—É—Å–∫",-1)),u("span",aa,o(Wl.value.market_activity?.turnover_to_outstanding?(100*Wl.value.market_activity.turnover_to_outstanding).toFixed(2)+"%":"‚Äî"),1)]),u("div",la,[a[52]||(a[52]=u("span",null,"–¢–æ—Ä–≥–∏ 30 –¥–Ω–µ–π",-1)),u("span",sa,[Wl.value.market_activity?.traded_last_30d?(h(),n("span",ta,"–î–∞")):(h(),n("span",ia,"–ù–µ—Ç"))])])])]),u("div",na,[a[58]||(a[58]=u("div",{class:"card-header"},[u("h3",null,"–ö–æ—Ç–∏—Ä–æ–≤–∫–∞ –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å")],-1)),u("div",ua,[u("div",oa,[a[53]||(a[53]=u("span",null,"–ß–∏—Å—Ç–∞—è —Ü–µ–Ω–∞",-1)),u("span",ra,[Gl.value&&El.value?.pricing?d((h(),n("input",{key:0,"onUpdate:modelValue":a[11]||(a[11]=e=>El.value.pricing.clean_price_pct=e),type:"number",step:"0.01",class:"edit-input-inline"},null,512)),[[c,El.value.pricing.clean_price_pct,void 0,{number:!0}]]):(h(),n("span",da,o(Wl.value.pricing?.clean_price_pct?.toFixed(2))+"%",1))])]),u("div",ca,[u("span",null,o(Wl.value.pricing?.yield_type||"YTM"),1),u("span",pa,[Gl.value&&El.value?.pricing?d((h(),n("input",{key:0,"onUpdate:modelValue":a[12]||(a[12]=e=>El.value.pricing.ytm=e),type:"number",step:"0.0001",class:"edit-input-inline"},null,512)),[[c,El.value.pricing.ytm,void 0,{number:!0}]]):(h(),n("span",va,o(null!=Wl.value.pricing?.ytm_pct?Wl.value.pricing.ytm_pct.toFixed(2)+"%":Wl.value.pricing?.ytm?(100*Wl.value.pricing.ytm).toFixed(2)+"%":"‚Äî"),1))])]),u("div",ga,[a[54]||(a[54]=u("span",null,"G-spread",-1)),u("span",ya,[Gl.value&&El.value?.pricing?d((h(),n("input",{key:0,"onUpdate:modelValue":a[13]||(a[13]=e=>El.value.pricing.g_spread_bps=e),type:"number",class:"edit-input-inline"},null,512)),[[c,El.value.pricing.g_spread_bps,void 0,{number:!0}]]):(h(),n("span",_a,[r(o(Wl.value.pricing?.g_spread_bps??"‚Äî"),1),Wl.value.pricing?.g_spread_bps?(h(),n("span",ma," bps")):g("",!0)]))])]),u("div",ha,[a[55]||(a[55]=u("span",null,"G-curve",-1)),u("span",ba,[Gl.value&&El.value?.pricing?d((h(),n("input",{key:0,"onUpdate:modelValue":a[14]||(a[14]=e=>El.value.pricing.g_curve_yield=e),type:"number",step:"0.0001",class:"edit-input-inline"},null,512)),[[c,El.value.pricing.g_curve_yield,void 0,{number:!0}]]):(h(),n("span",fa,o(null!=Wl.value.pricing?.g_curve_pct?Wl.value.pricing.g_curve_pct.toFixed(2)+"%":Wl.value.pricing?.g_curve_yield?(100*Wl.value.pricing.g_curve_yield).toFixed(2)+"%":"‚Äî"),1))])]),u("div",ka,[a[56]||(a[56]=u("span",null,"–ù–ö–î",-1)),u("span",xa,o(null!=Wl.value.nkd?Wl.value.nkd.toFixed(2):"‚Äî"),1)]),u("div",Fa,[a[57]||(a[57]=u("span",null,"–¢–µ–∫—É—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CY)",-1)),u("span",Sa,o(null!=Wl.value.current_yield?Wl.value.current_yield.toFixed(2)+"%":"‚Äî"),1)])])]),u("div",Ca,[a[63]||(a[63]=u("div",{class:"card-header"},[u("h3",null,"–†–∏—Å–∫-–º–µ—Ç—Ä–∏–∫–∏")],-1)),u("div",Ia,[u("div",wa,[a[59]||(a[59]=u("span",null,"–ú–æ–¥. –¥—é—Ä–∞—Ü–∏—è",-1)),u("span",Ra,[Gl.value&&El.value?.risk_indicators?d((h(),n("input",{key:0,"onUpdate:modelValue":a[15]||(a[15]=e=>El.value.risk_indicators.mod_duration=e),type:"number",step:"0.0001",class:"edit-input-inline"},null,512)),[[c,El.value.risk_indicators.mod_duration,void 0,{number:!0}]]):(h(),n("span",$a,o(Wl.value.risk_indicators?.mod_duration?.toFixed(4)||Wl.value.risk_indicators?.duration?.toFixed(4)||"‚Äî"),1))])]),u("div",Ua,[a[60]||(a[60]=u("span",null,"–î—é—Ä–∞—Ü–∏—è",-1)),u("span",za,[Gl.value&&El.value?.risk_indicators?d((h(),n("input",{key:0,"onUpdate:modelValue":a[16]||(a[16]=e=>El.value.risk_indicators.duration=e),type:"number",step:"0.0001",class:"edit-input-inline"},null,512)),[[c,El.value.risk_indicators.duration,void 0,{number:!0}]]):(h(),n("span",Da,o(Wl.value.risk_indicators?.duration?.toFixed(4)),1))])]),u("div",Va,[a[61]||(a[61]=u("span",null,"–í—ã–ø—É–∫–ª–æ—Å—Ç—å",-1)),u("span",Aa,[Gl.value&&El.value?.risk_indicators?d((h(),n("input",{key:0,"onUpdate:modelValue":a[17]||(a[17]=e=>El.value.risk_indicators.convexity=e),type:"number",step:"0.01",class:"edit-input-inline"},null,512)),[[c,El.value.risk_indicators.convexity,void 0,{number:!0}]]):(h(),n("span",Ma,o(Wl.value.risk_indicators?.convexity?.toFixed(2)),1))])]),u("div",Na,[a[62]||(a[62]=u("span",null,"DV01",-1)),u("span",Ta,[Gl.value&&El.value?.risk_indicators?d((h(),n("input",{key:0,"onUpdate:modelValue":a[18]||(a[18]=e=>El.value.risk_indicators.dv01=e),type:"number",step:"0.01",class:"edit-input-inline"},null,512)),[[c,El.value.risk_indicators.dv01,void 0,{number:!0}]]):(h(),n("span",Pa,o(us(Wl.value.risk_indicators?.dv01)),1))])])])])]),u("div",Wa,[u("div",Ya,[a[64]||(a[64]=u("h3",null,"–î–∏–Ω–∞–º–∏–∫–∞ —Ü–µ–Ω—ã",-1)),u("button",{class:"btn-export",onClick:a[19]||(a[19]=e=>ds("price"))},"üíæ PNG")]),u("div",Ga,[u("canvas",{ref_key:"priceHistoryRef",ref:Jl},null,512)])]),u("div",Ea,[u("div",Oa,[a[65]||(a[65]=u("h3",null,"–î–∏–Ω–∞–º–∏–∫–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –æ–±–ª–∏–≥–∞—Ü–∏–∏ –≤ RUB, g-curve, g-spread",-1)),u("button",{class:"btn-export",onClick:a[20]||(a[20]=e=>ds("yield"))},"üíæ PNG")]),u("div",ja,[u("canvas",{ref_key:"yieldDynamicsRef",ref:Ll},null,512)])]),u("div",Ba,[a[72]||(a[72]=u("div",{class:"card-header"},[u("h3",null,"–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏")],-1)),u("div",Xa,[u("table",Ja,[a[71]||(a[71]=u("thead",null,[u("tr",null,[u("th",null,"–ò–Ω–¥–µ–∫—Å"),u("th",null,"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, %")])],-1)),u("tbody",null,[u("tr",null,[a[66]||(a[66]=u("td",null,"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π",-1)),u("td",La,o(null!=Ml.value?(100*Ml.value).toFixed(2)+"%":"‚Äî"),1)]),u("tr",null,[a[67]||(a[67]=u("td",null,"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –ê–ê–ê",-1)),u("td",qa,o(null!=Wl.value.indices?.corp_aaa?(100*Wl.value.indices.corp_aaa).toFixed(2)+"%":"‚Äî"),1)]),u("tr",null,[a[68]||(a[68]=u("td",null,"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –ê–ê",-1)),u("td",Ha,o(null!=Wl.value.indices?.corp_aa?(100*Wl.value.indices.corp_aa).toFixed(2)+"%":"‚Äî"),1)]),u("tr",Ka,[u("td",null,[u("strong",null,"–û—Ü–µ–Ω–∏–≤–∞–µ–º–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è ("+o(Wl.value.pricing?.yield_type||"YTM")+")",1)]),u("td",Za,[u("strong",null,o(null!=Wl.value.pricing?.ytm_pct?Wl.value.pricing.ytm_pct.toFixed(2)+"%":Wl.value.pricing?.ytm?(100*Wl.value.pricing.ytm).toFixed(2)+"%":"‚Äî"),1)])]),u("tr",null,[a[69]||(a[69]=u("td",null,"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –ê",-1)),u("td",Qa,o(null!=Wl.value.indices?.corp_a?(100*Wl.value.indices.corp_a).toFixed(2)+"%":"‚Äî"),1)]),u("tr",null,[a[70]||(a[70]=u("td",null,"–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –í–í–í",-1)),u("td",el,o(null!=Wl.value.indices?.corp_bbb?(100*Wl.value.indices.corp_bbb).toFixed(2)+"%":"‚Äî"),1)])])]),u("div",al,[u("canvas",{ref_key:"indicesComparisonRef",ref:ql},null,512)])])]),u("div",ll,[a[74]||(a[74]=u("div",{class:"card-header"},[u("h3",null,"–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ–±–ª–∏–≥–∞—Ü–∏—è–º–∏-–∞–Ω–∞–ª–æ–≥–∞–º–∏")],-1)),u("div",sl,[u("div",tl,[a[73]||(a[73]=u("label",{class:"lbl-mini"},"ISIN –∞–Ω–∞–ª–æ–≥–∞:",-1)),d(u("input",{"onUpdate:modelValue":a[21]||(a[21]=e=>Ol.value=e),type:"text",class:"search-input",placeholder:"RU000A10XXXX",onKeyup:v(rs,["enter"])},null,544),[[c,Ol.value]]),u("button",{class:"btn-search",onClick:rs,disabled:!Ol.value||jl.value},"‚ûï",8,il)]),Bl.value.length>0?(h(),n("div",nl,[(h(!0),n(y,null,_(Bl.value,(e,a)=>(h(),n("div",{key:a,class:"analog-item"},[u("span",ul,o(e.isin),1),u("span",ol,o(e.name||"–ó–∞–≥—Ä—É–∑–∫–∞..."),1),u("button",{class:"btn-remove",onClick:e=>{return l=a,Bl.value.splice(l,1),void(Wl.value&&(Wl.value.analogous_bonds=Bl.value.filter(e=>void 0!==e.duration&&void 0!==e.yield).map(e=>({name:e.name||e.isin,duration:e.duration,yield:e.yield})),setTimeout(()=>{es&&es.destroy(),ls()},100)));var l},title:"–£–¥–∞–ª–∏—Ç—å"},"√ó",8,rl)]))),128))])):g("",!0)]),u("div",dl,[u("canvas",{ref_key:"analogousBondsRef",ref:Hl},null,512)])]),Wl.value.coupon_schedule?.length?(h(),n("div",cl,[u("div",pl,[a[75]||(a[75]=u("h3",null,"–ö—É–ø–æ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ)",-1)),u("span",vl,o(Wl.value.coupon_schedule.length)+" –≤—ã–ø–ª–∞—Ç",1)]),u("div",gl,[u("table",yl,[a[76]||(a[76]=u("thead",null,[u("tr",null,[u("th",null,"–î–∞—Ç–∞"),u("th",null,"–°—Ç–∞–≤–∫–∞, %"),u("th",null,"–°—É–º–º–∞, —Ä—É–±.")])],-1)),u("tbody",null,[(h(!0),n(y,null,_(Wl.value.coupon_schedule.slice(0,Xl.value?void 0:6),(e,a)=>(h(),n("tr",{key:a},[u("td",_l,o(os(e.date)),1),u("td",ml,o(e.valueprc?e.valueprc.toFixed(2):"‚Äî"),1),u("td",hl,o(e.value?e.value.toFixed(2):"‚Äî"),1)]))),128))])]),Wl.value.coupon_schedule.length>6?(h(),n("button",{key:0,class:"btn-show-more",onClick:a[22]||(a[22]=e=>Xl.value=!Xl.value)},o(Xl.value?"–°–≤–µ—Ä–Ω—É—Ç—å":`–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ (${Wl.value.coupon_schedule.length})`),1)):g("",!0)])])):g("",!0),Wl.value.amortization_schedule?.length?(h(),n("div",bl,[u("div",fl,[a[77]||(a[77]=u("h3",null,"–ì—Ä–∞—Ñ–∏–∫ –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏–∏",-1)),u("span",kl,o(Wl.value.amortization_schedule.length)+" –≤—ã–ø–ª–∞—Ç",1)]),u("div",xl,[u("table",Fl,[a[78]||(a[78]=u("thead",null,[u("tr",null,[u("th",null,"–î–∞—Ç–∞"),u("th",null,"% –æ—Ç –Ω–æ–º–∏–Ω–∞–ª–∞"),u("th",null,"–°—É–º–º–∞, —Ä—É–±.")])],-1)),u("tbody",null,[(h(!0),n(y,null,_(Wl.value.amortization_schedule,(e,a)=>(h(),n("tr",{key:a},[u("td",Sl,o(os(e.date)),1),u("td",Cl,o(e.valueprc?e.valueprc.toFixed(2)+"%":"‚Äî"),1),u("td",Il,o(e.value?e.value.toFixed(2):"‚Äî"),1)]))),128))])])])])):g("",!0),u("div",wl,[a[79]||(a[79]=u("div",{class:"card-header"},[u("h3",null,"–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è")],-1)),Wl.value.corporate_events?.length?(h(),n("div",Rl,[(h(!0),n(y,null,_(Wl.value.corporate_events,(e,a)=>(h(),n("div",{key:a,class:"event-item"},[u("span",$l,o(os(e.date)),1),u("span",Ul,o(e.description),1)]))),128))])):(h(),n("p",zl,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö"))])])):(h(),n("section",O,[...a[28]||(a[28]=[u("div",{class:"glass-card"},"–í–≤–µ–¥–∏—Ç–µ ISIN –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞",-1)])]))]))}}),[["__scopeId","data-v-0f62bc4a"]]);export{Dl as default};
