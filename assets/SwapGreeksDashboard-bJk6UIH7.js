import{d as a,r as e,v as s,o as l,R as r,c as t,e as i,x as d,L as n,C as o,t as c,n as v,k as p,F as u,i as b,q as g}from"./vendor-DLyKmMu8.js";import{C as k}from"./auto-DlDBEVoY.js";import{u as h}from"./swapRegistry-D1SC4d6r.js";import{_ as m}from"./index-Ba4DjugF.js";const y={class:"swap-greeks-page"},w={class:"page-header"},R={class:"header-right"},x={class:"control-group"},f={class:"control-group"},S={class:"greeks-overview"},C={class:"greek-card dv01"},D={class:"greek-content"},Y={class:"greek-value"},N={class:"greek-bar"},M={class:"greek-card spread-dv01"},P={class:"greek-content"},V={class:"greek-value"},B={class:"greek-bar"},U={class:"greek-card basis-risk"},I={class:"greek-content"},E={class:"greek-value"},F={class:"greek-bar"},L={class:"greek-card convexity"},_={class:"greek-content"},A={class:"greek-value"},W={class:"greek-bar"},$={class:"greek-card vol-exposure"},O={class:"greek-content"},T={class:"greek-value"},j={class:"greek-bar"},G={class:"card full-width"},K={class:"krd-container"},q={class:"krd-tenor"},z={class:"krd-bar-container"},H={class:"grid-2"},J={class:"card"},Q={class:"swap-positions"},X={class:"swap-header"},Z={class:"swap-name"},aa={class:"swap-tenor"},ea={class:"swap-metrics"},sa={class:"metric"},la={class:"metric"},ra={class:"metric"},ta={class:"value mono"},ia={class:"card"},da={class:"swap-positions"},na={class:"swap-header"},oa={class:"swap-name"},ca={class:"swap-tenor"},va={class:"swap-metrics"},pa={class:"metric"},ua={class:"metric"},ba={class:"metric"},ga={class:"value mono"},ka={class:"grid-2"},ha={class:"card"},ma={class:"chart-container"},ya={class:"card"},wa={class:"chart-container"},Ra={class:"grid-2"},xa={class:"card"},fa={class:"chart-container"},Sa={class:"card"},Ca={class:"chart-container"},Da={class:"card full-width"},Ya={class:"scenario-container"},Na={class:"scenario-table"},Ma={class:"scenario-name"},Pa={class:"card full-width"},Va={class:"basis-analysis"},Ba={class:"basis-item"},Ua={class:"basis-value accent"},Ia={class:"basis-item"},Ea={class:"basis-item"},Fa={class:"basis-value"},La={class:"basis-item"},_a=m(a({__name:"SwapGreeksDashboard",setup(a){const m=h(),_a=e("all"),Aa=e("rub3m"),Wa=s(()=>m.totalSwaps>0?{dv01:m.totalDv01,spreadDv01:m.totalSpreadDv01,basisRisk:.5*m.totalSpreadDv01,convexity:m.totalConvexity,volExposure:.44*m.totalDv01}:{dv01:125e3,spreadDv01:85e3,basisRisk:42e3,convexity:2.15,volExposure:55e3}),$a=e({"2Y":-1.25,"3Y":-2.15,"5Y":-3.85,"7Y":-2.95,"10Y":-1.85,"15Y":-.95,"20Y":-.35,"30Y":.05}),Oa=s(()=>0===m.totalSwaps?[{id:1,name:"IRS Payer",tenor:"5Y",direction:"Payer",dv01:-145e3,spread:25,notional:1e8}]:m.registrySwaps.map((a,e)=>{const s=m.getResultByIndex(e),l=`${a.tenor}Y`;return{id:a.id||e,name:`${a.swapType.toUpperCase()} ${"irs"===a.swapType?"Payer":"Swap"}`,tenor:l,direction:"Payer",dv01:s?.dv01||0,spread:a.spread,notional:1e6*a.notional}}).filter(a=>a.dv01<0)),Ta=s(()=>0===m.totalSwaps?[{id:4,name:"IRS Receiver",tenor:"2Y",direction:"Receiver",dv01:45e3,spread:15,notional:75e6}]:m.registrySwaps.map((a,e)=>{const s=m.getResultByIndex(e),l=`${a.tenor}Y`;return{id:a.id||e,name:`${a.swapType.toUpperCase()} Receiver`,tenor:l,direction:"Receiver",dv01:s?.dv01||0,spread:a.spread,notional:1e6*a.notional}}).filter(a=>a.dv01>0)),ja=e([{name:"Bear (Rates Up)",rate50:-62500,rate100:-125e3,rateNeg50:62500,rateNeg100:125e3,spread50:-42500,spreadNeg50:42500},{name:"Bull (Rates Down)",rate50:62500,rate100:125e3,rateNeg50:-62500,rateNeg100:-125e3,spread50:42500,spreadNeg50:-42500},{name:"Steepening",rate50:35e3,rate100:52e3,rateNeg50:-35e3,rateNeg100:-52e3,spread50:15e3,spreadNeg50:-15e3},{name:"Flattening",rate50:-28e3,rate100:-45e3,rateNeg50:28e3,rateNeg100:45e3,spread50:-12e3,spreadNeg50:12e3}]),Ga=e({currentSpread:18,basisDv01:42e3,basVol:8.5,pnlSpread25:-10500}),Ka=e(null),qa=e(null),za=e(null),Ha=e(null);let Ja=null,Qa=null,Xa=null,Za=null;const ae=a=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),ee=a=>Math.abs(a)>=1e6?(a/1e6).toFixed(1)+"М":"$"+(a/1e3).toFixed(0)+"K",se=a=>a>0?"pnl-positive":a<0?"pnl-negative":"pnl-neutral";return l(()=>{setTimeout(()=>(Ja&&Ja.destroy(),Qa&&Qa.destroy(),Xa&&Xa.destroy(),Za&&Za.destroy(),Ka.value?.getContext("2d")&&(Ja=new k(Ka.value.getContext("2d"),{type:"line",data:{labels:["2Y","3Y","5Y","7Y","10Y","15Y","20Y","30Y"],datasets:[{label:"Par Curve",data:[4.85,4.75,4.65,4.58,4.42,4.35,4.32,4.28],borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.08)",fill:!1,tension:.4,pointRadius:4,borderWidth:2},{label:"Spot Curve",data:[4.78,4.68,4.55,4.48,4.32,4.25,4.22,4.18],borderColor:"#38bdf8",backgroundColor:"rgba(56, 189, 248, 0.08)",fill:!1,tension:.4,pointRadius:4,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})),qa.value?.getContext("2d")&&(Qa=new k(qa.value.getContext("2d"),{type:"bar",data:{labels:["2Y","3Y","5Y","7Y","10Y","15Y","20Y","30Y"],datasets:[{label:"Par - Spot (bp)",data:[7,7,10,10,10,10,10,10],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"#60a5fa",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})),za.value?.getContext("2d")&&(Xa=new k(za.value.getContext("2d"),{type:"line",data:{labels:["-100bp","-50bp","0bp","+50bp","+100bp","+150bp","+200bp"],datasets:[{label:"Portfolio P&L",data:[25e4,125e3,0,-125e3,-25e4,-375e3,-5e5],borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.08)",fill:!0,tension:.4,pointRadius:4,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})),void(Ha.value?.getContext("2d")&&(Za=new k(Ha.value.getContext("2d"),{type:"line",data:{labels:["-50bp","-25bp","0bp","+25bp","+50bp","+75bp","+100bp"],datasets:[{label:"Portfolio P&L",data:[212500,106250,0,-106250,-212500,-318750,-425e3],borderColor:"#38bdf8",backgroundColor:"rgba(56, 189, 248, 0.08)",fill:!0,tension:.4,pointRadius:4,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})))),100)}),r(()=>{Ja&&Ja.destroy(),Qa&&Qa.destroy(),Xa&&Xa.destroy(),Za&&Za.destroy()}),(a,e)=>(g(),t("div",y,[i("div",w,[e[6]||(e[6]=i("div",{class:"header-left"},[i("h1",{class:"page-title"},"Панель греков свопов"),i("p",{class:"page-subtitle"},"Анализ чувствительности swap-портфеля к рыночным факторам")],-1)),i("div",R,[i("div",x,[e[3]||(e[3]=i("label",{class:"control-label"},"Тип свопа:",-1)),d(i("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>_a.value=a),class:"swap-select"},[...e[2]||(e[2]=[o('<option value="all" data-v-1078cd08>Все свопы</option><option value="irs" data-v-1078cd08>Interest Rate Swaps</option><option value="cds" data-v-1078cd08>Credit Default Swaps</option><option value="basis" data-v-1078cd08>Basis Swaps</option><option value="cross-currency" data-v-1078cd08>Cross-Currency Swaps</option>',5)])],512),[[n,_a.value]])]),i("div",f,[e[5]||(e[5]=i("label",{class:"control-label"},"Индекс:",-1)),d(i("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>Aa.value=a),class:"index-select"},[...e[4]||(e[4]=[i("option",{value:"rub3m"},"RUB 3M RUONIA",-1),i("option",{value:"rub6m"},"RUB 6M RUONIA",-1),i("option",{value:"eur3m"},"EUR 3M EURIBOR",-1),i("option",{value:"gbp6m"},"GBP 6M SONIA",-1)])],512),[[n,Aa.value]])])])]),i("div",S,[i("div",C,[e[8]||(e[8]=i("div",{class:"greek-header"},[i("span",{class:"greek-symbol"},"ΔV01"),i("span",{class:"greek-name"},"DV01")],-1)),i("div",D,[i("div",Y,c(ae(Wa.value.dv01)),1),e[7]||(e[7]=i("div",{class:"greek-unit"},"М / 1bp",-1)),i("div",{class:v(["greek-change",Wa.value.dv01>=0?"positive":"negative"])},c(Wa.value.dv01>=0?"+":"")+c(ee(Wa.value.dv01)),3)]),i("div",N,[i("div",{class:"bar-fill",style:p({width:Math.min(100,Math.abs(Wa.value.dv01/5e4))+"%"})},null,4)])]),i("div",M,[e[10]||(e[10]=i("div",{class:"greek-header"},[i("span",{class:"greek-symbol"},"Δ Spread"),i("span",{class:"greek-name"},"Spread DV01")],-1)),i("div",P,[i("div",V,c(ae(Wa.value.spreadDv01)),1),e[9]||(e[9]=i("div",{class:"greek-unit"},"М / 1bp",-1)),i("div",{class:v(["greek-change",Wa.value.spreadDv01>=0?"positive":"negative"])},c(Wa.value.spreadDv01>=0?"+":"")+c(ee(Wa.value.spreadDv01)),3)]),i("div",B,[i("div",{class:"bar-fill",style:p({width:Math.min(100,Math.abs(Wa.value.spreadDv01/3e4))+"%"})},null,4)])]),i("div",U,[e[12]||(e[12]=i("div",{class:"greek-header"},[i("span",{class:"greek-symbol"},"Δ Basis"),i("span",{class:"greek-name"},"Basis Risk")],-1)),i("div",I,[i("div",E,c(ae(Wa.value.basisRisk)),1),e[11]||(e[11]=i("div",{class:"greek-unit"},"М / 1bp",-1)),i("div",{class:v(["greek-change",Wa.value.basisRisk>=0?"positive":"negative"])},c(Wa.value.basisRisk>=0?"+":"")+c(ee(Wa.value.basisRisk)),3)]),i("div",F,[i("div",{class:"bar-fill",style:p({width:Math.min(100,Math.abs(Wa.value.basisRisk/2e4))+"%"})},null,4)])]),i("div",L,[e[14]||(e[14]=i("div",{class:"greek-header"},[i("span",{class:"greek-symbol"},"Γ"),i("span",{class:"greek-name"},"Convexity")],-1)),i("div",_,[i("div",A,c(Wa.value.convexity.toFixed(2)),1),e[13]||(e[13]=i("div",{class:"greek-unit"},"М / bp²",-1)),i("div",{class:v(["greek-change",Wa.value.convexity>=0?"positive":"negative"])},c(Wa.value.convexity>=0?"+":"")+c(Wa.value.convexity.toFixed(2)),3)]),i("div",W,[i("div",{class:"bar-fill",style:p({width:Math.min(100,Math.abs(20*Wa.value.convexity))+"%"})},null,4)])]),i("div",$,[e[16]||(e[16]=i("div",{class:"greek-header"},[i("span",{class:"greek-symbol"},"V"),i("span",{class:"greek-name"},"Vol Exposure")],-1)),i("div",O,[i("div",T,c(ae(Wa.value.volExposure)),1),e[15]||(e[15]=i("div",{class:"greek-unit"},"М / 1% vol",-1)),i("div",{class:v(["greek-change",Wa.value.volExposure>=0?"positive":"negative"])},c(Wa.value.volExposure>=0?"+":"")+c(ee(Wa.value.volExposure)),3)]),i("div",j,[i("div",{class:"bar-fill",style:p({width:Math.min(100,Math.abs(Wa.value.volExposure/4e4))+"%"})},null,4)])])]),i("div",G,[e[17]||(e[17]=i("div",{class:"card-header"},[i("h3",null,"Key Rate Durations (КРД)"),i("span",{class:"card-subtitle"},"Чувствительность по сроках кривой")],-1)),i("div",K,[(g(!0),t(u,null,b($a.value,(a,e)=>(g(),t("div",{key:e,class:"krd-item"},[i("span",q,c(e),1),i("div",z,[i("div",{class:v(["krd-bar",a>=0?"positive":"negative"]),style:p({width:Math.min(100,Math.abs(15*a))+"%"})},null,6)]),i("span",{class:v(["krd-value",a>=0?"positive":"negative"])},c(a>=0?"+":"")+c(a.toFixed(2)),3)]))),128))])]),i("div",H,[i("div",J,[e[21]||(e[21]=i("div",{class:"card-header"},[i("h3",null,"Long позиции (Payer)")],-1)),i("div",Q,[(g(!0),t(u,null,b(Oa.value,a=>(g(),t("div",{key:a.id,class:"swap-item"},[i("div",X,[i("span",Z,c(a.name),1),i("span",aa,c(a.tenor),1),i("span",{class:v(["swap-status",a.direction.toLowerCase()])},c(a.direction),3)]),i("div",ea,[i("div",sa,[e[18]||(e[18]=i("span",{class:"label"},"DV01",-1)),i("span",{class:v(["value",a.dv01>=0?"positive":"negative"])},c(ee(a.dv01)),3)]),i("div",la,[e[19]||(e[19]=i("span",{class:"label"},"Spread",-1)),i("span",{class:v(["value",a.spread>=0?"positive":"negative"])},c(a.spread>=0?"+":"")+c(a.spread)+" bp ",3)]),i("div",ra,[e[20]||(e[20]=i("span",{class:"label"},"Notional",-1)),i("span",ta,c(ae(a.notional)),1)])])]))),128))])]),i("div",ia,[e[25]||(e[25]=i("div",{class:"card-header"},[i("h3",null,"Short позиции (Receiver)")],-1)),i("div",da,[(g(!0),t(u,null,b(Ta.value,a=>(g(),t("div",{key:a.id,class:"swap-item"},[i("div",na,[i("span",oa,c(a.name),1),i("span",ca,c(a.tenor),1),i("span",{class:v(["swap-status",a.direction.toLowerCase()])},c(a.direction),3)]),i("div",va,[i("div",pa,[e[22]||(e[22]=i("span",{class:"label"},"DV01",-1)),i("span",{class:v(["value",a.dv01>=0?"positive":"negative"])},c(ee(a.dv01)),3)]),i("div",ua,[e[23]||(e[23]=i("span",{class:"label"},"Spread",-1)),i("span",{class:v(["value",a.spread>=0?"positive":"negative"])},c(a.spread>=0?"+":"")+c(a.spread)+" bp ",3)]),i("div",ba,[e[24]||(e[24]=i("span",{class:"label"},"Notional",-1)),i("span",ga,c(ae(a.notional)),1)])])]))),128))])])]),i("div",ka,[i("div",ha,[e[26]||(e[26]=i("div",{class:"chart-header"},[i("h3",null,"Кривая свопов")],-1)),i("div",ma,[i("canvas",{ref_key:"curveChartRef",ref:Ka},null,512)])]),i("div",ya,[e[27]||(e[27]=i("div",{class:"chart-header"},[i("h3",null,"Кривая спреда (Par - Spot)")],-1)),i("div",wa,[i("canvas",{ref_key:"spreadChartRef",ref:qa},null,512)])])]),i("div",Ra,[i("div",xa,[e[28]||(e[28]=i("div",{class:"chart-header"},[i("h3",null,"Чувствительность DV01 (Rate Shock)")],-1)),i("div",fa,[i("canvas",{ref_key:"rateSensitivityRef",ref:za},null,512)])]),i("div",Sa,[e[29]||(e[29]=i("div",{class:"chart-header"},[i("h3",null,"Чувствительность спреда (Spread Shock)")],-1)),i("div",Ca,[i("canvas",{ref_key:"spreadSensitivityRef",ref:Ha},null,512)])])]),i("div",Da,[e[31]||(e[31]=i("div",{class:"card-header"},[i("h3",null,"Матрица сценариев (P&L)"),i("span",{class:"card-subtitle"},"Чувствительность к комбинированным шокам")],-1)),i("div",Ya,[i("table",Na,[e[30]||(e[30]=i("thead",null,[i("tr",null,[i("th",null,"Сценарий"),i("th",null,"Rate +50bp"),i("th",null,"Rate +100bp"),i("th",null,"Rate -50bp"),i("th",null,"Rate -100bp"),i("th",null,"Spread +50bp"),i("th",null,"Spread -50bp")])],-1)),i("tbody",null,[(g(!0),t(u,null,b(ja.value,a=>(g(),t("tr",{key:a.name},[i("td",Ma,c(a.name),1),i("td",{class:v(se(a.rate50))},c(ae(a.rate50)),3),i("td",{class:v(se(a.rate100))},c(ae(a.rate100)),3),i("td",{class:v(se(a.rateNeg50))},c(ae(a.rateNeg50)),3),i("td",{class:v(se(a.rateNeg100))},c(ae(a.rateNeg100)),3),i("td",{class:v(se(a.spread50))},c(ae(a.spread50)),3),i("td",{class:v(se(a.spreadNeg50))},c(ae(a.spreadNeg50)),3)]))),128))])])])]),i("div",Pa,[e[36]||(e[36]=i("div",{class:"card-header"},[i("h3",null,"Риск базиса (3M vs 6M LIBOR)"),i("span",{class:"card-subtitle"},"Риск от расходимости между индексами")],-1)),i("div",Va,[i("div",Ba,[e[32]||(e[32]=i("span",{class:"basis-label"},"Текущий спред базиса",-1)),i("span",Ua,c(Ga.value.currentSpread)+" bp",1)]),i("div",Ia,[e[33]||(e[33]=i("span",{class:"basis-label"},"Basis DV01",-1)),i("span",{class:v(["basis-value",Ga.value.basisDv01>=0?"positive":"negative"])},c(ee(Ga.value.basisDv01)),3)]),i("div",Ea,[e[34]||(e[34]=i("span",{class:"basis-label"},"Волатильность базиса",-1)),i("span",Fa,c(Ga.value.basVol)+"%",1)]),i("div",La,[e[35]||(e[35]=i("span",{class:"basis-label"},"P&L (Spread +25bp)",-1)),i("span",{class:v(["basis-value",Ga.value.pnlSpread25>=0?"positive":"negative"])},c(ae(Ga.value.pnlSpread25)),3)])])]),e[37]||(e[37]=i("div",{class:"page-footer"},[i("span",null,"• DV01 — стоимость 1 базисного пункта в долларах"),i("span",null,"• Spread DV01 — чувствительность к спредам"),i("span",null,"• Обновление каждые 5 минут")],-1))]))}}),[["__scopeId","data-v-1078cd08"]]);export{_a as default};
