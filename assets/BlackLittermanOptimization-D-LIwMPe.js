import{c as a,r as e,d as s,l,p as t,q as i,A as n,B as o,U as r,K as c,L as d,F as u,z as p,u as v,P as m,D as b,H as h}from"./vendor-DdjqA-DE.js";import{g,u as y,a as w,_ as x}from"./index-CPZWcFRR.js";import"./three-vendor-JfvIfzq4.js";import"./charts-DbP6hfG6.js";function f(){const s=y(),l=w(),t=a(()=>s.positions),i=a(()=>s.correlationMatrix),n=a(()=>s.selectedBank),o=e(!1),r=e(null),c=e({tau:.05,delta:2.5,riskFreeRate:.045,maxWeight:.3}),d=e([{id:1,type:"absolute",asset1Index:0,asset2Index:1,expectedReturn:.1,confidence:.7},{id:2,type:"relative",asset1Index:0,asset2Index:2,expectedReturn:.03,confidence:.5}]);let u=3;const p=a(()=>{const a=t.value,e=a.reduce((a,e)=>a+e.allocation,0);return e<=0?a.map(()=>1/a.length):a.map(a=>a.allocation/e)}),v=a(()=>{if(!r.value){const a={};return t.value.forEach(e=>{a[e.symbol]=e.allocation/100}),a}const a={};return r.value.optimal_weights.forEach((e,s)=>{const l=t.value[s]?.symbol;l&&(a[l]=e)}),a}),m=a(()=>{if(!r.value)return p.value.reduce((a,e,s)=>{const l=t.value[s]?.symbol;return l&&(a[l]=e),a},{});const a={};return r.value.equilibrium_weights.forEach((e,s)=>{const l=t.value[s]?.symbol;l&&(a[l]=e)}),a}),b=a(()=>r.value?r.value.equilibrium_returns:t.value.map(a=>.05+252*(a.dayChange/100))),h=a(()=>r.value?r.value.posterior_returns:b.value),x=a(()=>r.value?r.value.portfolio_stats:{expectedReturn:.065,volatility:.14,sharpeRatio:.143,numPositions:t.value.length}),f=a(()=>r.value?r.value.equilibrium_stats:{expectedReturn:.055,volatility:.15,sharpeRatio:.033}),k=a(()=>r.value?r.value.views_impact:[]),R=a(()=>r.value?r.value.risk_contributions:t.value.map(()=>0)),_=a=>{const e=v.value[a];return void 0!==e?100*e:0};return{isComputing:o,params:c,views:d,blResult:r,portfolioPositions:t,selectedBank:n,marketWeights:p,optimalWeights:v,equilibriumWeights:m,equilibriumReturns:b,posteriorReturns:h,portfolioStats:x,equilibriumStats:f,viewsImpact:k,riskContributions:R,addView:()=>{const a=t.value.length;d.value=[...d.value,{id:u++,type:"absolute",asset1Index:Math.min(d.value.length,a-1),asset2Index:Math.min(d.value.length+1,a-1),expectedReturn:.05,confidence:.5}]},removeView:a=>{d.value=d.value.filter(e=>e.id!==a)},getOptimalWeight:_,getEquilibriumWeight:a=>{const e=m.value[a];return void 0!==e?100*e:0},getWeightDelta:a=>_(a)-(t.value.find(e=>e.symbol===a)?.allocation??0),getDeltaClass:a=>Math.abs(a)<.1?"neutral":a>0?"positive":"negative",runOptimization:async a=>{o.value=!0;try{const e=t.value,s=e.length;if(0===s)throw new Error("Портфель пуст");if(0===d.value.length)throw new Error("Добавьте хотя бы один взгляд");const n=i.value,o=e.map(()=>.2),u=[];for(let a=0;a<s;a++){const e=[];for(let l=0;l<s;l++){const s=n[a]?.values[l]||(a===l?1:0);e.push(s*o[a]*o[l])}u.push(e)}const v=await(async a=>{try{const e=await fetch("   https://stochastic-dashbord-v1-production.up.railway.app/api/black-litterman/optimize",{method:"POST",headers:g(),body:JSON.stringify(a)});if(!e.ok){const a=await e.json().catch(()=>({detail:"Unknown error"}));throw new Error(a.detail||`HTTP error! status: ${e.status}`)}return await e.json()}catch(e){throw console.error("Black-Litterman Optimization Failed:",e),e}})({cov_matrix:u,market_weights:p.value,views:(t.value.length,d.value.map(a=>"absolute"===a.type?{assets:[a.asset1Index],weights:[1],expected_return:a.expectedReturn,confidence:a.confidence}:{assets:[a.asset1Index,a.asset2Index],weights:[1,-1],expected_return:a.expectedReturn,confidence:a.confidence})),tau:c.value.tau,delta:c.value.delta,risk_free_rate:c.value.riskFreeRate,max_weight:c.value.maxWeight,asset_names:e.map(a=>a.symbol)});r.value=v;const m=24e5,b=v.portfolio_stats,h=l.calculateVaR(m,b.volatility,.95,1),y=l.calculateVaR(m,b.volatility,.99,1),w=l.calculateRiskContributions(e.map((a,e)=>({symbol:a.symbol,allocation:100*v.optimal_weights[e],notional:m*v.optimal_weights[e],color:a.color})),b.volatility,i.value,m);l.updateMetrics({var95:h.var,var99:y.var,cvar95:h.cvar,cvar99:y.cvar,expectedReturn:b.expected_return,volatility:b.volatility,sharpeRatio:b.sharpe_ratio,portfolioBeta:.85,riskContributions:w,maxDrawdown:.124}),a(`Black-Litterman завершён: Sharpe = ${b.sharpe_ratio.toFixed(2)}`,"success")}catch(e){console.error("Black-Litterman Error:",e),a(`Ошибка: ${e instanceof Error?e.message:"Unknown error"}`,"error")}finally{o.value=!1}}}}const k={class:"hero-section"},R={class:"hero-left"},_={class:"hero-meta"},F={class:"glass-pill"},V={class:"glass-pill"},C={class:"glass-pill"},I={class:"glass-pill"},B={class:"hero-actions"},U=["disabled"],E={key:0,width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:1,class:"spinner"},q={class:"dashboard-grid params-grid"},L={class:"col-params"},M={class:"glass-panel"},P={class:"panel-body params-body"},S={class:"param-group"},O={class:"param-input-group"},j={class:"param-group"},z={class:"param-input-group"},D={class:"param-group"},$={class:"param-input-group"},H={class:"param-hint"},A={class:"param-group"},T={class:"param-input-group"},J={class:"param-hint"},K={class:"col-views"},N={class:"glass-panel views-panel"},Q={class:"panel-header"},G={class:"panel-body views-body"},X={class:"view-header"},Y={class:"view-badge"},Z={class:"view-type-toggle"},aa=["onClick"],ea=["onClick"],sa=["onClick"],la={class:"view-body"},ta={class:"view-row"},ia={class:"view-field"},na=["onUpdate:modelValue"],oa=["value"],ra={key:0,class:"view-field"},ca=["onUpdate:modelValue"],da=["value"],ua={class:"view-row"},pa={class:"view-field"},va={class:"param-input-group"},ma=["onUpdate:modelValue"],ba={class:"param-hint"},ha={class:"view-field"},ga={class:"confidence-slider"},ya=["onUpdate:modelValue"],wa={class:"view-description"},xa={key:0,class:"views-empty"},fa={class:"dashboard-grid main-grid"},ka={class:"col-portfolio-wide"},Ra={class:"glass-panel portfolio-composition-panel"},_a={class:"panel-header"},Fa={class:"header-tabs"},Va={class:"panel-body weights-body"},Ca={key:0,class:"weights-comparison"},Ia={class:"weights-table-container"},Ba={class:"weights-table"},Ua={class:"asset-cell"},Ea={class:"asset-info"},Wa={class:"symbol"},qa={class:"name"},La={class:"text-right mono opacity-80"},Ma={class:"text-right mono"},Pa={class:"text-right mono font-bold"},Sa={class:"text-right mono"},Oa={key:1,class:"weights-bars-view"},ja={class:"weight-bar-info"},za={class:"weight-bar-label"},Da={class:"weight-bars-group"},$a={class:"weight-bar-row-dual"},Ha={class:"weight-bar-bg"},Aa={class:"weight-bar-value mono"},Ta={class:"weight-bar-row-dual"},Ja={class:"weight-bar-bg"},Ka={class:"weight-bar-value mono font-bold"},Na={class:"col-returns-right"},Qa={class:"glass-panel"},Ga={class:"panel-body weights-body"},Xa={class:"weights-comparison"},Ya={class:"weights-table-container"},Za={class:"weights-table"},ae={class:"asset-cell"},ee={class:"symbol"},se={class:"text-right mono"},le={class:"text-right mono"},te={key:0,class:"glass-panel views-impact-panel"},ie={class:"panel-body"},ne={class:"impact-grid"},oe={class:"impact-header"},re={class:"view-badge-sm"},ce={class:"impact-assets"},de={class:"impact-metrics"},ue={class:"impact-metric"},pe={class:"impact-metric"},ve={class:"impact-metric"},me={key:1,class:"glass-panel"},be={class:"panel-body"},he={class:"risk-bars"},ge={class:"risk-bar-info"},ye={class:"risk-bar-label"},we={class:"weight-bar-bg"},xe={class:"risk-bar-value mono"},fe={class:"dashboard-grid metrics-grid-row"},ke={class:"col-metric"},Re={class:"glass-panel metrics-card"},_e={class:"panel-body"},Fe={class:"stat-row"},Ve={class:"stat-val text-green"},Ce={class:"stat-row"},Ie={class:"stat-val"},Be={class:"stat-row"},Ue={class:"stat-row"},Ee={class:"stat-val mono"},We={class:"col-metric"},qe={class:"glass-panel metrics-card"},Le={class:"panel-body"},Me={class:"stat-row"},Pe={class:"stat-val"},Se={class:"stat-row"},Oe={class:"stat-val"},je={class:"stat-row"},ze={class:"stat-val"},De={class:"col-metric"},$e={class:"glass-panel metrics-card"},He={class:"panel-body"},Ae={class:"stat-row"},Te={class:"stat-row"},Je={class:"stat-row"},Ke={class:"stat-row"},Ne={class:"stat-val mono"},Qe=x(s({__name:"BlackLittermanOptimization",emits:["toast"],setup(s,{emit:g}){const y=g,w=e("comparison"),{isComputing:x,params:Qe,views:Ge,blResult:Xe,portfolioPositions:Ye,selectedBank:Ze,equilibriumReturns:as,posteriorReturns:es,portfolioStats:ss,equilibriumStats:ls,viewsImpact:ts,riskContributions:is,addView:ns,removeView:os,getOptimalWeight:rs,getEquilibriumWeight:cs,getWeightDelta:ds,getDeltaClass:us,runOptimization:ps}=f(),vs=()=>{ps((a,e)=>{y("toast",{message:a,type:e})})},ms=a=>`${(100*a).toFixed(2)}%`,bs=a=>Ye.value[a]?.symbol??`Asset_${a}`,hs=a=>a>=.7?"conf-high":a>=.4?"conf-mid":"conf-low",gs=a(()=>{const a=is.value.map(Math.abs);return Math.max(...a,.001)}),ys=a(()=>ss.value.expectedReturn-ls.value.expectedReturn),ws=a(()=>ss.value.volatility-ls.value.volatility),xs=a(()=>ss.value.sharpeRatio-ls.value.sharpeRatio);return(a,e)=>(h(),l("div",null,[t("div",k,[t("div",R,[e[12]||(e[12]=t("h1",null,"Black-Litterman Optimization",-1)),t("div",_,[e[11]||(e[11]=t("span",{class:"glass-pill"},[n("Метод: "),t("strong",null,"Байесовская оптимизация")],-1)),t("span",F,[e[7]||(e[7]=n("τ: ",-1)),t("strong",null,o(r(Qe).tau),1)]),t("span",V,[e[8]||(e[8]=n("δ: ",-1)),t("strong",null,o(r(Qe).delta),1)]),t("span",C,[e[9]||(e[9]=n("Банк: ",-1)),t("strong",null,o(r(Ze).name),1)]),t("span",I,[e[10]||(e[10]=n("Активов: ",-1)),t("strong",null,o(r(Ye).length),1)])])]),t("div",B,[t("button",{class:"btn-glass primary",onClick:vs,disabled:r(x)},[r(x)?(h(),l("span",W)):(h(),l("svg",E,[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),n(" "+o(r(x)?"Расчёт...":"Запустить оптимизацию"),1)],8,U)])]),t("div",q,[t("div",L,[t("div",M,[e[21]||(e[21]=t("div",{class:"panel-header"},[t("h3",null,"Параметры модели")],-1)),t("div",P,[t("div",S,[e[15]||(e[15]=t("label",null,"Скаляр неопределённости (τ)",-1)),t("div",O,[c(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=a=>r(Qe).tau=a),min:"0.001",max:"1",step:"0.01"},null,512),[[d,r(Qe).tau,void 0,{number:!0}]]),e[14]||(e[14]=t("span",{class:"param-hint"},"Типично 0.01–0.10",-1))])]),t("div",j,[e[17]||(e[17]=t("label",null,"Неприятие риска (δ)",-1)),t("div",z,[c(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>r(Qe).delta=a),min:"0.1",max:"20",step:"0.1"},null,512),[[d,r(Qe).delta,void 0,{number:!0}]]),e[16]||(e[16]=t("span",{class:"param-hint"},"Типично 2.0–3.5",-1))])]),t("div",D,[e[18]||(e[18]=t("label",null,"Безрисковая ставка (r)",-1)),t("div",$,[c(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>r(Qe).riskFreeRate=a),min:"0",max:"0.3",step:"0.005"},null,512),[[d,r(Qe).riskFreeRate,void 0,{number:!0}]]),t("span",H,o((100*r(Qe).riskFreeRate).toFixed(1))+"%",1)])]),t("div",A,[e[19]||(e[19]=t("label",null,"Макс. вес на актив",-1)),t("div",T,[c(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=a=>r(Qe).maxWeight=a),min:"0.05",max:"1",step:"0.05"},null,512),[[d,r(Qe).maxWeight,void 0,{number:!0}]]),t("span",J,o((100*r(Qe).maxWeight).toFixed(0))+"%",1)])]),e[20]||(e[20]=t("div",{class:"formula-box"},[t("span",{class:"formula-label"},"Black-Litterman Formula"),t("div",{class:"formula"},"E[R] = [(τΣ)⁻¹ + P'Ω⁻¹P]⁻¹ [(τΣ)⁻¹π + P'Ω⁻¹Q]")],-1))])])]),t("div",K,[t("div",N,[t("div",Q,[e[22]||(e[22]=t("h3",null,"Взгляды инвестора (Views)",-1)),t("button",{class:"btn-add-view",onClick:e[4]||(e[4]=(...a)=>r(ns)&&r(ns)(...a))},"+ Добавить")]),t("div",G,[(h(!0),l(u,null,p(r(Ge),(a,s)=>(h(),l("div",{key:a.id,class:"view-card"},[t("div",X,[t("span",Y,"V"+o(s+1),1),t("div",Z,[t("button",{class:v(["type-btn",{active:"absolute"===a.type}]),onClick:e=>a.type="absolute"},"Абсолютный",10,aa),t("button",{class:v(["type-btn",{active:"relative"===a.type}]),onClick:e=>a.type="relative"},"Относительный",10,ea)]),t("button",{class:"btn-remove-view",onClick:e=>r(os)(a.id)},"×",8,sa)]),t("div",la,[t("div",ta,[t("div",ia,[t("label",null,o("absolute"===a.type?"Актив":"Актив 1 (long)"),1),c(t("select",{"onUpdate:modelValue":e=>a.asset1Index=e},[(h(!0),l(u,null,p(r(Ye),(a,e)=>(h(),l("option",{key:a.symbol,value:e},o(a.symbol),9,oa))),128))],8,na),[[m,a.asset1Index,void 0,{number:!0}]])]),"relative"===a.type?(h(),l("div",ra,[e[23]||(e[23]=t("label",null,"Актив 2 (short)",-1)),c(t("select",{"onUpdate:modelValue":e=>a.asset2Index=e},[(h(!0),l(u,null,p(r(Ye),(a,e)=>(h(),l("option",{key:a.symbol,value:e},o(a.symbol),9,da))),128))],8,ca),[[m,a.asset2Index,void 0,{number:!0}]])])):i("",!0)]),t("div",ua,[t("div",pa,[e[24]||(e[24]=t("label",null,"Ожидаемая доходность",-1)),t("div",va,[c(t("input",{type:"number","onUpdate:modelValue":e=>a.expectedReturn=e,step:"0.01"},null,8,ma),[[d,a.expectedReturn,void 0,{number:!0}]]),t("span",ba,o((100*a.expectedReturn).toFixed(1))+"%",1)])]),t("div",ha,[e[25]||(e[25]=t("label",null,"Уверенность",-1)),t("div",ga,[c(t("input",{type:"range","onUpdate:modelValue":e=>a.confidence=e,min:"0.01",max:"1",step:"0.01"},null,8,ya),[[d,a.confidence,void 0,{number:!0}]]),t("span",{class:v(["confidence-val",hs(a.confidence)])},o((100*a.confidence).toFixed(0))+"% ",3)])])]),t("div",wa,["absolute"===a.type?(h(),l(u,{key:0},[n(o(bs(a.asset1Index))+" вернёт ",1),t("strong",{class:v(a.expectedReturn>=0?"text-green":"text-red")},o((100*a.expectedReturn).toFixed(1))+"% ",3)],64)):(h(),l(u,{key:1},[n(o(bs(a.asset1Index))+" обгонит "+o(bs(a.asset2Index))+" на ",1),t("strong",{class:v(a.expectedReturn>=0?"text-green":"text-red")},o((100*a.expectedReturn).toFixed(1))+"% ",3)],64))])])]))),128)),0===r(Ge).length?(h(),l("div",xa," Нет взглядов. Нажмите «+ Добавить» чтобы задать прогнозы. ")):i("",!0)])])])]),t("div",fa,[t("div",ka,[t("div",Ra,[t("div",_a,[e[26]||(e[26]=t("h3",null,"Сравнение весов",-1)),t("div",Fa,[t("button",{class:v(["tab-btn",{active:"comparison"===w.value}]),onClick:e[5]||(e[5]=a=>w.value="comparison")}," Сравнение ",2),t("button",{class:v(["tab-btn",{active:"bars"===w.value}]),onClick:e[6]||(e[6]=a=>w.value="bars")}," Визуализация ",2)])]),t("div",Va,["comparison"===w.value?(h(),l("div",Ca,[t("div",Ia,[t("table",Ba,[e[27]||(e[27]=t("thead",null,[t("tr",null,[t("th",null,"Инструмент"),t("th",{class:"text-right"},"Рыночный вес"),t("th",{class:"text-right"},"Равновесный"),t("th",{class:"text-right"},"BL оптимальный"),t("th",{class:"text-right"},"Изменение")])],-1)),t("tbody",null,[(h(!0),l(u,null,p(r(Ye),a=>(h(),l("tr",{key:a.symbol},[t("td",null,[t("div",Ua,[t("div",{class:"asset-icon",style:b({background:a.color})},o(a.symbol[0]),5),t("div",Ea,[t("span",Wa,o(a.symbol),1),t("span",qa,o(a.name),1)])])]),t("td",La,o(a.allocation.toFixed(1))+"%",1),t("td",Ma,o(r(cs)(a.symbol).toFixed(1))+"%",1),t("td",Pa,o(r(rs)(a.symbol).toFixed(1))+"%",1),t("td",Sa,[t("span",{class:v(["change-pill",r(us)(r(ds)(a.symbol))])},o(r(ds)(a.symbol)>0?"+":"")+o(r(ds)(a.symbol).toFixed(1))+"% ",3)])]))),128))])])])])):i("",!0),"bars"===w.value?(h(),l("div",Oa,[(h(!0),l(u,null,p(r(Ye),a=>(h(),l("div",{key:a.symbol,class:"weight-bar-container"},[t("div",ja,[t("div",{class:"asset-icon-small",style:b({background:a.color})},o(a.symbol[0]),5),t("div",za,o(a.symbol),1)]),t("div",Da,[t("div",$a,[e[28]||(e[28]=t("span",{class:"bar-label-sm"},"Рынок",-1)),t("div",Ha,[t("div",{class:"weight-bar-fill eq",style:b({width:a.allocation+"%"})},null,4)]),t("span",Aa,o(a.allocation.toFixed(1))+"%",1)]),t("div",Ta,[e[29]||(e[29]=t("span",{class:"bar-label-sm"},"BL",-1)),t("div",Ja,[t("div",{class:"weight-bar-fill bl",style:b({width:r(rs)(a.symbol)+"%",background:a.color})},null,4)]),t("span",Ka,o(r(rs)(a.symbol).toFixed(1))+"%",1)])])]))),128))])):i("",!0)])])]),t("div",Na,[t("div",Qa,[e[31]||(e[31]=t("div",{class:"panel-header"},[t("h3",null,"Доходности: Равновесные vs Апостериорные")],-1)),t("div",Ga,[t("div",Xa,[t("div",Ya,[t("table",Za,[e[30]||(e[30]=t("thead",null,[t("tr",null,[t("th",null,"Актив"),t("th",{class:"text-right"},"π (равнов.)"),t("th",{class:"text-right"},"E[R] (BL)"),t("th",{class:"text-right"},"Δ")])],-1)),t("tbody",null,[(h(!0),l(u,null,p(r(Ye),(a,e)=>(h(),l("tr",{key:a.symbol},[t("td",null,[t("div",ae,[t("div",{class:"asset-icon",style:b({background:a.color})},o(a.symbol[0]),5),t("span",ee,o(a.symbol),1)])]),t("td",se,o(ms(r(as)[e])),1),t("td",{class:v(["text-right mono font-bold",r(es)[e]>=0?"text-green":"text-red"])},o(ms(r(es)[e])),3),t("td",le,[t("span",{class:v(["change-pill",r(es)[e]-r(as)[e]>=0?"positive":"negative"])},o(r(es)[e]-r(as)[e]>=0?"+":"")+o(ms(r(es)[e]-r(as)[e])),3)])]))),128))])])])])])])])]),r(ts).length>0?(h(),l("div",te,[e[35]||(e[35]=t("div",{class:"panel-header"},[t("h3",null,"Влияние взглядов на портфель")],-1)),t("div",ie,[t("div",ne,[(h(!0),l(u,null,p(r(ts),(a,s)=>(h(),l("div",{key:s,class:"impact-card"},[t("div",oe,[t("span",re,"V"+o(s+1),1),t("span",ce,o(a.affected_assets.join(", ")),1)]),t("div",de,[t("div",ue,[e[32]||(e[32]=t("span",{class:"metric-label"},"Ожидаемая доходность",-1)),t("span",{class:v(["metric-value",a.view_return>=0?"text-green":"text-red"])},o(ms(a.view_return)),3)]),t("div",pe,[e[33]||(e[33]=t("span",{class:"metric-label"},"Уверенность",-1)),t("span",{class:v(["metric-value",hs(a.confidence)])},o((100*a.confidence).toFixed(0))+"% ",3)]),t("div",ve,[e[34]||(e[34]=t("span",{class:"metric-label"},"Сдвиг веса",-1)),t("span",{class:v(["metric-value",a.weight_shift>=0?"text-green":"text-red"])},o(a.weight_shift>=0?"+":"")+o((100*a.weight_shift).toFixed(2))+"% ",3)])])]))),128))])])])):i("",!0),r(Xe)?(h(),l("div",me,[e[36]||(e[36]=t("div",{class:"panel-header"},[t("h3",null,"Вклад в риск портфеля")],-1)),t("div",be,[t("div",he,[(h(!0),l(u,null,p(r(Ye),(a,e)=>(h(),l("div",{key:a.symbol,class:"risk-bar-row"},[t("div",ge,[t("div",{class:"asset-icon-small",style:b({background:a.color})},o(a.symbol[0]),5),t("span",ye,o(a.symbol),1)]),t("div",we,[t("div",{class:"weight-bar-fill",style:b({width:Math.min(Math.abs(r(is)[e])/gs.value*100,100)+"%",background:a.color})},null,4)]),t("span",xe,o(ms(r(is)[e])),1)]))),128))])])])):i("",!0),t("div",fe,[t("div",ke,[t("div",Re,[e[41]||(e[41]=t("div",{class:"panel-header"},[t("h3",null,"BL Портфель (с Views)")],-1)),t("div",_e,[t("div",Fe,[e[37]||(e[37]=t("span",{class:"stat-label"},"Expected Return",-1)),t("span",Ve,o(ms(r(ss).expectedReturn)),1)]),t("div",Ce,[e[38]||(e[38]=t("span",{class:"stat-label"},"Volatility",-1)),t("span",Ie,o(ms(r(ss).volatility)),1)]),t("div",Be,[e[39]||(e[39]=t("span",{class:"stat-label"},"Sharpe Ratio",-1)),t("span",{class:v(["stat-val",r(ss).sharpeRatio>=0?"text-green":"text-red"])},o(r(ss).sharpeRatio.toFixed(3)),3)]),t("div",Ue,[e[40]||(e[40]=t("span",{class:"stat-label"},"Позиций",-1)),t("span",Ee,o(r(ss).numPositions),1)])])])]),t("div",We,[t("div",qe,[e[45]||(e[45]=t("div",{class:"panel-header"},[t("h3",null,"Равновесный (без Views)")],-1)),t("div",Le,[t("div",Me,[e[42]||(e[42]=t("span",{class:"stat-label"},"Expected Return",-1)),t("span",Pe,o(ms(r(ls).expectedReturn)),1)]),t("div",Se,[e[43]||(e[43]=t("span",{class:"stat-label"},"Volatility",-1)),t("span",Oe,o(ms(r(ls).volatility)),1)]),t("div",je,[e[44]||(e[44]=t("span",{class:"stat-label"},"Sharpe Ratio",-1)),t("span",ze,o(r(ls).sharpeRatio.toFixed(3)),1)])])])]),t("div",De,[t("div",$e,[e[50]||(e[50]=t("div",{class:"panel-header"},[t("h3",null,"Прирост от Views")],-1)),t("div",He,[t("div",Ae,[e[46]||(e[46]=t("span",{class:"stat-label"},"Δ Return",-1)),t("span",{class:v(["stat-val",ys.value>=0?"text-green":"text-red"])},o(ys.value>=0?"+":"")+o(ms(ys.value)),3)]),t("div",Te,[e[47]||(e[47]=t("span",{class:"stat-label"},"Δ Volatility",-1)),t("span",{class:v(["stat-val",ws.value<=0?"text-green":"text-red"])},o(ws.value>=0?"+":"")+o(ms(ws.value)),3)]),t("div",Je,[e[48]||(e[48]=t("span",{class:"stat-label"},"Δ Sharpe",-1)),t("span",{class:v(["stat-val",xs.value>=0?"text-green":"text-red"])},o(xs.value>=0?"+":"")+o(xs.value.toFixed(3)),3)]),t("div",Ke,[e[49]||(e[49]=t("span",{class:"stat-label"},"Взглядов",-1)),t("span",Ne,o(r(Ge).length),1)])])])])])]))}}),[["__scopeId","data-v-470cdbe3"]]);export{Qe as default};
