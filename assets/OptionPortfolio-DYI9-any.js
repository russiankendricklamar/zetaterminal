import{d as a,r as e,a as s,c as l,e as i,j as t,t as c,F as d,i as r,n as v,x as n,y as o,q as u}from"./vendor-DLyKmMu8.js";import{_ as m}from"./index-BaahR4yN.js";const p={class:"page-container custom-scroll"},g={class:"section-header"},h={class:"header-actions"},k={class:"glass-pill status-pill"},x={class:"status-label"},y={class:"text-white"},b={class:"dashboard-grid"},F={class:"left-panel"},f={class:"glass-card panel"},q={class:"portfolio-summary"},V={class:"summary-item"},w={class:"summary-value"},C={class:"summary-item"},M={class:"summary-value"},_={class:"summary-item"},L={class:"summary-value"},P={class:"glass-card panel"},j={class:"positions-list"},A={class:"pos-header"},U={class:"pos-ticker"},S={class:"pos-details"},T={class:"pos-row"},E={class:"pos-row"},I=["onUpdate:modelValue"],K={class:"pos-row"},N={class:"pos-row"},O={class:"pos-sum"},W=["onClick"],z={class:"main-panel"},B={class:"glass-card chart-card"},D={class:"greeks-grid"},G={class:"greek-card"},H={class:"greek-value"},J={class:"greek-card"},Q={class:"greek-value"},R={class:"greek-card"},X={class:"greek-value"},Y={class:"greek-card"},Z={class:"greek-card"},$={class:"greek-value"},aa={class:"greek-card"},ea={class:"greek-value"},sa={class:"glass-card chart-card mt-4"},la={class:"scenarios-grid"},ia={class:"scenario-card"},ta={class:"scenario-card"},ca={class:"scenario-card"},da={class:"scenario-card"},ra={class:"scenario-card"},va={class:"scenario-card"},na={class:"glass-card chart-card mt-4"},oa={class:"table-wrapper"},ua={class:"data-table"},ma={class:"row-header"},pa={class:"glass-card chart-card mt-4"},ga={class:"metrics-grid"},ha={class:"metric-item"},ka={class:"metric-value text-green"},xa={class:"metric-item"},ya={class:"metric-value text-red"},ba={class:"metric-item"},Fa={class:"metric-value"},fa={class:"metric-item"},qa={class:"metric-value"},Va=m(a({__name:"OptionPortfolio",setup(a){const m=e([{ticker:"AAPL",type:"call",strike:150,quantity:100,price:8.52,delta:.654},{ticker:"MSFT",type:"put",strike:250,quantity:50,price:12.34,delta:-.432},{ticker:"TSLA",type:"call",strike:200,quantity:25,price:5.67,delta:.512}]),Va=s({delta:0,gamma:0,vega:0,theta:0,rho:0}),wa=e(0),Ca=e([]),Ma=e(0),_a=e(0),La=e(0),Pa=()=>{Va.delta=m.value.reduce((a,e)=>a+e.delta*e.quantity,0),Va.gamma=m.value.reduce((a,e)=>a+.0184*e.quantity,0),Va.vega=m.value.reduce((a,e)=>a+.197*e.quantity,0),Va.theta=m.value.reduce((a,e)=>a+-.024*e.quantity,0),Va.rho=m.value.reduce((a,e)=>a+.089*e.quantity,0),wa.value=m.value.reduce((a,e)=>a+e.price*e.quantity,0);const a=[-2,-1,0,1,2];Ca.value=[-5,-2.5,0,2.5,5].map(e=>a.map(a=>{let s=Va.delta*e;return s+=.5*Va.gamma*e*e,s+=Va.vega*a,s})),Ma.value=5*wa.value,_a.value=-wa.value,La.value=wa.value/Math.abs(Va.delta||1)},ja=()=>{m.value.push({ticker:"NEW",type:"call",strike:100,quantity:10,price:5,delta:.5}),Pa()},Aa=(a,e=0)=>Va.delta*a+.5*Va.gamma*a*a+Va.vega*e;return Pa(),(a,e)=>(u(),l("div",p,[i("div",g,[e[2]||(e[2]=i("div",{class:"header-left"},[i("h1",{class:"section-title"},"Портфель опционов"),i("p",{class:"section-subtitle"},"Агрегированный риск-анализ, греки портфеля, сценарное моделирование")],-1)),i("div",h,[i("div",k,[e[1]||(e[1]=i("span",{class:"dot bg-blue"},null,-1)),i("span",x,[e[0]||(e[0]=t("Позиций: ",-1)),i("b",y,c(m.value.length),1)])])])]),i("div",b,[i("aside",F,[i("div",f,[e[6]||(e[6]=i("div",{class:"panel-header"},[i("h3",null,"Портфель")],-1)),i("div",q,[i("div",V,[e[3]||(e[3]=i("span",{class:"summary-label"},"Общая стоимость",-1)),i("span",w,c(wa.value.toFixed(2)),1)]),i("div",C,[e[4]||(e[4]=i("span",{class:"summary-label"},"Позиций",-1)),i("span",M,c(m.value.length),1)]),i("div",_,[e[5]||(e[5]=i("span",{class:"summary-label"},"Дельта портфеля",-1)),i("span",L,c(Va.delta.toFixed(2)),1)])]),i("button",{class:"btn-primary mt-4",onClick:ja},"+ Добавить позицию")]),i("div",P,[e[11]||(e[11]=i("div",{class:"panel-header"},[i("h3",null,"Позиции")],-1)),i("div",j,[(u(!0),l(d,null,r(m.value,(a,s)=>(u(),l("div",{key:s,class:"position-item"},[i("div",A,[i("span",U,c(a.ticker),1),i("span",{class:v(["pos-type",a.type])},c(a.type.toUpperCase()),3)]),i("div",S,[i("div",T,[e[7]||(e[7]=i("span",null,"K:",-1)),i("span",null,c(a.strike),1)]),i("div",E,[e[8]||(e[8]=i("span",null,"Кол-во:",-1)),n(i("input",{"onUpdate:modelValue":e=>a.quantity=e,type:"number",min:"0",onChange:Pa,class:"pos-input"},null,40,I),[[o,a.quantity,void 0,{number:!0}]])]),i("div",K,[e[9]||(e[9]=i("span",null,"Цена:",-1)),i("span",null,c(a.price.toFixed(2)),1)]),i("div",N,[e[10]||(e[10]=i("span",null,"Сумма:",-1)),i("span",O,c((a.price*a.quantity).toFixed(2)),1)])]),i("button",{class:"btn-delete-small",onClick:a=>{return e=s,m.value.splice(e,1),void Pa();var e}},"✕",8,W)]))),128))])])]),i("main",z,[i("div",B,[e[30]||(e[30]=i("div",{class:"chart-header"},[i("h3",null,"Агрегированные греки")],-1)),i("div",D,[i("div",G,[e[12]||(e[12]=i("div",{class:"greek-icon"},"Δ",-1)),e[13]||(e[13]=i("div",{class:"greek-title"},"Дельта",-1)),i("div",H,c(Va.delta.toFixed(2)),1),e[14]||(e[14]=i("div",{class:"greek-info"},"Позиция в базовом активе",-1))]),i("div",J,[e[15]||(e[15]=i("div",{class:"greek-icon"},"Γ",-1)),e[16]||(e[16]=i("div",{class:"greek-title"},"Гамма",-1)),i("div",Q,c(Va.gamma.toFixed(6)),1),e[17]||(e[17]=i("div",{class:"greek-info"},"Кривизна портфеля",-1))]),i("div",R,[e[18]||(e[18]=i("div",{class:"greek-icon"},"ν",-1)),e[19]||(e[19]=i("div",{class:"greek-title"},"Вега",-1)),i("div",X,c(Va.vega.toFixed(2)),1),e[20]||(e[20]=i("div",{class:"greek-info"},"Чувствительность к vol",-1))]),i("div",Y,[e[21]||(e[21]=i("div",{class:"greek-icon"},"Θ",-1)),e[22]||(e[22]=i("div",{class:"greek-title"},"Тета",-1)),i("div",{class:v(["greek-value",Va.theta<0?"text-red":"text-green"])},c(Va.theta.toFixed(2)),3),e[23]||(e[23]=i("div",{class:"greek-info"},"Дневная убыль времени",-1))]),i("div",Z,[e[24]||(e[24]=i("div",{class:"greek-icon"},"ρ",-1)),e[25]||(e[25]=i("div",{class:"greek-title"},"Ро",-1)),i("div",$,c(Va.rho.toFixed(2)),1),e[26]||(e[26]=i("div",{class:"greek-info"},"Чувствительность к ставкам",-1))]),i("div",aa,[e[27]||(e[27]=i("div",{class:"greek-icon"},null,-1)),e[28]||(e[28]=i("div",{class:"greek-title"},"Риск",-1)),i("div",ea,c(Math.abs(_a.value).toFixed(2)),1),e[29]||(e[29]=i("div",{class:"greek-info"},"Максимальный убыток",-1))])])]),i("div",sa,[e[37]||(e[37]=i("div",{class:"chart-header"},[i("h3",null,"Сценарный анализ P&L")],-1)),i("div",la,[i("div",ia,[e[31]||(e[31]=i("div",{class:"scenario-label"},"Спот +5%",-1)),i("div",{class:v(["scenario-value",Aa(5)>0?"text-green":"text-red"])},c(Aa(5).toFixed(2)),3)]),i("div",ta,[e[32]||(e[32]=i("div",{class:"scenario-label"},"Спот +2.5%",-1)),i("div",{class:v(["scenario-value",Aa(2.5)>0?"text-green":"text-red"])},c(Aa(2.5).toFixed(2)),3)]),i("div",ca,[e[33]||(e[33]=i("div",{class:"scenario-label"},"Спот без изм.",-1)),i("div",{class:v(["scenario-value",Aa(0)>0?"text-green":"text-red"])},c(Aa(0).toFixed(2)),3)]),i("div",da,[e[34]||(e[34]=i("div",{class:"scenario-label"},"Спот -2.5%",-1)),i("div",{class:v(["scenario-value",Aa(-2.5)>0?"text-green":"text-red"])},c(Aa(-2.5).toFixed(2)),3)]),i("div",ra,[e[35]||(e[35]=i("div",{class:"scenario-label"},"Спот -5%",-1)),i("div",{class:v(["scenario-value",Aa(-5)>0?"text-green":"text-red"])},c(Aa(-5).toFixed(2)),3)]),i("div",va,[e[36]||(e[36]=i("div",{class:"scenario-label"},"Vol +10%",-1)),i("div",{class:v(["scenario-value",Aa(0,10)>0?"text-green":"text-red"])},c(Aa(0,10).toFixed(2)),3)])])]),i("div",na,[e[39]||(e[39]=i("div",{class:"chart-header"},[i("h3",null,"Матрица P&L (Спот vs Волатильность)")],-1)),i("div",oa,[i("table",ua,[e[38]||(e[38]=i("thead",null,[i("tr",null,[i("th",null,"Спот / Vol"),i("th",null,"Vol -2%"),i("th",null,"Vol -1%"),i("th",null,"Vol базовое"),i("th",null,"Vol +1%"),i("th",null,"Vol +2%")])],-1)),i("tbody",null,[(u(!0),l(d,null,r(Ca.value,(a,e)=>(u(),l("tr",{key:e},[i("td",ma,c([-5,-2.5,0,2.5,5][e])+"%",1),(u(!0),l(d,null,r(a,(a,e)=>(u(),l("td",{key:e,class:v({positive:a>0,negative:a<0})},c(a.toFixed(2)),3))),128))]))),128))])])])]),i("div",pa,[e[48]||(e[48]=i("div",{class:"chart-header"},[i("h3",null,"Риск-метрики")],-1)),i("div",ga,[i("div",ha,[e[40]||(e[40]=i("div",{class:"metric-label"},"Макс. прибыль",-1)),i("div",ka,c(Ma.value.toFixed(2)),1),e[41]||(e[41]=i("div",{class:"metric-info"},"Максимальный выигрыш",-1))]),i("div",xa,[e[42]||(e[42]=i("div",{class:"metric-label"},"Макс. убыток",-1)),i("div",ya,c(_a.value.toFixed(2)),1),e[43]||(e[43]=i("div",{class:"metric-info"},"Максимальный убыток",-1))]),i("div",ba,[e[44]||(e[44]=i("div",{class:"metric-label"},"Точка безубыточности",-1)),i("div",Fa,c(La.value.toFixed(2)),1),e[45]||(e[45]=i("div",{class:"metric-info"},"Точка безубыточности",-1))]),i("div",fa,[e[46]||(e[46]=i("div",{class:"metric-label"},"Риск/Доходность",-1)),i("div",qa,c((Math.abs(_a.value)/Math.abs(Ma.value)||0).toFixed(2)),1),e[47]||(e[47]=i("div",{class:"metric-info"},"Соотношение риска",-1))])])])])])]))}}),[["__scopeId","data-v-274cfc8d"]]);export{Va as default};
