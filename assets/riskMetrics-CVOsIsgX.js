import{s as t,r as a,v as e}from"./vendor-DLyKmMu8.js";const r=t("riskMetrics",()=>{const t=a(null),r=a([]),o=a(24e5),i=e(()=>t.value?.var95||0),n=e(()=>t.value?.var99||0),l=e(()=>t.value?.cvar95||0),s=e(()=>t.value?.cvar99||0),u=e(()=>t.value?.expectedReturn||0),c=e(()=>t.value?.volatility||0),v=e(()=>t.value?.sharpeRatio||0),p=e(()=>t.value?.portfolioBeta||.85),b=e(()=>t.value?.riskContributions||[]),m=e(()=>t.value?.maxDrawdown||0);return{metrics:t,stressScenarios:r,totalEquity:o,updateMetrics:a=>{t.value||(t.value={var95:0,var99:0,cvar95:0,cvar99:0,expectedReturn:0,volatility:0,sharpeRatio:0,portfolioBeta:.85,riskContributions:[],maxDrawdown:0,timestamp:new Date}),t.value={...t.value,...a,timestamp:new Date}},calculateRiskContributions:(t,a,e,r=o.value)=>{if(!t.length||0===a)return[];const i=t.reduce((t,a)=>t+a.notional,0);if(0===i)return[];const n=[];t.forEach((o,l)=>{const s=o.notional/i,u=e.find(t=>t.label===o.symbol);if(!u)return;let c=0;t.forEach((t,a)=>{a<u.values.length&&(c+=u.values[a]*(t.notional/i))});const v=a*s*c*r;n.push({symbol:o.symbol,weight:100*s,contribution:Math.abs(v),percentRisk:0,color:o.color})});const l=n.reduce((t,a)=>t+a.contribution,0);return l>0&&n.forEach(t=>{t.percentRisk=t.contribution/l*100}),n.sort((t,a)=>a.contribution-t.contribution)},calculateVaR:(t,a,e=.95,r=1)=>{const o=t*({.9:1.282,.95:1.645,.99:2.326,.999:3.09}[e]||1.645)*(a*Math.sqrt(r/252));return{var:-o,cvar:-(1.25*o)}},updateStressScenarios:t=>{r.value=t},calculateSortinoRatio:(t,a)=>1.5*(a>0?t/a:0),var95:i,var99:n,cvar95:l,cvar99:s,expectedReturn:u,volatility:c,sharpeRatio:v,portfolioBeta:p,riskContributions:b,maxDrawdown:m}});export{r as u};
