import{d as e,r as a,v as l,G as s,b as t,c as i,e as r,g as n,f as o,k as c,j as u,t as d,n as v,x as m,L as p,C as y,F as g,i as h,M as x,y as f,w as b,T as k,P as w,q as _}from"./vendor-DLyKmMu8.js";import{g as z}from"./apiHeaders-DCeXWvJ_.js";import{_ as M}from"./index-AoYxWDki.js";const F="http://localhost:8000";function T(e){return{Noise:"Шум",Transient:"Переходный",Normal:"Нормальный",Stress:"Стрессовый",Crisis:"Кризисный"}[e]||e}function $(e){return{Noise:"#94a3b8",Transient:"#fbbf24",Normal:"#4ade80",Stress:"#f97316",Crisis:"#ef4444"}[e]||"#3b82f6"}function A(e){const a=["#3b82f6","#4ade80","#f97316","#ef4444","#a855f7","#06b6d4","#f43f5e"];return a[e%a.length]}function R(e){return!isFinite(e)||e<=0?"N/A":e<1?"< 1 дня":e<7?`${e.toFixed(1)} дн.`:e<30?`${(e/7).toFixed(1)} нед.`:e<365?`${(e/30).toFixed(1)} мес.`:`${(e/365).toFixed(1)} лет`}const j={class:"page-container custom-scroll"},L={class:"section-header"},S={class:"header-actions"},B={key:0,class:"glass-pill status-pill"},U={class:"status-label"},C={class:"text-white"},N={key:1,class:"glass-pill"},V={class:"dashboard-grid"},I={class:"left-panel"},Q={class:"glass-card panel"},P={class:"controls-form"},Z={class:"input-group"},E={class:"input-group mt-2"},Y=["value"],q={class:"input-group mt-2"},H={class:"glass-card panel"},O={class:"controls-form"},G={class:"input-group"},W={class:"checkbox-label"},D={class:"range-row"},J=["disabled"],K={class:"range-value"},X={class:"range-row"},ee=["disabled"],ae={class:"range-value"},le=["disabled"],se={key:0},te={key:1,class:"flex items-center gap-2"},ie={key:0,class:"glass-card panel"},re={class:"metrics-grid"},ne={class:"metric-item"},oe={class:"metric-value text-blue"},ce={class:"metric-item"},ue={class:"metric-value"},de={key:0,class:"text-xs text-yellow ml-1"},ve={class:"metric-item"},me={class:"metric-item"},pe={class:"metric-value text-green"},ye={key:0,class:"optimization-info"},ge={class:"opt-item"},he={class:"opt-value"},xe={class:"opt-item"},fe={class:"opt-value"},be={key:0},ke={key:1},we={key:0},_e={key:1},ze={key:0,class:"glass-card panel"},Me={class:"regime-list"},Fe={class:"regime-header"},Te={class:"regime-name"},$e={class:"regime-metrics"},Ae={class:"rm-item"},Re={class:"rm-value"},je={class:"rm-item"},Le={class:"rm-value"},Se={class:"rm-item"},Be={class:"rm-value"},Ue={class:"regime-bar"},Ce={class:"regime-bar-label"},Ne={class:"main-panel"},Ve={class:"glass-card chart-card"},Ie={class:"chart-header"},Qe={key:0,class:"badge-info"},Pe={class:"poles-container"},Ze={key:0,viewBox:"-1.5 -1.5 3 3",preserveAspectRatio:"xMidYMid meet",class:"poles-svg"},Ee=["cx","cy","fill"],Ye=["cx","cy","fill"],qe=["x","y"],He={key:1,viewBox:"-1.5 -1.5 3 3",preserveAspectRatio:"xMidYMid meet",class:"poles-svg placeholder"},Oe={class:"glass-card chart-card mt-4"},Ge={class:"chart-header"},We={class:"ch-left"},De={key:0,class:"badge-ticker"},Je={key:0,class:"playback-controls"},Ke=["title"],Xe={key:0},ea={key:1},aa={class:"timeline-wrapper"},la=["max"],sa={class:"chart-container"},ta={key:0,viewBox:"0 0 800 300",preserveAspectRatio:"none",class:"dynamics-svg"},ia=["x","width","fill"],ra=["y1","y2"],na=["d"],oa=["x1","x2"],ca={key:1,viewBox:"0 0 800 300",preserveAspectRatio:"none",class:"dynamics-svg placeholder"},ua=["y1","y2"],da={key:0},va={key:1,x:"400",y:"150",fill:"rgba(255,255,255,0.3)","font-size":"14","text-anchor":"middle","font-weight":"300"},ma={class:"glass-card chart-card mt-4"},pa={class:"chart-container-sm"},ya={key:0,viewBox:"0 0 800 160",preserveAspectRatio:"none",class:"energy-svg"},ga=["d","fill"],ha={key:1,viewBox:"0 0 800 120",preserveAspectRatio:"none",class:"entropy-svg placeholder"},xa={class:"glass-card chart-card mt-4"},fa={class:"chart-header"},ba={key:0,class:"badge-info"},ka={class:"chart-container-sm"},wa={key:0,viewBox:"0 0 800 120",preserveAspectRatio:"none",class:"entropy-svg"},_a=["d"],za=["y1","y2"],Ma=["y"],Fa={key:1,viewBox:"0 0 800 120",preserveAspectRatio:"none",class:"entropy-svg placeholder"},Ta={class:"glass-card chart-card mt-4"},$a={class:"chart-container-sm"},Aa={key:0,viewBox:"0 0 800 140",preserveAspectRatio:"none",class:"spectrum-svg"},Ra=["d"],ja=["y1","y2"],La={key:1,viewBox:"0 0 800 140",preserveAspectRatio:"none",class:"spectrum-svg placeholder"},Sa=["y1","y2"],Ba={key:0,class:"error-toast"},Ua=M(e({__name:"SpectralRegimeAnalysis",setup(e){const M=a(null),Ua=a("stocks"),Ca=a("SPY"),Na=a(252),Va=a(!0),Ia=a(5),Qa=a(20),Pa=a(!1),Za=a("Загрузка..."),Ea=a(""),Ya=a(null),qa=a(null),Ha=a(0),Oa=a(!1);let Ga=null;const Wa=l(()=>M.value&&M.value[Ua.value]||[]);s(Ua,()=>{const e=Wa.value;e.length>0&&(Ca.value=e[0].ticker)}),(async()=>{try{const e=await async function(){const e=await fetch(`${F}/api/spectral-regime/assets`);if(!e.ok)throw new Error(`Ошибка получения списка активов: ${e.status}`);return e.json()}();e.success&&(M.value=e.data)}catch(e){console.error("Failed to load assets:",e)}})();const Da=l(()=>Ya.value?Ya.value.analysis.visualization.dynamics:null),Ja=l(()=>Ya.value?Ya.value.analysis.visualization.spectrum:null),Ka=l(()=>Ya.value?Ya.value.analysis.visualization.poles:[]),Xa=l(()=>Ya.value?Ya.value.analysis.visualization.regime_poles:[]),el=l(()=>{if(!Ya.value)return[];const e=Ya.value.analysis.summary.regime_params;return Object.values(e)}),al=l(()=>Ya.value?Ya.value.analysis.summary.current_metrics.regime_index:-1),ll=l(()=>{if(!Ya.value)return"N/A";return T(Ya.value.analysis.summary.current_metrics.regime_type)}),sl=l(()=>{if(!Ya.value)return"#3b82f6";const e=al.value;return A(e>=0?e:0)}),tl=l(()=>Ya.value?Ya.value.analysis.summary.current_metrics.entropy.toFixed(3):"N/A"),il=l(()=>{if(!Ya.value)return"";const e=Ya.value.analysis.summary.current_metrics.entropy/Math.log(Ya.value.analysis.summary.n_regimes);return e<.3?"text-green":e<.7?"text-yellow":"text-red"}),rl=l(()=>Da.value?Da.value.regime_signal.length-1:0),nl=l(()=>0===rl.value?0:Ha.value/rl.value*100),ol=l(()=>Da.value?Da.value.regime_signal.slice(0,Ha.value+1):[]),cl=l(()=>Da.value?800/Da.value.regime_signal.length:1),ul=e=>e*cl.value,dl=l(()=>{if(!Da.value||!Da.value.time_series.length)return"";const e=Da.value.time_series.slice(0,Ha.value+1),a=Math.min(...Da.value.time_series),l=Math.max(...Da.value.time_series)-a||1;return"M "+e.map((e,s)=>{const t=ul(s),i=300-(e-a)/l*260-20;return`${t.toFixed(1)},${i.toFixed(1)}`}).join(" L ")}),vl=e=>{if(!Da.value||!Da.value.regime_energies.length)return"";const a=Da.value.regime_energies.slice(0,Ha.value+1),l=a.length;let s=[],t=[];for(let i=0;i<l;i++){const l=ul(i);let r=0;for(let s=0;s<e;s++)r+=a[i][s]||0;const n=160-150*(r+(a[i][e]||0))-5,o=160-150*r-5;s.push(`${l.toFixed(1)},${n.toFixed(1)}`),t.push(`${l.toFixed(1)},${o.toFixed(1)}`)}return`M ${s[0]} L ${s.join(" L ")} L ${t.reverse().join(" L ")} Z`},ml=l(()=>{if(!Da.value||!Da.value.entropy.length)return"";const e=Da.value.entropy.slice(0,Ha.value+1);Math.log(Ya.value?.analysis.summary.n_regimes||3);let a="M 0,120 ";return e.forEach((e,l)=>{const s=ul(l),t=pl(e);a+=`L ${s.toFixed(1)},${t.toFixed(1)} `}),a+=`L ${ul(e.length-1).toFixed(1)},120 Z`,a}),pl=e=>115-e/(1.1*Math.log(Ya.value?.analysis.summary.n_regimes||3))*100,yl=l(()=>{if(!Ja.value||!Ja.value.amplitude.length)return"";const e=Ja.value.amplitude,a=Math.max(...e),l=Math.min(...e),s=a-l||1;return"M "+e.map((a,t)=>{const i=t/e.length*800,r=130-(a-l)/s*110-10;return`${i.toFixed(1)},${r.toFixed(1)}`}).join(" L ")}),gl=e=>{if(!Ya.value)return 0;const a=Ya.value.analysis.summary.regime_time_stats[String(e)];return a?.percentage||0},hl=()=>{Oa.value?xl():(Ha.value>=rl.value&&(Ha.value=0),Oa.value=!0,bl())},xl=()=>{Oa.value=!1,Ga&&(cancelAnimationFrame(Ga),Ga=null)},fl=()=>{xl(),Ha.value=0},bl=()=>{if(!Oa.value)return;const e=Ha.value+2;e>=rl.value?(Ha.value=rl.value,xl()):(Ha.value=e,Ga=requestAnimationFrame(bl))},kl=async()=>{if(!Pa.value){Pa.value=!0,Za.value="Загрузка данных...",Ea.value="",xl();try{Za.value="Загрузка данных...",await new Promise(e=>setTimeout(e,100)),Za.value=Va.value?"Оптимизация параметров...":"Анализ спектра...";const e=await async function(e,a=252,l,s,t=!0,i="bic"){const r=new URLSearchParams({ticker:e,period_days:a.toString(),auto_optimize:t.toString(),criterion:i});null!=l&&r.append("n_poles",l.toString()),null!=s&&r.append("window_size",s.toString());const n=await fetch(`${F}/api/spectral-regime/analyze-asset?${r}`,{method:"POST",headers:z()});if(!n.ok){const e=await n.json().catch(()=>({detail:"Unknown error"}));throw new Error(e.detail||`Ошибка анализа актива: ${n.status}`)}return n.json()}(Ca.value,Na.value,Va.value?null:Ia.value,Va.value?null:Qa.value,Va.value,"bic");e.success?(Ya.value=e,qa.value=e.asset_metadata,Ha.value=0,setTimeout(()=>{Ha.value=rl.value},100)):Ea.value="Ошибка при выполнении анализа"}catch(e){console.error("Analysis error:",e),Ea.value=e.message||"Неизвестная ошибка"}finally{Pa.value=!1,Za.value=""}}};return t(()=>{xl()}),(e,a)=>(_(),i("div",j,[r("div",L,[a[9]||(a[9]=r("div",{class:"header-left"},[r("h1",{class:"section-title"},"Комплексный анализ скрытых рыночных режимов"),r("p",{class:"section-subtitle"},"Спектральная декомпозиция через мероморфное расширение")],-1)),r("div",S,[Ya.value?(_(),i("div",B,[r("span",{class:"dot",style:c({background:sl.value})},null,4),r("span",U,[a[8]||(a[8]=u(" Режим: ",-1)),r("b",C,d(ll.value),1)])])):o("",!0),Ya.value?(_(),i("div",N,[r("span",{class:v(Ya.value.summary.stability.is_stable?"text-green":"text-red")},d(Ya.value.summary.stability.is_stable?"Стабильный":"Нестабильный"),3)])):o("",!0)])]),r("div",V,[r("aside",I,[r("div",Q,[a[15]||(a[15]=r("div",{class:"panel-header"},[r("h3",null,"Выбор актива")],-1)),r("div",P,[r("div",Z,[a[11]||(a[11]=r("label",{class:"lbl"},"Категория",-1)),m(r("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>Ua.value=e),class:"glass-select full-width"},[...a[10]||(a[10]=[y('<option value="stocks" data-v-ea19de92>Акции (US)</option><option value="crypto" data-v-ea19de92>Криптовалюты</option><option value="commodities" data-v-ea19de92>Сырьё</option><option value="bonds" data-v-ea19de92>Облигации</option><option value="forex" data-v-ea19de92>Валюты</option><option value="russia" data-v-ea19de92>Россия</option>',6)])],512),[[p,Ua.value]])]),r("div",E,[a[12]||(a[12]=r("label",{class:"lbl"},"Актив",-1)),m(r("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>Ca.value=e),class:"glass-select full-width"},[(_(!0),i(g,null,h(Wa.value,e=>(_(),i("option",{key:e.ticker,value:e.ticker},d(e.name)+" ("+d(e.ticker)+") ",9,Y))),128))],512),[[p,Ca.value]])]),r("div",q,[a[14]||(a[14]=r("label",{class:"lbl"},"Период (дни)",-1)),m(r("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>Na.value=e),class:"glass-select full-width"},[...a[13]||(a[13]=[r("option",{value:126},"6 месяцев (126)",-1),r("option",{value:252},"1 год (252)",-1),r("option",{value:504},"2 года (504)",-1),r("option",{value:756},"3 года (756)",-1),r("option",{value:1260},"5 лет (1260)",-1)])],512),[[p,Na.value]])])])]),r("div",H,[a[23]||(a[23]=r("div",{class:"panel-header"},[r("h3",null,"Параметры анализа")],-1)),r("div",O,[r("div",G,[r("label",W,[m(r("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=e=>Va.value=e),class:"checkbox-input"},null,512),[[x,Va.value]]),a[16]||(a[16]=r("span",{class:"checkbox-text"},"Автоматическая оптимизация параметров",-1))]),a[17]||(a[17]=r("span",{class:"hint"},"Автоматически определяет оптимальные значения",-1))]),r("div",{class:v(["input-group",{"opacity-50":Va.value}])},[a[18]||(a[18]=r("label",{class:"lbl"},"Количество полюсов (M)",-1)),r("div",D,[m(r("input",{type:"range","onUpdate:modelValue":a[4]||(a[4]=e=>Ia.value=e),min:"3",max:"12",step:"1",class:"range-slider",disabled:Va.value},null,8,J),[[f,Ia.value,void 0,{number:!0}]]),r("span",K,d(Va.value?"auto":Ia.value),1)]),a[19]||(a[19]=r("span",{class:"hint"},"Рекомендуется 5-8",-1))],2),r("div",{class:v(["input-group mt-3",{"opacity-50":Va.value}])},[a[20]||(a[20]=r("label",{class:"lbl"},"Размер окна (W)",-1)),r("div",X,[m(r("input",{type:"range","onUpdate:modelValue":a[5]||(a[5]=e=>Qa.value=e),min:"10",max:"50",step:"5",class:"range-slider",disabled:Va.value},null,8,ee),[[f,Qa.value,void 0,{number:!0}]]),r("span",ae,d(Va.value?"auto":Qa.value+" дн."),1)]),a[21]||(a[21]=r("span",{class:"hint"},"Для динамического анализа",-1))],2),r("button",{onClick:kl,disabled:Pa.value,class:"btn-primary-gradient mt-6"},[Pa.value?(_(),i("span",te,[a[22]||(a[22]=r("span",{class:"spinner-mini"},null,-1)),u(" "+d(Za.value),1)])):(_(),i("span",se,"Запустить анализ"))],8,le)])]),n(k,{name:"fade"},{default:b(()=>[Ya.value?(_(),i("div",ie,[a[30]||(a[30]=r("div",{class:"panel-header"},[r("h3",null,"Текущие метрики")],-1)),r("div",re,[r("div",ne,[a[24]||(a[24]=r("span",{class:"metric-label"},"Режимов",-1)),r("span",oe,d(Ya.value.summary.n_regimes),1)]),r("div",ce,[a[25]||(a[25]=r("span",{class:"metric-label"},"Полюсов",-1)),r("span",ue,[u(d(Ya.value.summary.n_poles)+" ",1),Ya.value.summary.optimization?.auto_optimized?(_(),i("span",de,"(auto)")):o("",!0)])]),r("div",ve,[a[26]||(a[26]=r("span",{class:"metric-label"},"Энтропия",-1)),r("span",{class:v(["metric-value",il.value])},d(tl.value),3)]),r("div",me,[a[27]||(a[27]=r("span",{class:"metric-label"},"Качество",-1)),r("span",pe,d(Ya.value.summary.reconstruction.pct_explained.toFixed(1))+"% ",1)])]),Ya.value.summary.optimization?.auto_optimized?(_(),i("div",ye,[r("div",ge,[a[28]||(a[28]=r("span",{class:"opt-label"},"Окно:",-1)),r("span",he,d(Ya.value.summary.optimization.window_size_used)+" дн.",1)]),r("div",xe,[a[29]||(a[29]=r("span",{class:"opt-label"},"Критерий:",-1)),r("span",fe,d(Ya.value.summary.optimization.criterion_used?.toUpperCase()||"BIC"),1)])])):o("",!0),r("div",{class:v(["stability-badge",Ya.value.summary.stability.is_stable?"stable":"unstable"])},[Ya.value.summary.stability.is_stable?(_(),i("span",be," Все полюсы внутри единичного круга ")):(_(),i("span",ke,d(Ya.value.summary.stability.n_violations)+" нестабильных полюсов ",1))],2),r("div",{class:v(["stability-badge mt-2",Ya.value.summary.minimum_phase.is_minimum_phase?"stable":"warning"])},[Ya.value.summary.minimum_phase.is_minimum_phase?(_(),i("span",we," Минимально-фазовая система ")):(_(),i("span",_e," Non-minimum phase (признак кризиса) "))],2)])):o("",!0)]),_:1}),n(k,{name:"fade"},{default:b(()=>[Ya.value&&el.value.length?(_(),i("div",ze,[a[34]||(a[34]=r("div",{class:"panel-header"},[r("h3",null,"Параметры режимов")],-1)),r("div",Me,[(_(!0),i(g,null,h(el.value,(e,l)=>(_(),i("div",{key:l,class:v(["regime-item",{active:al.value===l}])},[r("div",Fe,[r("span",{class:"regime-dot",style:c({background:w(A)(l)})},null,4),r("span",Te,"Режим "+d(l),1),r("span",{class:"regime-type",style:c({color:w($)(e.type)})},d(w(T)(e.type)),5)]),r("div",$e,[r("div",Ae,[a[31]||(a[31]=r("span",{class:"rm-label"},"|λ|",-1)),r("span",Re,d(e.radius.toFixed(3)),1)]),r("div",je,[a[32]||(a[32]=r("span",{class:"rm-label"},"τ",-1)),r("span",Le,d(w(R)(e.duration)),1)]),r("div",Se,[a[33]||(a[33]=r("span",{class:"rm-label"},"I",-1)),r("span",Be,d(e.intensity.toFixed(3)),1)])]),r("div",Ue,[r("div",{class:"regime-bar-fill",style:c({width:gl(l)+"%",background:w(A)(l)})},null,4),r("span",Ce,d(gl(l).toFixed(0))+"% времени",1)])],2))),128))])])):o("",!0)]),_:1})]),r("main",Ne,[r("div",Ve,[r("div",Ie,[a[35]||(a[35]=r("h3",null,"Диаграмма полюсов в комплексной плоскости",-1)),Ya.value?(_(),i("span",Qe,d(Ya.value.summary.n_poles)+" полюсов",1)):o("",!0)]),r("div",Pe,[Ya.value?(_(),i("svg",Ze,[a[36]||(a[36]=y('<line x1="-1.5" y1="0" x2="1.5" y2="0" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" data-v-ea19de92></line><line x1="0" y1="-1.5" x2="0" y2="1.5" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" data-v-ea19de92></line><circle cx="0" cy="0" r="1" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="0.02" stroke-dasharray="0.05 0.03" data-v-ea19de92></circle><circle cx="0" cy="0" r="0.5" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" data-v-ea19de92></circle><circle cx="0" cy="0" r="0.8" fill="rgba(74, 222, 128, 0.05)" stroke="none" data-v-ea19de92></circle><circle cx="0" cy="0" r="0.95" fill="none" stroke="rgba(251, 191, 36, 0.2)" stroke-width="0.01" data-v-ea19de92></circle>',6)),(_(!0),i(g,null,h(Ka.value,(e,a)=>{return _(),i("g",{key:"pole-"+a},[r("circle",{cx:e.real,cy:-e.imag,r:"0.04",fill:(l=e.radius,l<.5?"#94a3b8":l<.8?"#fbbf24":l<.95?"#4ade80":l<.999?"#f97316":"#ef4444"),stroke:"rgba(255,255,255,0.5)","stroke-width":"0.01"},null,8,Ee)]);var l}),128)),(_(!0),i(g,null,h(Xa.value,(e,a)=>(_(),i("g",{key:"regime-pole-"+a},[r("circle",{cx:e.real,cy:-e.imag,r:"0.08",fill:w(A)(e.regime),stroke:"white","stroke-width":"0.015",class:"regime-pole-marker"},null,8,Ye),r("text",{x:e.real+.1,y:-e.imag,fill:"white","font-size":"0.12","alignment-baseline":"middle"}," R"+d(e.regime),9,qe)]))),128)),a[37]||(a[37]=r("text",{x:"1.35",y:"0.05",fill:"rgba(255,255,255,0.4)","font-size":"0.08"},"Re",-1)),a[38]||(a[38]=r("text",{x:"0.05",y:"-1.35",fill:"rgba(255,255,255,0.4)","font-size":"0.08"},"Im",-1)),a[39]||(a[39]=r("text",{x:"1.02",y:"0.12",fill:"rgba(255,255,255,0.3)","font-size":"0.06"},"|z|=1",-1))])):(_(),i("svg",He,[...a[40]||(a[40]=[y('<line x1="-1.5" y1="0" x2="1.5" y2="0" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" data-v-ea19de92></line><line x1="0" y1="-1.5" x2="0" y2="1.5" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" data-v-ea19de92></line><circle cx="0" cy="0" r="1" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="0.02" stroke-dasharray="0.05 0.03" data-v-ea19de92></circle><circle cx="0" cy="0" r="0.5" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="0.01" data-v-ea19de92></circle><circle cx="0" cy="0" r="0.8" fill="rgba(74, 222, 128, 0.03)" stroke="none" data-v-ea19de92></circle><circle cx="0" cy="0" r="0.95" fill="none" stroke="rgba(251, 191, 36, 0.1)" stroke-width="0.01" data-v-ea19de92></circle><circle cx="0.6" cy="0.3" r="0.04" fill="#4ade80" fill-opacity="0.4" stroke="rgba(255,255,255,0.3)" stroke-width="0.01" data-v-ea19de92></circle><circle cx="0.7" cy="-0.2" r="0.04" fill="#fbbf24" fill-opacity="0.4" stroke="rgba(255,255,255,0.3)" stroke-width="0.01" data-v-ea19de92></circle><circle cx="0.85" cy="0.1" r="0.08" fill="#3b82f6" fill-opacity="0.4" stroke="rgba(255,255,255,0.4)" stroke-width="0.015" data-v-ea19de92></circle><circle cx="0.4" cy="0.5" r="0.04" fill="#f97316" fill-opacity="0.4" stroke="rgba(255,255,255,0.3)" stroke-width="0.01" data-v-ea19de92></circle><text x="1.35" y="0.05" fill="rgba(255,255,255,0.2)" font-size="0.08" data-v-ea19de92>Re</text><text x="0.05" y="-1.35" fill="rgba(255,255,255,0.2)" font-size="0.08" data-v-ea19de92>Im</text><text x="1.02" y="0.12" fill="rgba(255,255,255,0.15)" font-size="0.06" data-v-ea19de92>|z|=1</text><text x="0" y="0.3" fill="rgba(255,255,255,0.3)" font-size="0.2" text-anchor="middle" font-weight="300" data-v-ea19de92> Запустите анализ </text>',14)])]))])]),r("div",Oe,[r("div",Ge,[r("div",We,[a[41]||(a[41]=r("h3",null,"Динамика и режимы",-1)),qa.value?(_(),i("span",De,d(qa.value.ticker),1)):o("",!0)]),Ya.value?(_(),i("div",Je,[r("button",{class:"icon-btn",onClick:hl,title:Oa.value?"Пауза":"Воспроизвести"},[Oa.value?(_(),i("span",Xe,"⏸")):(_(),i("span",ea,"▶"))],8,Ke),r("div",aa,[m(r("input",{type:"range",min:0,max:rl.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Ha.value=e),onInput:xl,class:"timeline-slider"},null,40,la),[[f,Ha.value,void 0,{number:!0}]]),r("div",{class:"timeline-track",style:c({width:nl.value+"%"})},null,4)]),r("button",{class:"icon-btn",onClick:fl,title:"Сброс"},"↺")])):o("",!0)]),r("div",sa,[Ya.value&&Da.value?(_(),i("svg",ta,[(_(!0),i(g,null,h(ol.value,(e,a)=>(_(),i("rect",{key:"bg-"+a,x:ul(a),y:"0",width:cl.value+.5,height:"300",fill:w(A)(e),"fill-opacity":"0.15"},null,8,ia))),128)),(_(),i(g,null,h([75,150,225],e=>r("line",{key:"grid-"+e,x1:"0",y1:e,x2:"800",y2:e,stroke:"rgba(255,255,255,0.05)"},null,8,ra)),64)),r("path",{d:dl.value,fill:"none",stroke:"white","stroke-width":"1.5","stroke-linejoin":"round"},null,8,na),Ha.value<rl.value?(_(),i("line",{key:0,x1:ul(Ha.value),y1:"0",x2:ul(Ha.value),y2:"300",stroke:"rgba(255,255,255,0.6)","stroke-dasharray":"4"},null,8,oa)):o("",!0)])):(_(),i("svg",ca,[(_(),i(g,null,h([75,150,225],e=>r("line",{key:"grid-"+e,x1:"0",y1:e,x2:"800",y2:e,stroke:"rgba(255,255,255,0.05)"},null,8,ua)),64)),a[43]||(a[43]=y('<rect x="0" y="0" width="160" height="300" fill="rgba(59, 130, 246, 0.08)" data-v-ea19de92></rect><rect x="160" y="0" width="160" height="300" fill="rgba(74, 222, 128, 0.08)" data-v-ea19de92></rect><rect x="320" y="0" width="160" height="300" fill="rgba(59, 130, 246, 0.08)" data-v-ea19de92></rect><rect x="480" y="0" width="160" height="300" fill="rgba(251, 191, 36, 0.08)" data-v-ea19de92></rect><rect x="640" y="0" width="160" height="300" fill="rgba(59, 130, 246, 0.08)" data-v-ea19de92></rect><path d="M 0,150 Q 100,100 200,120 T 400,140 T 600,130 T 800,150" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1.5" stroke-linejoin="round" stroke-dasharray="4 2" data-v-ea19de92></path>',6)),Pa.value?(_(),i("g",da,[...a[42]||(a[42]=[r("circle",{cx:"400",cy:"150",r:"20",fill:"none",stroke:"rgba(59, 130, 246, 0.5)","stroke-width":"2","stroke-dasharray":"10 5"},[r("animateTransform",{attributeName:"transform",type:"rotate",from:"0 400 150",to:"360 400 150",dur:"1s",repeatCount:"indefinite"})],-1),r("text",{x:"400",y:"200",fill:"rgba(255,255,255,0.4)","font-size":"12","text-anchor":"middle"},"Загрузка...",-1)])])):(_(),i("text",va," Нажмите «Запустить анализ» "))]))])]),r("div",ma,[a[45]||(a[45]=r("div",{class:"chart-header"},[r("h3",null,"Энергии режимов (нормализованные)")],-1)),r("div",pa,[Ya.value&&Da.value?(_(),i("svg",ya,[(_(!0),i(g,null,h(Array.from({length:Ya.value.summary.n_regimes},(e,a)=>a).reverse(),e=>(_(),i("g",{key:"energy-"+e},[r("path",{d:vl(e),fill:w(A)(e),"fill-opacity":"0.6",stroke:"none"},null,8,ga)]))),128))])):(_(),i("svg",ha,[...a[44]||(a[44]=[r("line",{x1:"0",y1:"60",x2:"800",y2:"60",stroke:"rgba(255,255,255,0.1)","stroke-dasharray":"4"},null,-1),r("path",{d:"M 0,100 Q 100,80 200,70 T 400,65 T 600,75 T 800,85",fill:"rgba(139, 92, 246, 0.15)",stroke:"rgba(139, 92, 246, 0.4)","stroke-width":"1.5"},null,-1),r("path",{d:"M 0,100 Q 100,80 200,70 T 400,65 T 600,75 T 800,85 L 800,120 L 0,120 Z",fill:"rgba(139, 92, 246, 0.15)",stroke:"none"},null,-1),r("text",{x:"400",y:"70",fill:"rgba(255,255,255,0.2)","font-size":"11","text-anchor":"middle","font-weight":"300"}," Энтропия режимности ",-1)])]))])]),r("div",xa,[r("div",fa,[a[46]||(a[46]=r("h3",null,"Энтропия режимности",-1)),Ya.value?(_(),i("span",ba," Средняя: "+d(Ya.value.summary.entropy_stats.mean?.toFixed(3)||"N/A"),1)):o("",!0)]),r("div",ka,[Ya.value&&Da.value?(_(),i("svg",wa,[r("path",{d:ml.value,fill:"rgba(139, 92, 246, 0.3)",stroke:"#8b5cf6","stroke-width":"1.5"},null,8,_a),r("line",{x1:"0",y1:pl(Math.log(Ya.value.summary.n_regimes)),x2:"800",y2:pl(Math.log(Ya.value.summary.n_regimes)),stroke:"rgba(255,255,255,0.2)","stroke-dasharray":"4"},null,8,za),r("text",{x:"10",y:pl(Math.log(Ya.value.summary.n_regimes))-5,fill:"rgba(255,255,255,0.3)","font-size":"9"}," max entropy ",8,Ma)])):(_(),i("svg",Fa,[...a[47]||(a[47]=[r("line",{x1:"0",y1:"60",x2:"800",y2:"60",stroke:"rgba(255,255,255,0.1)","stroke-dasharray":"4"},null,-1),r("path",{d:"M 0,100 Q 100,80 200,70 T 400,65 T 600,75 T 800,85",fill:"rgba(139, 92, 246, 0.15)",stroke:"rgba(139, 92, 246, 0.4)","stroke-width":"1.5"},null,-1),r("path",{d:"M 0,100 Q 100,80 200,70 T 400,65 T 600,75 T 800,85 L 800,120 L 0,120 Z",fill:"rgba(139, 92, 246, 0.15)",stroke:"none"},null,-1),r("text",{x:"400",y:"70",fill:"rgba(255,255,255,0.2)","font-size":"11","text-anchor":"middle","font-weight":"300"}," Энтропия режимности ",-1)])]))])]),r("div",Ta,[a[52]||(a[52]=r("div",{class:"chart-header"},[r("h3",null,"Амплитудный спектр |H(e^iw)|")],-1)),r("div",$a,[Ya.value&&Ja.value?(_(),i("svg",Aa,[r("path",{d:yl.value,fill:"none",stroke:"#60a5fa","stroke-width":"1.5"},null,8,Ra),(_(),i(g,null,h([35,70,105],e=>r("line",{key:"spec-grid-"+e,x1:"0",y1:e,x2:"800",y2:e,stroke:"rgba(255,255,255,0.05)"},null,8,ja)),64)),a[48]||(a[48]=r("text",{x:"5",y:"135",fill:"rgba(255,255,255,0.3)","font-size":"9"},"0",-1)),a[49]||(a[49]=r("text",{x:"395",y:"135",fill:"rgba(255,255,255,0.3)","font-size":"9"},"π/2",-1)),a[50]||(a[50]=r("text",{x:"790",y:"135",fill:"rgba(255,255,255,0.3)","font-size":"9"},"π",-1))])):(_(),i("svg",La,[(_(),i(g,null,h([35,70,105],e=>r("line",{key:"spec-grid-"+e,x1:"0",y1:e,x2:"800",y2:e,stroke:"rgba(255,255,255,0.05)"},null,8,Sa)),64)),a[51]||(a[51]=y('<path d="M 0,120 Q 200,100 400,60 T 800,40" fill="none" stroke="rgba(96, 165, 250, 0.4)" stroke-width="1.5" stroke-dasharray="3 2" data-v-ea19de92></path><text x="5" y="135" fill="rgba(255,255,255,0.2)" font-size="9" data-v-ea19de92>0</text><text x="395" y="135" fill="rgba(255,255,255,0.2)" font-size="9" data-v-ea19de92>π/2</text><text x="790" y="135" fill="rgba(255,255,255,0.2)" font-size="9" data-v-ea19de92>π</text><text x="400" y="80" fill="rgba(255,255,255,0.2)" font-size="11" text-anchor="middle" font-weight="300" data-v-ea19de92> Амплитудный спектр </text>',5))]))])])])]),n(k,{name:"fade"},{default:b(()=>[Ea.value?(_(),i("div",Ba,[u(d(Ea.value)+" ",1),r("button",{onClick:a[7]||(a[7]=e=>Ea.value=""),class:"close-btn"},"×")])):o("",!0)]),_:1})]))}}),[["__scopeId","data-v-ea19de92"]]);export{Ua as default};
