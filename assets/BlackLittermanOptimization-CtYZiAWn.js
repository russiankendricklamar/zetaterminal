import{v as a,r as e,d as s,c as l,q as t,e as i,f as n,j as o,t as r,P as c,x as d,y as u,F as p,i as v,n as m,L as b,k as h}from"./vendor-DLyKmMu8.js";import{usePortfolioStore as g}from"./portfolio-t34lcnLk.js";import{u as y}from"./riskMetrics-CVOsIsgX.js";import{g as w}from"./apiHeaders-DCeXWvJ_.js";import{_ as x}from"./index-BaahR4yN.js";function f(){const s=g(),l=y(),t=a(()=>s.positions),i=a(()=>s.correlationMatrix),n=a(()=>s.selectedBank),o=e(!1),r=e(null),c=e({tau:.05,delta:2.5,riskFreeRate:.045,maxWeight:.3}),d=e([{id:1,type:"absolute",asset1Index:0,asset2Index:1,expectedReturn:.1,confidence:.7},{id:2,type:"relative",asset1Index:0,asset2Index:2,expectedReturn:.03,confidence:.5}]);let u=3;const p=a(()=>{const a=t.value,e=a.reduce((a,e)=>a+e.allocation,0);return e<=0?a.map(()=>1/a.length):a.map(a=>a.allocation/e)}),v=a(()=>{if(!r.value){const a={};return t.value.forEach(e=>{a[e.symbol]=e.allocation/100}),a}const a={};return r.value.optimal_weights.forEach((e,s)=>{const l=t.value[s]?.symbol;l&&(a[l]=e)}),a}),m=a(()=>{if(!r.value)return p.value.reduce((a,e,s)=>{const l=t.value[s]?.symbol;return l&&(a[l]=e),a},{});const a={};return r.value.equilibrium_weights.forEach((e,s)=>{const l=t.value[s]?.symbol;l&&(a[l]=e)}),a}),b=a(()=>r.value?r.value.equilibrium_returns:t.value.map(a=>.05+252*(a.dayChange/100))),h=a(()=>r.value?r.value.posterior_returns:b.value),x=a(()=>r.value?r.value.portfolio_stats:{expectedReturn:.065,volatility:.14,sharpeRatio:.143,numPositions:t.value.length}),f=a(()=>r.value?r.value.equilibrium_stats:{expectedReturn:.055,volatility:.15,sharpeRatio:.033}),k=a(()=>r.value?r.value.views_impact:[]),R=a(()=>r.value?r.value.risk_contributions:t.value.map(()=>0)),_=a=>{const e=v.value[a];return void 0!==e?100*e:0};return{isComputing:o,params:c,views:d,blResult:r,portfolioPositions:t,selectedBank:n,marketWeights:p,optimalWeights:v,equilibriumWeights:m,equilibriumReturns:b,posteriorReturns:h,portfolioStats:x,equilibriumStats:f,viewsImpact:k,riskContributions:R,addView:()=>{const a=t.value.length;d.value=[...d.value,{id:u++,type:"absolute",asset1Index:Math.min(d.value.length,a-1),asset2Index:Math.min(d.value.length+1,a-1),expectedReturn:.05,confidence:.5}]},removeView:a=>{d.value=d.value.filter(e=>e.id!==a)},getOptimalWeight:_,getEquilibriumWeight:a=>{const e=m.value[a];return void 0!==e?100*e:0},getWeightDelta:a=>_(a)-(t.value.find(e=>e.symbol===a)?.allocation??0),getDeltaClass:a=>Math.abs(a)<.1?"neutral":a>0?"positive":"negative",runOptimization:async a=>{o.value=!0;try{const e=t.value,s=e.length;if(0===s)throw new Error("Портфель пуст");if(0===d.value.length)throw new Error("Добавьте хотя бы один взгляд");const n=i.value,o=e.map(()=>.2),u=[];for(let a=0;a<s;a++){const e=[];for(let l=0;l<s;l++){const s=n[a]?.values[l]||(a===l?1:0);e.push(s*o[a]*o[l])}u.push(e)}const v=await(async a=>{try{const e=await fetch("   https://stochastic-dashbord-v1-production.up.railway.app/api/black-litterman/optimize",{method:"POST",headers:w(),body:JSON.stringify(a)});if(!e.ok){const a=await e.json().catch(()=>({detail:"Unknown error"}));throw new Error(a.detail||`HTTP error! status: ${e.status}`)}return await e.json()}catch(e){throw console.error("Black-Litterman Optimization Failed:",e),e}})({cov_matrix:u,market_weights:p.value,views:(t.value.length,d.value.map(a=>"absolute"===a.type?{assets:[a.asset1Index],weights:[1],expected_return:a.expectedReturn,confidence:a.confidence}:{assets:[a.asset1Index,a.asset2Index],weights:[1,-1],expected_return:a.expectedReturn,confidence:a.confidence})),tau:c.value.tau,delta:c.value.delta,risk_free_rate:c.value.riskFreeRate,max_weight:c.value.maxWeight,asset_names:e.map(a=>a.symbol)});r.value=v;const m=24e5,b=v.portfolio_stats,h=l.calculateVaR(m,b.volatility,.95,1),g=l.calculateVaR(m,b.volatility,.99,1),y=l.calculateRiskContributions(e.map((a,e)=>({symbol:a.symbol,allocation:100*v.optimal_weights[e],notional:m*v.optimal_weights[e],color:a.color})),b.volatility,i.value,m);l.updateMetrics({var95:h.var,var99:g.var,cvar95:h.cvar,cvar99:g.cvar,expectedReturn:b.expected_return,volatility:b.volatility,sharpeRatio:b.sharpe_ratio,portfolioBeta:.85,riskContributions:y,maxDrawdown:.124}),a(`Black-Litterman завершён: Sharpe = ${b.sharpe_ratio.toFixed(2)}`,"success")}catch(e){console.error("Black-Litterman Error:",e),a(`Ошибка: ${e instanceof Error?e.message:"Unknown error"}`,"error")}finally{o.value=!1}}}}const k={class:"hero-section"},R={class:"hero-left"},_={class:"hero-meta"},F={class:"glass-pill"},V={class:"glass-pill"},C={class:"glass-pill"},I={class:"glass-pill"},B={class:"hero-actions"},E=["disabled"],U={key:0,width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:1,class:"spinner"},q={class:"dashboard-grid params-grid"},L={class:"col-params"},M={class:"glass-panel"},j={class:"panel-body params-body"},P={class:"param-group"},S={class:"param-input-group"},O={class:"param-group"},z={class:"param-input-group"},D={class:"param-group"},$={class:"param-input-group"},H={class:"param-hint"},T={class:"param-group"},A={class:"param-input-group"},N={class:"param-hint"},J={class:"col-views"},Q={class:"glass-panel views-panel"},G={class:"panel-header"},K={class:"panel-body views-body"},X={class:"view-header"},Y={class:"view-badge"},Z={class:"view-type-toggle"},aa=["onClick"],ea=["onClick"],sa=["onClick"],la={class:"view-body"},ta={class:"view-row"},ia={class:"view-field"},na=["onUpdate:modelValue"],oa=["value"],ra={key:0,class:"view-field"},ca=["onUpdate:modelValue"],da=["value"],ua={class:"view-row"},pa={class:"view-field"},va={class:"param-input-group"},ma=["onUpdate:modelValue"],ba={class:"param-hint"},ha={class:"view-field"},ga={class:"confidence-slider"},ya=["onUpdate:modelValue"],wa={class:"view-description"},xa={key:0,class:"views-empty"},fa={class:"dashboard-grid main-grid"},ka={class:"col-portfolio-wide"},Ra={class:"glass-panel portfolio-composition-panel"},_a={class:"panel-header"},Fa={class:"header-tabs"},Va={class:"panel-body weights-body"},Ca={key:0,class:"weights-comparison"},Ia={class:"weights-table-container"},Ba={class:"weights-table"},Ea={class:"asset-cell"},Ua={class:"asset-info"},Wa={class:"symbol"},qa={class:"name"},La={class:"text-right mono opacity-80"},Ma={class:"text-right mono"},ja={class:"text-right mono font-bold"},Pa={class:"text-right mono"},Sa={key:1,class:"weights-bars-view"},Oa={class:"weight-bar-info"},za={class:"weight-bar-label"},Da={class:"weight-bars-group"},$a={class:"weight-bar-row-dual"},Ha={class:"weight-bar-bg"},Ta={class:"weight-bar-value mono"},Aa={class:"weight-bar-row-dual"},Na={class:"weight-bar-bg"},Ja={class:"weight-bar-value mono font-bold"},Qa={class:"col-returns-right"},Ga={class:"glass-panel"},Ka={class:"panel-body weights-body"},Xa={class:"weights-comparison"},Ya={class:"weights-table-container"},Za={class:"weights-table"},ae={class:"asset-cell"},ee={class:"symbol"},se={class:"text-right mono"},le={class:"text-right mono"},te={key:0,class:"glass-panel views-impact-panel"},ie={class:"panel-body"},ne={class:"impact-grid"},oe={class:"impact-header"},re={class:"view-badge-sm"},ce={class:"impact-assets"},de={class:"impact-metrics"},ue={class:"impact-metric"},pe={class:"impact-metric"},ve={class:"impact-metric"},me={key:1,class:"glass-panel"},be={class:"panel-body"},he={class:"risk-bars"},ge={class:"risk-bar-info"},ye={class:"risk-bar-label"},we={class:"weight-bar-bg"},xe={class:"risk-bar-value mono"},fe={class:"dashboard-grid metrics-grid-row"},ke={class:"col-metric"},Re={class:"glass-panel metrics-card"},_e={class:"panel-body"},Fe={class:"stat-row"},Ve={class:"stat-val text-green"},Ce={class:"stat-row"},Ie={class:"stat-val"},Be={class:"stat-row"},Ee={class:"stat-row"},Ue={class:"stat-val mono"},We={class:"col-metric"},qe={class:"glass-panel metrics-card"},Le={class:"panel-body"},Me={class:"stat-row"},je={class:"stat-val"},Pe={class:"stat-row"},Se={class:"stat-val"},Oe={class:"stat-row"},ze={class:"stat-val"},De={class:"col-metric"},$e={class:"glass-panel metrics-card"},He={class:"panel-body"},Te={class:"stat-row"},Ae={class:"stat-row"},Ne={class:"stat-row"},Je={class:"stat-row"},Qe={class:"stat-val mono"},Ge=x(s({__name:"BlackLittermanOptimization",emits:["toast"],setup(s,{emit:g}){const y=g,w=e("comparison"),{isComputing:x,params:Ge,views:Ke,blResult:Xe,portfolioPositions:Ye,selectedBank:Ze,equilibriumReturns:as,posteriorReturns:es,portfolioStats:ss,equilibriumStats:ls,viewsImpact:ts,riskContributions:is,addView:ns,removeView:os,getOptimalWeight:rs,getEquilibriumWeight:cs,getWeightDelta:ds,getDeltaClass:us,runOptimization:ps}=f(),vs=()=>{ps((a,e)=>{y("toast",{message:a,type:e})})},ms=a=>`${(100*a).toFixed(2)}%`,bs=a=>Ye.value[a]?.symbol??`Asset_${a}`,hs=a=>a>=.7?"conf-high":a>=.4?"conf-mid":"conf-low",gs=a(()=>{const a=is.value.map(Math.abs);return Math.max(...a,.001)}),ys=a(()=>ss.value.expectedReturn-ls.value.expectedReturn),ws=a(()=>ss.value.volatility-ls.value.volatility),xs=a(()=>ss.value.sharpeRatio-ls.value.sharpeRatio);return(a,e)=>(t(),l("div",null,[i("div",k,[i("div",R,[e[12]||(e[12]=i("h1",null,"Black-Litterman Optimization",-1)),i("div",_,[e[11]||(e[11]=i("span",{class:"glass-pill"},[o("Метод: "),i("strong",null,"Байесовская оптимизация")],-1)),i("span",F,[e[7]||(e[7]=o("τ: ",-1)),i("strong",null,r(c(Ge).tau),1)]),i("span",V,[e[8]||(e[8]=o("δ: ",-1)),i("strong",null,r(c(Ge).delta),1)]),i("span",C,[e[9]||(e[9]=o("Банк: ",-1)),i("strong",null,r(c(Ze).name),1)]),i("span",I,[e[10]||(e[10]=o("Активов: ",-1)),i("strong",null,r(c(Ye).length),1)])])]),i("div",B,[i("button",{class:"btn-glass primary",onClick:vs,disabled:c(x)},[c(x)?(t(),l("span",W)):(t(),l("svg",U,[...e[13]||(e[13]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),o(" "+r(c(x)?"Расчёт...":"Запустить оптимизацию"),1)],8,E)])]),i("div",q,[i("div",L,[i("div",M,[e[21]||(e[21]=i("div",{class:"panel-header"},[i("h3",null,"Параметры модели")],-1)),i("div",j,[i("div",P,[e[15]||(e[15]=i("label",null,"Скаляр неопределённости (τ)",-1)),i("div",S,[d(i("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=a=>c(Ge).tau=a),min:"0.001",max:"1",step:"0.01"},null,512),[[u,c(Ge).tau,void 0,{number:!0}]]),e[14]||(e[14]=i("span",{class:"param-hint"},"Типично 0.01–0.10",-1))])]),i("div",O,[e[17]||(e[17]=i("label",null,"Неприятие риска (δ)",-1)),i("div",z,[d(i("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>c(Ge).delta=a),min:"0.1",max:"20",step:"0.1"},null,512),[[u,c(Ge).delta,void 0,{number:!0}]]),e[16]||(e[16]=i("span",{class:"param-hint"},"Типично 2.0–3.5",-1))])]),i("div",D,[e[18]||(e[18]=i("label",null,"Безрисковая ставка (r)",-1)),i("div",$,[d(i("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>c(Ge).riskFreeRate=a),min:"0",max:"0.3",step:"0.005"},null,512),[[u,c(Ge).riskFreeRate,void 0,{number:!0}]]),i("span",H,r((100*c(Ge).riskFreeRate).toFixed(1))+"%",1)])]),i("div",T,[e[19]||(e[19]=i("label",null,"Макс. вес на актив",-1)),i("div",A,[d(i("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=a=>c(Ge).maxWeight=a),min:"0.05",max:"1",step:"0.05"},null,512),[[u,c(Ge).maxWeight,void 0,{number:!0}]]),i("span",N,r((100*c(Ge).maxWeight).toFixed(0))+"%",1)])]),e[20]||(e[20]=i("div",{class:"formula-box"},[i("span",{class:"formula-label"},"Black-Litterman Formula"),i("div",{class:"formula"},"E[R] = [(τΣ)⁻¹ + P'Ω⁻¹P]⁻¹ [(τΣ)⁻¹π + P'Ω⁻¹Q]")],-1))])])]),i("div",J,[i("div",Q,[i("div",G,[e[22]||(e[22]=i("h3",null,"Взгляды инвестора (Views)",-1)),i("button",{class:"btn-add-view",onClick:e[4]||(e[4]=(...a)=>c(ns)&&c(ns)(...a))},"+ Добавить")]),i("div",K,[(t(!0),l(p,null,v(c(Ke),(a,s)=>(t(),l("div",{key:a.id,class:"view-card"},[i("div",X,[i("span",Y,"V"+r(s+1),1),i("div",Z,[i("button",{class:m(["type-btn",{active:"absolute"===a.type}]),onClick:e=>a.type="absolute"},"Абсолютный",10,aa),i("button",{class:m(["type-btn",{active:"relative"===a.type}]),onClick:e=>a.type="relative"},"Относительный",10,ea)]),i("button",{class:"btn-remove-view",onClick:e=>c(os)(a.id)},"×",8,sa)]),i("div",la,[i("div",ta,[i("div",ia,[i("label",null,r("absolute"===a.type?"Актив":"Актив 1 (long)"),1),d(i("select",{"onUpdate:modelValue":e=>a.asset1Index=e},[(t(!0),l(p,null,v(c(Ye),(a,e)=>(t(),l("option",{key:a.symbol,value:e},r(a.symbol),9,oa))),128))],8,na),[[b,a.asset1Index,void 0,{number:!0}]])]),"relative"===a.type?(t(),l("div",ra,[e[23]||(e[23]=i("label",null,"Актив 2 (short)",-1)),d(i("select",{"onUpdate:modelValue":e=>a.asset2Index=e},[(t(!0),l(p,null,v(c(Ye),(a,e)=>(t(),l("option",{key:a.symbol,value:e},r(a.symbol),9,da))),128))],8,ca),[[b,a.asset2Index,void 0,{number:!0}]])])):n("",!0)]),i("div",ua,[i("div",pa,[e[24]||(e[24]=i("label",null,"Ожидаемая доходность",-1)),i("div",va,[d(i("input",{type:"number","onUpdate:modelValue":e=>a.expectedReturn=e,step:"0.01"},null,8,ma),[[u,a.expectedReturn,void 0,{number:!0}]]),i("span",ba,r((100*a.expectedReturn).toFixed(1))+"%",1)])]),i("div",ha,[e[25]||(e[25]=i("label",null,"Уверенность",-1)),i("div",ga,[d(i("input",{type:"range","onUpdate:modelValue":e=>a.confidence=e,min:"0.01",max:"1",step:"0.01"},null,8,ya),[[u,a.confidence,void 0,{number:!0}]]),i("span",{class:m(["confidence-val",hs(a.confidence)])},r((100*a.confidence).toFixed(0))+"% ",3)])])]),i("div",wa,["absolute"===a.type?(t(),l(p,{key:0},[o(r(bs(a.asset1Index))+" вернёт ",1),i("strong",{class:m(a.expectedReturn>=0?"text-green":"text-red")},r((100*a.expectedReturn).toFixed(1))+"% ",3)],64)):(t(),l(p,{key:1},[o(r(bs(a.asset1Index))+" обгонит "+r(bs(a.asset2Index))+" на ",1),i("strong",{class:m(a.expectedReturn>=0?"text-green":"text-red")},r((100*a.expectedReturn).toFixed(1))+"% ",3)],64))])])]))),128)),0===c(Ke).length?(t(),l("div",xa," Нет взглядов. Нажмите «+ Добавить» чтобы задать прогнозы. ")):n("",!0)])])])]),i("div",fa,[i("div",ka,[i("div",Ra,[i("div",_a,[e[26]||(e[26]=i("h3",null,"Сравнение весов",-1)),i("div",Fa,[i("button",{class:m(["tab-btn",{active:"comparison"===w.value}]),onClick:e[5]||(e[5]=a=>w.value="comparison")}," Сравнение ",2),i("button",{class:m(["tab-btn",{active:"bars"===w.value}]),onClick:e[6]||(e[6]=a=>w.value="bars")}," Визуализация ",2)])]),i("div",Va,["comparison"===w.value?(t(),l("div",Ca,[i("div",Ia,[i("table",Ba,[e[27]||(e[27]=i("thead",null,[i("tr",null,[i("th",null,"Инструмент"),i("th",{class:"text-right"},"Рыночный вес"),i("th",{class:"text-right"},"Равновесный"),i("th",{class:"text-right"},"BL оптимальный"),i("th",{class:"text-right"},"Изменение")])],-1)),i("tbody",null,[(t(!0),l(p,null,v(c(Ye),a=>(t(),l("tr",{key:a.symbol},[i("td",null,[i("div",Ea,[i("div",{class:"asset-icon",style:h({background:a.color})},r(a.symbol[0]),5),i("div",Ua,[i("span",Wa,r(a.symbol),1),i("span",qa,r(a.name),1)])])]),i("td",La,r(a.allocation.toFixed(1))+"%",1),i("td",Ma,r(c(cs)(a.symbol).toFixed(1))+"%",1),i("td",ja,r(c(rs)(a.symbol).toFixed(1))+"%",1),i("td",Pa,[i("span",{class:m(["change-pill",c(us)(c(ds)(a.symbol))])},r(c(ds)(a.symbol)>0?"+":"")+r(c(ds)(a.symbol).toFixed(1))+"% ",3)])]))),128))])])])])):n("",!0),"bars"===w.value?(t(),l("div",Sa,[(t(!0),l(p,null,v(c(Ye),a=>(t(),l("div",{key:a.symbol,class:"weight-bar-container"},[i("div",Oa,[i("div",{class:"asset-icon-small",style:h({background:a.color})},r(a.symbol[0]),5),i("div",za,r(a.symbol),1)]),i("div",Da,[i("div",$a,[e[28]||(e[28]=i("span",{class:"bar-label-sm"},"Рынок",-1)),i("div",Ha,[i("div",{class:"weight-bar-fill eq",style:h({width:a.allocation+"%"})},null,4)]),i("span",Ta,r(a.allocation.toFixed(1))+"%",1)]),i("div",Aa,[e[29]||(e[29]=i("span",{class:"bar-label-sm"},"BL",-1)),i("div",Na,[i("div",{class:"weight-bar-fill bl",style:h({width:c(rs)(a.symbol)+"%",background:a.color})},null,4)]),i("span",Ja,r(c(rs)(a.symbol).toFixed(1))+"%",1)])])]))),128))])):n("",!0)])])]),i("div",Qa,[i("div",Ga,[e[31]||(e[31]=i("div",{class:"panel-header"},[i("h3",null,"Доходности: Равновесные vs Апостериорные")],-1)),i("div",Ka,[i("div",Xa,[i("div",Ya,[i("table",Za,[e[30]||(e[30]=i("thead",null,[i("tr",null,[i("th",null,"Актив"),i("th",{class:"text-right"},"π (равнов.)"),i("th",{class:"text-right"},"E[R] (BL)"),i("th",{class:"text-right"},"Δ")])],-1)),i("tbody",null,[(t(!0),l(p,null,v(c(Ye),(a,e)=>(t(),l("tr",{key:a.symbol},[i("td",null,[i("div",ae,[i("div",{class:"asset-icon",style:h({background:a.color})},r(a.symbol[0]),5),i("span",ee,r(a.symbol),1)])]),i("td",se,r(ms(c(as)[e])),1),i("td",{class:m(["text-right mono font-bold",c(es)[e]>=0?"text-green":"text-red"])},r(ms(c(es)[e])),3),i("td",le,[i("span",{class:m(["change-pill",c(es)[e]-c(as)[e]>=0?"positive":"negative"])},r(c(es)[e]-c(as)[e]>=0?"+":"")+r(ms(c(es)[e]-c(as)[e])),3)])]))),128))])])])])])])])]),c(ts).length>0?(t(),l("div",te,[e[35]||(e[35]=i("div",{class:"panel-header"},[i("h3",null,"Влияние взглядов на портфель")],-1)),i("div",ie,[i("div",ne,[(t(!0),l(p,null,v(c(ts),(a,s)=>(t(),l("div",{key:s,class:"impact-card"},[i("div",oe,[i("span",re,"V"+r(s+1),1),i("span",ce,r(a.affected_assets.join(", ")),1)]),i("div",de,[i("div",ue,[e[32]||(e[32]=i("span",{class:"metric-label"},"Ожидаемая доходность",-1)),i("span",{class:m(["metric-value",a.view_return>=0?"text-green":"text-red"])},r(ms(a.view_return)),3)]),i("div",pe,[e[33]||(e[33]=i("span",{class:"metric-label"},"Уверенность",-1)),i("span",{class:m(["metric-value",hs(a.confidence)])},r((100*a.confidence).toFixed(0))+"% ",3)]),i("div",ve,[e[34]||(e[34]=i("span",{class:"metric-label"},"Сдвиг веса",-1)),i("span",{class:m(["metric-value",a.weight_shift>=0?"text-green":"text-red"])},r(a.weight_shift>=0?"+":"")+r((100*a.weight_shift).toFixed(2))+"% ",3)])])]))),128))])])])):n("",!0),c(Xe)?(t(),l("div",me,[e[36]||(e[36]=i("div",{class:"panel-header"},[i("h3",null,"Вклад в риск портфеля")],-1)),i("div",be,[i("div",he,[(t(!0),l(p,null,v(c(Ye),(a,e)=>(t(),l("div",{key:a.symbol,class:"risk-bar-row"},[i("div",ge,[i("div",{class:"asset-icon-small",style:h({background:a.color})},r(a.symbol[0]),5),i("span",ye,r(a.symbol),1)]),i("div",we,[i("div",{class:"weight-bar-fill",style:h({width:Math.min(Math.abs(c(is)[e])/gs.value*100,100)+"%",background:a.color})},null,4)]),i("span",xe,r(ms(c(is)[e])),1)]))),128))])])])):n("",!0),i("div",fe,[i("div",ke,[i("div",Re,[e[41]||(e[41]=i("div",{class:"panel-header"},[i("h3",null,"BL Портфель (с Views)")],-1)),i("div",_e,[i("div",Fe,[e[37]||(e[37]=i("span",{class:"stat-label"},"Expected Return",-1)),i("span",Ve,r(ms(c(ss).expectedReturn)),1)]),i("div",Ce,[e[38]||(e[38]=i("span",{class:"stat-label"},"Volatility",-1)),i("span",Ie,r(ms(c(ss).volatility)),1)]),i("div",Be,[e[39]||(e[39]=i("span",{class:"stat-label"},"Sharpe Ratio",-1)),i("span",{class:m(["stat-val",c(ss).sharpeRatio>=0?"text-green":"text-red"])},r(c(ss).sharpeRatio.toFixed(3)),3)]),i("div",Ee,[e[40]||(e[40]=i("span",{class:"stat-label"},"Позиций",-1)),i("span",Ue,r(c(ss).numPositions),1)])])])]),i("div",We,[i("div",qe,[e[45]||(e[45]=i("div",{class:"panel-header"},[i("h3",null,"Равновесный (без Views)")],-1)),i("div",Le,[i("div",Me,[e[42]||(e[42]=i("span",{class:"stat-label"},"Expected Return",-1)),i("span",je,r(ms(c(ls).expectedReturn)),1)]),i("div",Pe,[e[43]||(e[43]=i("span",{class:"stat-label"},"Volatility",-1)),i("span",Se,r(ms(c(ls).volatility)),1)]),i("div",Oe,[e[44]||(e[44]=i("span",{class:"stat-label"},"Sharpe Ratio",-1)),i("span",ze,r(c(ls).sharpeRatio.toFixed(3)),1)])])])]),i("div",De,[i("div",$e,[e[50]||(e[50]=i("div",{class:"panel-header"},[i("h3",null,"Прирост от Views")],-1)),i("div",He,[i("div",Te,[e[46]||(e[46]=i("span",{class:"stat-label"},"Δ Return",-1)),i("span",{class:m(["stat-val",ys.value>=0?"text-green":"text-red"])},r(ys.value>=0?"+":"")+r(ms(ys.value)),3)]),i("div",Ae,[e[47]||(e[47]=i("span",{class:"stat-label"},"Δ Volatility",-1)),i("span",{class:m(["stat-val",ws.value<=0?"text-green":"text-red"])},r(ws.value>=0?"+":"")+r(ms(ws.value)),3)]),i("div",Ne,[e[48]||(e[48]=i("span",{class:"stat-label"},"Δ Sharpe",-1)),i("span",{class:m(["stat-val",xs.value>=0?"text-green":"text-red"])},r(xs.value>=0?"+":"")+r(xs.value.toFixed(3)),3)]),i("div",Je,[e[49]||(e[49]=i("span",{class:"stat-label"},"Взглядов",-1)),i("span",Qe,r(c(Ke).length),1)])])])])])]))}}),[["__scopeId","data-v-470cdbe3"]]);export{Ge as default};
