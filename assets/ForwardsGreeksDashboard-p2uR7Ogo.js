import{d as a,r as e,v as l,o as s,R as t,c as r,e as o,j as i,f as n,P as c,t as d,x as v,L as u,C as g,n as p,F as h,i as b,k as m,q as y}from"./vendor-DLyKmMu8.js";import{C as k}from"./auto-DlDBEVoY.js";import{u as f}from"./forwardRegistry-BpeNEchR.js";import{_ as x}from"./index-AoYxWDki.js";const F={class:"greeks-dashboard-page"},P={class:"page-header"},C={class:"header-left"},L={class:"page-subtitle"},w={key:0,style:{"margin-left":"12px",color:"rgba(255,255,255,0.6)"}},R={key:0},V={class:"header-right"},S={class:"control-group"},M={class:"control-group"},D=["disabled"],_={key:0},z={key:1},G={class:"greeks-summary"},W={class:"greek-card delta-card"},T={class:"greek-value positive"},A={class:"greek-details"},O={class:"detail"},j={class:"value"},K={class:"detail"},Y={class:"greek-card vega-card"},q={class:"greek-value blue"},B={class:"greek-details"},E={class:"detail"},U={class:"value"},I={class:"detail"},N={class:"greek-card theta-card"},$={class:"greek-details"},H={class:"detail"},J={class:"value"},Q={class:"detail"},X={class:"value"},Z={class:"greek-card rho-card"},aa={class:"greek-value cyan"},ea={class:"greek-details"},la={class:"detail"},sa={class:"value"},ta={class:"detail"},ra={class:"grid-2"},oa={class:"card"},ia={class:"chart-container"},na={class:"card"},ca={class:"chart-container"},da={class:"grid-2"},va={class:"card"},ua={class:"chart-container"},ga={class:"card"},pa={class:"chart-container"},ha={class:"grid-2"},ba={class:"card"},ma={class:"chart-container"},ya={class:"card"},ka={class:"chart-container"},fa={class:"card full-width"},xa={class:"greeks-table-container"},Fa={class:"greeks-table"},Pa={class:"value mono positive"},Ca={class:"impact mono"},La={class:"value mono blue"},wa={class:"impact mono"},Ra={class:"impact mono"},Va={class:"value mono cyan"},Sa={class:"impact mono"},Ma={class:"impact mono"},Da={class:"impact mono"},_a={class:"impact mono"},za={class:"impact mono"},Ga={class:"impact mono"},Wa={class:"card full-width"},Ta={class:"heatmap-container"},Aa={class:"grid-2"},Oa={class:"card"},ja={class:"chart-container"},Ka={class:"card"},Ya={class:"greeks-pnl-summary"},qa={class:"pnl-item"},Ba={class:"pnl-item"},Ea={class:"pnl-item"},Ua={class:"pnl-item"},Ia={class:"pnl-item"},Na={class:"pnl-item total"},$a={class:"factor-value accent"},Ha={class:"card full-width"},Ja={class:"risk-limits-table-container"},Qa={class:"risk-limits-table"},Xa={class:"greeks-name"},Za={class:"current mono"},ae={class:"limit mono"},ee={class:"utilization"},le={class:"util-bar"},se={class:"util-text"},te={class:"action"},re={key:0,class:"btn-action warning"},oe={key:1,class:"btn-action critical"},ie={key:2,class:"btn-action ok"},ne={class:"card full-width"},ce={class:"chart-container tall"},de=x(a({__name:"ForwardsGreeksDashboard",setup(a){const x=f(),de=e("long-bond"),ve=e("summary"),ue=e(!1),ge=e({spotPrice:100,strikePrice:100,timeToMaturity:.25,volatility:12.5,riskFreeRate:4.25,dividendYield:2.5,contractSize:1e6}),pe=l(()=>{let a=0,e=0,l=0,s=0,t=0;return x.registryForwards.forEach((r,o)=>{const i=x.getResultByIndex(o);if(i){const o=r.contractSize||1e6;if(a+=(i.delta||0)*o,e+=(i.rho||0)*o,t+=(i.forwardValue||0)*o,"bond"===r.forwardType&&i.dv01){const a=r.faceValue||100;l+=i.dv01*o*a/100,s+=(i.convexity||0)*o}}}),{delta:a,rho:e,dv01:l,convexity:s,totalValue:t}}),he=l(()=>{if(x.registryForwards.length>0&&x.calculatedForwards.length>0){const a=pe.value,e=x.registryForwards.reduce((a,e)=>a+(e.contractSize||1e6),0);return{delta:e>0?a.delta/e:0,rho:e>0?a.rho/e:0,gamma:0,vega:0,theta:0,volga:0,vanna:0,charm:0,rogas:0}}const a=ge.value.spotPrice,e=ge.value.strikePrice,l=ge.value.timeToMaturity,s=ge.value.riskFreeRate/100,t=ge.value.dividendYield/100,r=ge.value.volatility/100,o=Math.exp((s-t)*l),i=Math.exp((s-t)*l)/(a*r*Math.sqrt(l)),n=a*Math.exp((s-t)*l)*Math.sqrt(l)/100,c=-a*r*Math.exp((s-t)*l)/(2*Math.sqrt(l))/365,d=e*l*Math.exp(-s*l)/100;return{delta:o,gamma:i,vega:n,theta:c,rho:d,volga:n*(Math.log(a/e)/(r*r*l)-1)/r,vanna:-Math.exp((s-t)*l)*Math.log(a/e)/(r*r*l),charm:(s-t)*o-i*a*r,rogas:d*l/100}}),be=l(()=>{const a=he.value,e=ge.value.contractSize,l=a.delta*ge.value.spotPrice*.01*e,s=a.vega*e,t=a.rho*e,r=a.theta*e,o=.02*a.delta*ge.value.spotPrice*e,i=.5*a.gamma*Math.pow(.02*ge.value.spotPrice,2)*e,n=.02*a.vega*e,c=a.theta*(1/365)*e,d=.01*a.rho*e;return{deltaP1pct:l,vegaP1pct:s,rhoP1pct:t,thetaPerDay:r,deltaPnL:o,gammaPnL:i,vegaPnL:n,thetaPnL:c,rhoPnL:d,totalPnL:o+i+n+c+d}}),me=l(()=>{const a=pe.value,e=x.registryForwards.reduce((a,e)=>a+(e.contractSize||1e6),0),l=e>0?Math.abs(a.delta/e):0,s=e>0?Math.abs(a.rho/e):0,t=a.dv01/1e6;return[{greeks:"Delta",current:l,limit:2,utilization:l/2,status:l/2>.8?"Warning":"OK"},{greeks:"Rho",current:s,limit:200,utilization:s/200,status:s/200>.8?"Warning":"OK"},{greeks:"DV01",current:t,limit:10,utilization:t/10,status:t/10>.8?"Warning":"OK"},{greeks:"Convexity",current:a.convexity/1e6,limit:5,utilization:a.convexity/1e6/5,status:a.convexity/1e6/5>.8?"Warning":"OK"},{greeks:"Total Value",current:a.totalValue/1e6,limit:100,utilization:Math.abs(a.totalValue/1e6)/100,status:Math.abs(a.totalValue/1e6)/100>.8?"Warning":"OK"}]}),ye=e(null),ke=e(null),fe=e(null),xe=e(null),Fe=e(null),Pe=e(null),Ce=e(null),Le=e(null),we=e(null);let Re={};const Ve=a=>Math.abs(a)>=1e6?(a/1e6).toFixed(1)+"М":"$"+(a/1e3).toFixed(0)+"K",Se=()=>{Me()},Me=()=>{if(Object.values(Re).forEach(a=>{a&&a.destroy()}),Re={},ge.value.spotPrice,ge.value.volatility,ye.value?.getContext("2d")){const a=[],e=[];for(let l=.7;l<=1.3;l+=.05)a.push((100*l).toFixed(0)),e.push(he.value.delta);Re.delta=new k(ye.value.getContext("2d"),{type:"line",data:{labels:a,datasets:[{label:"Delta (∂F/∂S)",data:e,borderColor:"#4ade80",backgroundColor:"rgba(74, 222, 128, 0.08)",fill:!0,tension:.4,pointRadius:3,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})}if(ke.value?.getContext("2d")){const a=[],e=[];for(let l=.7;l<=1.3;l+=.05)a.push((100*l).toFixed(0)),e.push(he.value.gamma);Re.gamma=new k(ke.value.getContext("2d"),{type:"line",data:{labels:a,datasets:[{label:"Gamma (∂²F/∂S²)",data:e,borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.08)",fill:!0,tension:.4,pointRadius:3,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})}if(fe.value?.getContext("2d")){const a=[],e=[];for(let l=5;l<=25;l+=2)a.push(l.toString()),e.push(he.value.vega);Re.vega=new k(fe.value.getContext("2d"),{type:"line",data:{labels:a,datasets:[{label:"Vega (∂F/∂σ)",data:e,borderColor:"#60a5fa",backgroundColor:"rgba(96, 165, 250, 0.08)",fill:!0,tension:.4,pointRadius:3,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})}if(xe.value?.getContext("2d")&&(Re.vegaDecomp=new k(xe.value.getContext("2d"),{type:"bar",data:{labels:["1M","3M","6M","1Y","2Y","5Y","10Y"],datasets:[{label:"Vega by Tenor",data:[120,180,240,290,350,280,150],backgroundColor:["#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af","#1e3a8a","#172554"],borderColor:"#0f172a",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})),Fe.value?.getContext("2d")){const a=[],e=[];for(let l=90;l>=1;l-=10)a.push(l.toString()),e.push(-l/10*2);Re.theta=new k(Fe.value.getContext("2d"),{type:"line",data:{labels:a,datasets:[{label:"Theta (∂F/∂t)",data:e,borderColor:"#f87171",backgroundColor:"rgba(248, 113, 113, 0.08)",fill:!0,tension:.4,pointRadius:3,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})}if(Pe.value?.getContext("2d")&&(Re.crossGamma=new k(Pe.value.getContext("2d"),{type:"bubble",data:{datasets:[{label:"Vanna (∂²F/∂S∂σ)",data:[{x:95,y:8,r:10},{x:98,y:12,r:15},{x:100,y:15,r:20},{x:102,y:12,r:15},{x:105,y:8,r:10}],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"#60a5fa"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})),Le.value?.getContext("2d")){const a=be.value;Re.pnlAttr=new k(Le.value.getContext("2d"),{type:"bar",data:{labels:["Delta","Gamma","Vega","Theta","Rho"],datasets:[{label:"P&L Contribution",data:[a.deltaPnL,a.gammaPnL,a.vegaPnL,a.thetaPnL,a.rhoPnL],backgroundColor:[a.deltaPnL>=0?"rgba(74, 222, 128, 0.6)":"rgba(248, 113, 113, 0.6)",a.gammaPnL>=0?"rgba(74, 222, 128, 0.6)":"rgba(248, 113, 113, 0.6)",a.vegaPnL>=0?"rgba(74, 222, 128, 0.6)":"rgba(248, 113, 113, 0.6)",a.thetaPnL>=0?"rgba(74, 222, 128, 0.6)":"rgba(248, 113, 113, 0.6)",a.rhoPnL>=0?"rgba(74, 222, 128, 0.6)":"rgba(248, 113, 113, 0.6)"],borderColor:["#4ade80","#4ade80","#4ade80","#4ade80","#4ade80"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}})}we.value?.getContext("2d")&&(Re.scenarios=new k(we.value.getContext("2d"),{type:"line",data:{labels:["-2% Spot","-1.5% Spot","-1% Spot","Base","+1% Spot","+1.5% Spot","+2% Spot"],datasets:[{label:"No Vol Change",data:[-25e3,-18e3,-12e3,0,12e3,18e3,25e3],borderColor:"#60a5fa",tension:.4},{label:"Vol +5%",data:[-2e4,-13e3,-7e3,5e3,17e3,23e3,3e4],borderColor:"#4ade80",tension:.4},{label:"Vol -5%",data:[-3e4,-23e3,-17e3,-5e3,7e3,13e3,2e4],borderColor:"#f87171",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.6)"}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(255,255,255,0.3)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,0.3)"}}}}}))};return s(()=>{Me()}),t(()=>{Object.values(Re).forEach(a=>{a&&a.destroy()})}),(a,e)=>(y(),r("div",F,[o("div",P,[o("div",C,[e[3]||(e[3]=o("h1",{class:"page-title"},"Панель греков",-1)),o("p",L,[e[2]||(e[2]=i(" Анализ чувствительности форвардных позиций ",-1)),c(x).registryForwards.length>0?(y(),r("span",w,[i(" • Портфель: "+d(c(x).registryForwards.length)+" форвардов ",1),c(x).calculatedForwards.length>0?(y(),r("span",R," ("+d(c(x).calculatedForwards.length)+" рассчитано) ",1)):n("",!0)])):n("",!0)])]),o("div",V,[o("div",S,[e[5]||(e[5]=o("label",{class:"control-label"},"Позиция:",-1)),v(o("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>de.value=a),class:"position-select",onChange:Se},[...e[4]||(e[4]=[g('<option value="long-bond" data-v-68bf797b>Long форвард на облигацию</option><option value="short-bond" data-v-68bf797b>Short форвард на облигацию</option><option value="long-fx" data-v-68bf797b>Long валютный форвард</option><option value="short-fx" data-v-68bf797b>Short валютный форвард</option><option value="long-commodity" data-v-68bf797b>Long форвард на товар</option>',5)])],544),[[u,de.value]])]),o("div",M,[e[7]||(e[7]=o("label",{class:"control-label"},"Вид:",-1)),v(o("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>ve.value=a),class:"view-select",onChange:Se},[...e[6]||(e[6]=[o("option",{value:"summary"},"Резюме",-1),o("option",{value:"detailed"},"Детальные греки",-1),o("option",{value:"sensitivity"},"Графики чувствительности",-1)])],544),[[u,ve.value]])]),o("button",{onClick:Se,class:"btn-primary",disabled:ue.value},[ue.value?(y(),r("span",z,"↺ Считаю...")):(y(),r("span",_,"Обновить"))],8,D)])]),o("div",G,[o("div",W,[e[10]||(e[10]=o("div",{class:"greek-header"},[o("span",{class:"greek-symbol"},"Δ (Delta)"),o("span",{class:"greek-name"},"Чувствительность к спот цене")],-1)),o("div",T,d(he.value.delta.toFixed(4)),1),o("div",A,[o("div",O,[e[8]||(e[8]=o("span",{class:"label"},"P&L / 1% спота",-1)),o("span",j,d(Ve(be.value.deltaP1pct)),1)]),o("div",K,[e[9]||(e[9]=o("span",{class:"label"},"Gamma (рост дельты)",-1)),o("span",{class:p(["value",he.value.gamma>=0?"positive":"negative"])},d(he.value.gamma>=0?"+":"")+d(he.value.gamma.toFixed(6)),3)])])]),o("div",Y,[e[13]||(e[13]=o("div",{class:"greek-header"},[o("span",{class:"greek-symbol"},"ν (Vega)"),o("span",{class:"greek-name"},"Чувствительность к волатильности")],-1)),o("div",q,d(he.value.vega.toFixed(4)),1),o("div",B,[o("div",E,[e[11]||(e[11]=o("span",{class:"label"},"P&L / 1% vol",-1)),o("span",U,d(Ve(be.value.vegaP1pct)),1)]),o("div",I,[e[12]||(e[12]=o("span",{class:"label"},"Volga (кривизна)",-1)),o("span",{class:p(["value",he.value.volga>=0?"positive":"negative"])},d(he.value.volga>=0?"+":"")+d(he.value.volga.toFixed(6)),3)])])]),o("div",N,[e[16]||(e[16]=o("div",{class:"greek-header"},[o("span",{class:"greek-symbol"},"Θ (Theta)"),o("span",{class:"greek-name"},"Временное затухание (P&L от времени)")],-1)),o("div",{class:p(["greek-value",he.value.theta>=0?"positive":"negative"])},d(he.value.theta>=0?"+":"")+d(he.value.theta.toFixed(4)),3),o("div",$,[o("div",H,[e[14]||(e[14]=o("span",{class:"label"},"P&L / день",-1)),o("span",J,d(Ve(be.value.thetaPerDay)),1)]),o("div",Q,[e[15]||(e[15]=o("span",{class:"label"},"Годовая",-1)),o("span",X,d((252*he.value.theta).toFixed(2))+"/год",1)])])]),o("div",Z,[e[19]||(e[19]=o("div",{class:"greek-header"},[o("span",{class:"greek-symbol"},"ρ (Rho)"),o("span",{class:"greek-name"},"Чувствительность к ставкам")],-1)),o("div",aa,d(he.value.rho.toFixed(4)),1),o("div",ea,[o("div",la,[e[17]||(e[17]=o("span",{class:"label"},"P&L / 1% ставки",-1)),o("span",sa,d(Ve(be.value.rhoP1pct)),1)]),o("div",ta,[e[18]||(e[18]=o("span",{class:"label"},"Rogas (кривизна)",-1)),o("span",{class:p(["value",he.value.rogas>=0?"positive":"negative"])},d(he.value.rogas>=0?"+":"")+d(he.value.rogas.toFixed(6)),3)])])])]),o("div",ra,[o("div",oa,[e[20]||(e[20]=o("div",{class:"chart-header"},[o("h3",null,"Delta: Чувствительность к спот цене"),o("span",{class:"chart-subtitle"},"∂F/∂S — как меняется стоимость форварда")],-1)),o("div",ia,[o("canvas",{ref_key:"deltaChartRef",ref:ye},null,512)])]),o("div",na,[e[21]||(e[21]=o("div",{class:"chart-header"},[o("h3",null,"Gamma: Выпуклость Delta"),o("span",{class:"chart-subtitle"},"∂²F/∂S² — как меняется дельта")],-1)),o("div",ca,[o("canvas",{ref_key:"gammaChartRef",ref:ke},null,512)])])]),o("div",da,[o("div",va,[e[22]||(e[22]=o("div",{class:"chart-header"},[o("h3",null,"Vega: Чувствительность к волатильности"),o("span",{class:"chart-subtitle"},"∂F/∂σ — как меняется стоимость с волатильностью")],-1)),o("div",ua,[o("canvas",{ref_key:"vegaChartRef",ref:fe},null,512)])]),o("div",ga,[e[23]||(e[23]=o("div",{class:"chart-header"},[o("h3",null,"Разложение Vega по срокам"),o("span",{class:"chart-subtitle"},"Вклад каждого срока в итоговый vega")],-1)),o("div",pa,[o("canvas",{ref_key:"vegaDecompRef",ref:xe},null,512)])])]),o("div",ha,[o("div",ba,[e[24]||(e[24]=o("div",{class:"chart-header"},[o("h3",null,"Theta: Временное затухание"),o("span",{class:"chart-subtitle"},"∂F/∂t — P&L от изменения времени")],-1)),o("div",ma,[o("canvas",{ref_key:"thetaChartRef",ref:Fe},null,512)])]),o("div",ya,[e[25]||(e[25]=o("div",{class:"chart-header"},[o("h3",null,"Cross Gamma: Спот × Vol"),o("span",{class:"chart-subtitle"},"∂²F/∂S∂σ — взаимодействие факторов")],-1)),o("div",ka,[o("canvas",{ref_key:"crossGammaChartRef",ref:Pe},null,512)])])]),o("div",fa,[e[65]||(e[65]=o("div",{class:"card-header"},[o("h3",null,"Детальная таблица греков"),o("span",{class:"card-subtitle"},"Первые, вторые и смешанные производные")],-1)),o("div",xa,[o("table",Fa,[e[64]||(e[64]=o("thead",null,[o("tr",null,[o("th",{class:"col-name"},"Greeks"),o("th",{class:"col-symbol"},"Символ"),o("th",{class:"col-value"},"Значение"),o("th",{class:"col-meaning"},"Интерпретация"),o("th",{class:"col-impact"},"Влияние @ 1%"),o("th",{class:"col-order"},"Порядок")])],-1)),o("tbody",null,[e[62]||(e[62]=o("tr",{class:"section-header"},[o("td",{colspan:"6"},"ГРЕКИ ПЕРВОГО ПОРЯДКА")],-1)),o("tr",null,[e[26]||(e[26]=o("td",{class:"greek-name"},"Delta",-1)),e[27]||(e[27]=o("td",{class:"symbol"},"Δ = ∂F/∂S",-1)),o("td",Pa,d(he.value.delta.toFixed(4)),1),e[28]||(e[28]=o("td",{class:"meaning"},"Forward при изменении спота",-1)),o("td",Ca,d(Ve(be.value.deltaP1pct)),1),e[29]||(e[29]=o("td",{class:"order"},"1st",-1))]),o("tr",null,[e[30]||(e[30]=o("td",{class:"greek-name"},"Vega",-1)),e[31]||(e[31]=o("td",{class:"symbol"},"ν = ∂F/∂σ",-1)),o("td",La,d(he.value.vega.toFixed(4)),1),e[32]||(e[32]=o("td",{class:"meaning"},"Forward при изменении волатильности",-1)),o("td",wa,d(Ve(be.value.vegaP1pct)),1),e[33]||(e[33]=o("td",{class:"order"},"1st",-1))]),o("tr",null,[e[34]||(e[34]=o("td",{class:"greek-name"},"Theta",-1)),e[35]||(e[35]=o("td",{class:"symbol"},"Θ = ∂F/∂t",-1)),o("td",{class:p(["value mono",he.value.theta>=0?"positive":"negative"])},d(he.value.theta>=0?"+":"")+d(he.value.theta.toFixed(4)),3),e[36]||(e[36]=o("td",{class:"meaning"},"Forward при изменении времени",-1)),o("td",Ra,d(Ve(be.value.thetaPerDay))+"/day",1),e[37]||(e[37]=o("td",{class:"order"},"1st",-1))]),o("tr",null,[e[38]||(e[38]=o("td",{class:"greek-name"},"Rho",-1)),e[39]||(e[39]=o("td",{class:"symbol"},"ρ = ∂F/∂r",-1)),o("td",Va,d(he.value.rho.toFixed(4)),1),e[40]||(e[40]=o("td",{class:"meaning"},"Forward при изменении ставки",-1)),o("td",Sa,d(Ve(be.value.rhoP1pct)),1),e[41]||(e[41]=o("td",{class:"order"},"1st",-1))]),e[63]||(e[63]=o("tr",{class:"section-header"},[o("td",{colspan:"6"},"ГРЕКИ ВТОРОГО ПОРЯДКА")],-1)),o("tr",null,[e[42]||(e[42]=o("td",{class:"greek-name"},"Gamma",-1)),e[43]||(e[43]=o("td",{class:"symbol"},"Γ = ∂²F/∂S²",-1)),o("td",{class:p(["value mono",he.value.gamma>=0?"positive":"negative"])},d(he.value.gamma>=0?"+":"")+d(he.value.gamma.toFixed(6)),3),e[44]||(e[44]=o("td",{class:"meaning"},"Как меняется дельта при изменении спота",-1)),o("td",Ma,d(he.value.gamma.toFixed(6)),1),e[45]||(e[45]=o("td",{class:"order"},"2nd",-1))]),o("tr",null,[e[46]||(e[46]=o("td",{class:"greek-name"},"Volga",-1)),e[47]||(e[47]=o("td",{class:"symbol"},"ϝ = ∂²F/∂σ²",-1)),o("td",{class:p(["value mono",he.value.volga>=0?"positive":"negative"])},d(he.value.volga>=0?"+":"")+d(he.value.volga.toFixed(6)),3),e[48]||(e[48]=o("td",{class:"meaning"},"Как меняется vega при изменении волатильности",-1)),o("td",Da,d(he.value.volga.toFixed(6)),1),e[49]||(e[49]=o("td",{class:"order"},"2nd",-1))]),o("tr",null,[e[50]||(e[50]=o("td",{class:"greek-name"},"Vanna",-1)),e[51]||(e[51]=o("td",{class:"symbol"},"χ = ∂²F/∂S∂σ",-1)),o("td",{class:p(["value mono",he.value.vanna>=0?"positive":"negative"])},d(he.value.vanna>=0?"+":"")+d(he.value.vanna.toFixed(6)),3),e[52]||(e[52]=o("td",{class:"meaning"},"Взаимодействие спота и волатильности",-1)),o("td",_a,d(he.value.vanna.toFixed(6)),1),e[53]||(e[53]=o("td",{class:"order"},"2nd",-1))]),o("tr",null,[e[54]||(e[54]=o("td",{class:"greek-name"},"Charm",-1)),e[55]||(e[55]=o("td",{class:"symbol"},"χ = ∂²F/∂t∂S",-1)),o("td",{class:p(["value mono",he.value.charm>=0?"positive":"negative"])},d(he.value.charm>=0?"+":"")+d(he.value.charm.toFixed(6)),3),e[56]||(e[56]=o("td",{class:"meaning"},"Как меняется дельта при изменении времени",-1)),o("td",za,d(he.value.charm.toFixed(6)),1),e[57]||(e[57]=o("td",{class:"order"},"2nd",-1))]),o("tr",null,[e[58]||(e[58]=o("td",{class:"greek-name"},"Rogas",-1)),e[59]||(e[59]=o("td",{class:"symbol"},"ρρ = ∂²F/∂r²",-1)),o("td",{class:p(["value mono",he.value.rogas>=0?"positive":"negative"])},d(he.value.rogas>=0?"+":"")+d(he.value.rogas.toFixed(6)),3),e[60]||(e[60]=o("td",{class:"meaning"},"Как меняется rho при изменении ставки",-1)),o("td",Ga,d(he.value.rogas.toFixed(6)),1),e[61]||(e[61]=o("td",{class:"order"},"2nd",-1))])])])])]),o("div",Wa,[e[66]||(e[66]=o("div",{class:"card-header"},[o("h3",null,"Тепловая карта риска греков"),o("span",{class:"card-subtitle"},"Тепловая карта по движениям рынка")],-1)),o("div",Ta,[o("canvas",{ref_key:"heatmapRef",ref:Ce},null,512)])]),o("div",Aa,[o("div",Oa,[e[67]||(e[67]=o("div",{class:"chart-header"},[o("h3",null,"Атрибуция P&L по грекам"),o("span",{class:"chart-subtitle"},"Вклад каждого грека в общий P&L")],-1)),o("div",ja,[o("canvas",{ref_key:"pnlAttributionRef",ref:Le},null,512)])]),o("div",Ka,[e[74]||(e[74]=o("div",{class:"chart-header"},[o("h3",null,"Резюме P&L греков"),o("span",{class:"chart-subtitle"},"Эффект каждого фактора")],-1)),o("div",Ya,[o("div",qa,[e[68]||(e[68]=o("span",{class:"factor-label"},"Delta P&L (Движение спота)",-1)),o("span",{class:p(["factor-value",he.value.delta>=0?"positive":"negative"])},d(he.value.delta>=0?"+":"")+d(Ve(be.value.deltaPnL)),3)]),o("div",Ba,[e[69]||(e[69]=o("span",{class:"factor-label"},"Gamma P&L (Выпуклость)",-1)),o("span",{class:p(["factor-value",he.value.gamma>=0?"positive":"negative"])},d(he.value.gamma>=0?"+":"")+d(Ve(be.value.gammaPnL)),3)]),o("div",Ea,[e[70]||(e[70]=o("span",{class:"factor-label"},"Vega P&L (Движение Vol)",-1)),o("span",{class:p(["factor-value",he.value.vega>=0?"positive":"negative"])},d(he.value.vega>=0?"+":"")+d(Ve(be.value.vegaPnL)),3)]),o("div",Ua,[e[71]||(e[71]=o("span",{class:"factor-label"},"Theta P&L (Временное затухание)",-1)),o("span",{class:p(["factor-value",he.value.theta>=0?"positive":"negative"])},d(he.value.theta>=0?"+":"")+d(Ve(be.value.thetaPnL)),3)]),o("div",Ia,[e[72]||(e[72]=o("span",{class:"factor-label"},"Rho P&L (Движение ставки)",-1)),o("span",{class:p(["factor-value",he.value.rho>=0?"positive":"negative"])},d(he.value.rho>=0?"+":"")+d(Ve(be.value.rhoPnL)),3)]),o("div",Na,[e[73]||(e[73]=o("span",{class:"factor-label"},[o("strong",null,"Общий P&L")],-1)),o("span",$a,[o("strong",null,d(Ve(be.value.totalPnL)),1)])])])])]),o("div",Ha,[e[76]||(e[76]=o("div",{class:"card-header"},[o("h3",null,"Risk Limits & Monitoring"),o("span",{class:"card-subtitle"},"Проверка лимитов греков и alerts")],-1)),o("div",Ja,[o("table",Qa,[e[75]||(e[75]=o("thead",null,[o("tr",null,[o("th",null,"Greeks"),o("th",null,"Текущее"),o("th",null,"Лимит"),o("th",null,"Использование"),o("th",null,"Статус"),o("th",null,"Действие")])],-1)),o("tbody",null,[(y(!0),r(h,null,b(me.value,a=>(y(),r("tr",{key:a.greeks,class:p(a.status.toLowerCase())},[o("td",Xa,d(a.greeks),1),o("td",Za,d(a.current.toFixed(4)),1),o("td",ae,d(a.limit),1),o("td",ee,[o("div",le,[o("div",{class:"util-fill",style:m({width:100*a.utilization+"%"})},null,4)]),o("span",se,d((100*a.utilization).toFixed(0))+"%",1)]),o("td",{class:p(["status",a.status.toLowerCase()])},d(a.status),3),o("td",te,["Warning"===a.status?(y(),r("button",re,"Уменьшить")):"Critical"===a.status?(y(),r("button",oe,"Хеджировать!")):(y(),r("span",ie,"OK"))])],2))),128))])])])]),o("div",ne,[e[77]||(e[77]=o("div",{class:"chart-header"},[o("h3",null,"P&L в рыночных сценариях"),o("span",{class:"chart-subtitle"},"Как меняется P&L при различных комбинациях движений")],-1)),o("div",ce,[o("canvas",{ref_key:"scenariosRef",ref:we},null,512)])]),e[78]||(e[78]=o("div",{class:"page-footer"},[o("span",null,"• Модель: Black-Scholes (для форвардов)"),o("span",null,"• Частота: Непрерывная"),o("span",null,"• Обновление: В реальном времени")],-1))]))}}),[["__scopeId","data-v-68bf797b"]]);export{de as default};
